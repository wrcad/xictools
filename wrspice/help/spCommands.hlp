
!!  ---------------------------------------------------------------
!!  Xic/WRspice Help System Database
!!  $Id: spCommands.hlp,v 1.59 2017/02/22 01:53:00 stevew Exp $
!!  Copyright (C) Whiteley Research Inc. 2003.  All Rights Reserved
!!  ---------------------------------------------------------------

*****************************************************************
*
* Commands
*
*****************************************************************

!!TAG WRspice
!! This file in sync with manual.

!!KEYWORD
spCommands.hlp
!!TITLE
spCommands.hlp
!!HTML 

!!SUBTOPICS
commands
controlcmds
cdump
strcmds
strcmp
strcicmp
strprefix
strciprefix
retval
uicmds
mapkey
setfont
setrdb
tbupdate
wrupdate
shellcmds
alias
cd
echo
echof
historycomm
pause
pwd
rehash
set
shell
shift
unalias
unset
usrset 
iocmds
codeblock
dumpnodes
edit
listing
load
print
return
sced
source
write
xeditorcom
simcmds
ac
alter
alterf
aspice
cache
check
dc
delete
destroy
devcnt
devload
devls
devmod
disto
dump
findrange
free 
jobs
mctrial
measure
noise
op
pz
reset
resume
rhostcom
rspice
run
save
sens
setcirc
show
state
status
step
stop
sweep
tf
trace
tran
where
datacmds
compose
cross
define
deftype
diff
display
fourier
let
linearize
pick
seed
setdim
setplot
setscale
settype
spec
undefine
unlet
misccmds
bug
help
helpreset
qhelp
quit
version

!! commands.tex 030519
!!KEYWORD
commands
!!TITLE
Built-in Commands
!!HTML 
    When a line is entered, it is interpreted as one of several
    things.  First, it may be an <a href="alias">alias</a>, in which
    case the line is replaced with the result after alias
    substitution, and the line is re-parsed.  Second, it may be the
    name of a <a href="codeblock">codeblock</a>, which is a
    user-defined command obtained from a script file, in which case
    the codeblock is executed.  Third, it may be a pre-defined
    command, in which case it is executed.  Fourth, it may be an
    assignment statement, which consists of a vector name, an '='
    symbol, and an expression, in which case it is executed as if it
    were preceded by the word "<tt>let</tt>".  Fifth, it may be the
    name of a circuit file, in which case it is loaded as if with a <a
    href="source"><b>source</b></a> command, or it may be the name of
    a command script - <i>WRspice</i> searches the current <a
    href="sourcepath"><tt>sourcepath</tt></a> (search path) for the
    file and executes it when it is found.  The effect of this is
    identical to the effect of "<tt>source</tt> <i>file</i>", except
    that the variables <tt>argc</tt> and <tt>argv</tt> are set. 
    Finally, it may be a UNIX command, in which case if the variable
    <a href="unixcom"><tt>unixcom</tt></a> is set, it is executed as
    though it were typed to the operating system shell.

    The following table lists all built-in commands understood by
    <i>WRspice</i>.
    <p>
    <table border=1 cellpadding=2 bgcolor="#ffffee">

    <tr><th colspan=2><a href="controlcmds">Control Structures</a></th>
    <tr><td><a href="cdump"><b>cdump</b></a></td>
      <td>Dump control structures for debugging</td></tr>

    <tr><th colspan=2><a href="strcmds">String Comparison and Global
     Return Value</a></th>
    <tr><td><a href="strcmp"><b>strcmp</b></a></td>
      <td>Compare strings</td></tr>
    <tr><td><a href="strcicmp"><b>strcicmp</b></a></td>
      <td>Compare strings, case insensitive</td></tr>
    <tr><td><a href="strprefix"><b>strprefix</b></a></td>
      <td>Check if string is prefix of another</td></tr>
    <tr><td><a href="strciprefix"><b>strciprefix</b></a></td>
      <td>Check if string is prefix of another, case insensitive</td></tr>
    <tr><td><a href="retval"><b>retval</b></a></td>
      <td>Set the global return value</td></tr>

    <tr><th colspan=2><a href="uicmds">User Interface Setup Commands</a></th>
    <tr><td><a href="mapkey"><b>mapkey</b></a></td>
      <td>Create keyboard mapping</td></tr>
    <tr><td><a href="setcase"><b>setcase</b></a></td>
      <td>Check/set case sensitivity for name classes</td></tr>
    <tr><td><a href="setfont"><b>setfont</b></a></td>
      <td>Set graphical interface fonts</td></tr>
    <tr><td><a href="setrdb"><b>setrdb</b></a></td>
      <td>Set X resources</td></tr>
    <tr><td><a href="tbupdate"><b>tbupdate</b></a></td>
      <td>Save tool window configuration</td></tr>
    <tr><td><a href="wrupdate"><b>wrupdate</b></a></td>
      <td>Download/install program updates</td></tr>

    <tr><th colspan=2><a href="shellcmds">Shell Commands</a></th>
    <tr><td><a href="alias"><b>alias</b></a></td>
      <td>Create alias</td></tr>
    <tr><td><a href="cd"><b>cd</b></a></td>
      <td>Change directory</td></tr>
    <tr><td><a href="echo"><b>echo</b></a></td>
      <td>Print string</td></tr>
    <tr><td><a href="echof"><b>echof</b></a></td>
      <td>Print string to file</td></tr>
    <tr><td><a href="historycomm"><b>history</b></a></td>
      <td>Print command history</td></tr>
    <tr><td><a href="pause"><b>pause</b></a></td>
      <td>Pause script execution</td></tr>
    <tr><td><a href="pwd"><b>pwd</b></a></td>
      <td>Print the current working directory</td></tr>
    <tr><td><a href="rehash"><b>rehash</b></a></td>
      <td>Update command database</td></tr>
    <tr><td><a href="set"><b>set</b></a></td>
      <td>Set a variable</td></tr>
    <tr><td><a href="shell"><b>shell</b></a></td>
      <td>Execute operating system commands</td></tr>
    <tr><td><a href="shift"><b>shift</b></a></td>
      <td>Shift argument list</td></tr>
    <tr><td><a href="unalias"><b>unalias</b></a></td>
      <td>Destroy alias</td></tr>
    <tr><td><a href="unset"><b>unset</b></a></td>
      <td>Unset a variable</td></tr>
    <tr><td><a href="usrset"><b>usrset</b></a></td>
      <td>Print list of internally used variables</td></tr>

    <tr><th colspan=2><a href="iocmds">Input and Output Commands</a></th></tr>
    <tr><td><a href="codeblock"><b>codeblock</b></a></td>
      <td>Manipulate codeblocks</td></tr>
    <tr><td><a href="dumpnodes"><b>dumpnodes</b></a></td>
      <td>Print node voltages and branch currents</td></tr>
    <tr><td><a href="edit"><b>edit</b></a></td>
      <td>Edit text file</td></tr>
    <tr><td><a href="listing"><b>listing</b></a></td>
      <td>List current circuit</td></tr>
    <tr><td><a href="load"><b>load</b></a></td>
      <td>Read plot data from file</td></tr>
    <tr><td><a href="print"><b>print</b></a></td>
      <td>Print vectors</td></tr>
    <tr><td><a href="return"><b>return</b></a></td>
      <td>Return from script immediately, possibly with a value</td></tr>
    <tr><td><a href="sced"><b>sced</b></a></td>
      <td>Bring up <i>Xic</i> schematic editor</td></tr>
    <tr><td><a href="source"><b>source</b></a></td>
      <td>Read circuit or script input file</td></tr>
    <tr><td><a href="write"><b>write</b></a></td>
      <td>Write data to rawfile</td></tr>
    <tr><td><a href="xeditorcom"><b>xeditor</b></a></td>
      <td>Edit text file</td></tr>

    <tr><th colspan=2><a href="simcmds">Simulation Commands</a></th></tr>
    <tr><td><a href="ac"><b>ac</b></a></td>
      <td>Perform ac analysis</td></tr>
    <tr><td><a href="alter"><b>alter</b></a></td>
      <td>Change circuit parameter</td></tr>
    <tr><td><a href="alterf"><b>alterf</b></a></td>
      <td>Dump alter list to Monte Carlo output file</td></tr>
    <tr><td><a href="aspice"><b>aspice</b></a></td>
      <td>Initiate asynchronous run</td></tr>
    <tr><td><a href="cache"><b>cache</b></a></td>
      <td>Manipulate subcircuit/model cache</td></tr>
    <tr><td><a href="check"><b>check</b></a></td>
      <td>Initiate range analysis</td></tr>
    <tr><td><a href="dc"><b>dc</b></a></td>
      <td>Initiate dc analysis</td></tr>
    <tr><td><a href="delete"><b>delete</b></a></td>
      <td>Delete watchpoint</td></tr>
    <tr><td><a href="destroy"><b>destroy</b></a></td>
      <td>Delete plot</td></tr>
    <tr><td><a href="devcnt"><b>devcnt</b></a></td>
      <td>Print device counts</td></tr>
    <tr><td><a href="devload"><b>devload</b></a></td>
      <td>Load device module</td></tr>
    <tr><td><a href="devls"><b>devls</b></a></td>
      <td>List available devices</td></tr>
    <tr><td><a href="devmod"><b>devmod</b></a></td>
      <td>Change device model levels</td></tr>
    <tr><td><a href="disto"><b>disto</b></a></td>
      <td>Initiate distortion analysis</td></tr>
    <tr><td><a href="dump"><b>dump</b></a></td>
      <td>Print circuit matrix</td></tr>
    <tr><td><a href="findrange"><b>findrange</b></a></td>
      <td>Find edges of operating range</td></tr>
    <tr><td><a href="free"><b>free</b></a></td>
      <td>Delete circuits and/or plots</td></tr>
    <tr><td><a href="jobs"><b>jobs</b></a></td>
      <td>Check asynchronous jobs</td></tr>
    <tr><td><a href="sweep"><b>loop</b></a></td>
      <td>Alias for sweep command</td></tr>
    <tr><td><a href="mctrial"><b>mctrial</b></a></td>
      <td>Run a Monte Carlo trial</td></tr>
    <tr><td><a href="measure"><b>measure</b></a></td>
      <td>Set up a measurement</td></tr>
    <tr><td><a href="noise"><b>noise</b></a></td>
      <td>Initiate noise analysis</td></tr>
    <tr><td><a href="op"><b>op</b></a></td>
      <td>Compute operating point</td></tr>
    <tr><td><a href="pz"><b>pz</b></a></td>
      <td>Initiate pole-zero analysis</td></tr>
    <tr><td><a href="reset"><b>reset</b></a></td>
      <td>Reset simulator</td></tr>
    <tr><td><a href="resume"><b>resume</b></a></td>
      <td>Resume run in progress</td></tr>
    <tr><td><a href="rhostcom"><b>rhost</b></a></td>
      <td>Identify remote SPICE host</td></tr>
    <tr><td><a href="rspice"><b>rspice</b></a></td>
      <td>Initiate remote SPICE run</td></tr>
    <tr><td><a href="run"><b>run</b></a></td>
      <td>Initiate simulation</td></tr>
    <tr><td><a href="save"><b>save</b></a></td>
      <td>List vectors to save during run</td></tr>
    <tr><td><a href="sens"><b>sens</b></a></td>
      <td>Initiate sensitivity analysis</td></tr>
    <tr><td><a href="setcirc"><b>setcirc</b></a></td>
      <td>Set current circuit</td></tr>
    <tr><td><a href="show"><b>show</b></a></td>
      <td>List parameters</td></tr>
    <tr><td><a href="state"><b>state</b></a></td>
      <td>Print circuit state</td></tr>
    <tr><td><a href="status"><b>status</b></a></td>
      <td>Print trace status</td></tr>
    <tr><td><a href="step"><b>step</b></a></td>
      <td>Advance simulator</td></tr>
    <tr><td><a href="stop"><b>stop</b></a></td>
      <td>Specify stop condition</td></tr>
    <tr><td><a href="sweep"><b>sweep</b></a></td>
      <td>Perform analysis over parameter range</td></tr>
    <tr><td><a href="tf"><b>tf</b></a></td>
      <td>Initiate transfer function analysis</td></tr>
    <tr><td><a href="trace"><b>trace</b></a></td>
      <td>Set trace</td></tr>
    <tr><td><a href="tran"><b>tran</b></a></td>
      <td>Initiate transient analysis</td></tr>
    <tr><td><a href="where"><b>where</b></a></td>
      <td>Print nonconvergence information</td></tr>

    <tr><th colspan=2><a href="datacmds">
        Data Manipulation Commands</a></th></tr>
    <tr><td><a href="compose"><b>compose</b></a></td>
      <td>Create vector</td></tr>
    <tr><td><a href="cross"><b>cross</b></a></td>
      <td>Vector cross operation</td></tr>
    <tr><td><a href="define"><b>define</b></a></td>
      <td>Define a macro function</td></tr>
    <tr><td><a href="deftype"><b>deftype</b></a></td>
      <td>Define a data type</td></tr>
    <tr><td><a href="diff"><b>diff</b></a></td>
      <td>Compare plots and vectors</td></tr>
    <tr><td><a href="display"><b>display</b></a></td>
      <td>Print vector list</td></tr>
    <tr><td><a href="fourier"><b>fourier</b></a></td>
      <td>Perform spectral analysis</td></tr>
    <tr><td><a href="let"><b>let</b></a></td>
      <td>Create or assign vectors</td></tr>
    <tr><td><a href="linearize"><b>linearize</b></a></td>
      <td>Linearize vector data</td></tr>
    <tr><td><a href="pick"><b>pick</b></a></td>
      <td>Create vector from reduced data</td></tr>
    <tr><td><a href="seed"><b>seed</b></a></td>
      <td>Seed random number generator</td></tr>
    <tr><td><a href="setdim"><b>setdim</b></a></td>
      <td>Set current plot dimensions</td></tr>
    <tr><td><a href="setplot"><b>setplot</b></a></td>
      <td>Set current plot</td></tr>
    <tr><td><a href="setscale"><b>setscale</b></a></td>
      <td>Assign scale to vector</td></tr>
    <tr><td><a href="settype"><b>settype</b></a></td>
      <td>Assign type to vector</td></tr>
    <tr><td><a href="spec"><b>spec</b></a></td>
      <td>Perform spectral analysis</td></tr>
    <tr><td><a href="undefine"><b>undefine</b></a></td>
      <td>Undefine macro function</td></tr>
    <tr><td><a href="unlet"><b>unlet</b></a></td>
      <td>Undefine vector</td></tr>

    <tr><th colspan=2><a href="graphcmds">
      Graphical Output Commands</a></th></tr>
    <tr><td><a href="asciiplot"><b>asciiplot</b></a></td>
      <td>Generate line printer plot</td></tr>
    <tr><td><a href="combine"><b>combine</b></a></td>
      <td>Combine plots</td></tr>
    <tr><td><a href="hardcopy"><b>hardcopy</b></a></td>
      <td>Send plot to printer</td></tr>
    <tr><td><a href="iplot"><b>iplot</b></a></td>
      <td>Plot during simulation</td></tr>
    <tr><td><a href="mplot"><b>mplot</b></a></td>
      <td>Plot range analysis output</td></tr>
    <tr><td><a href="plot"><b>plot</b></a></td>
      <td>Plot simulation results</td></tr>
    <tr><td><a href="plotwin"><b>plotwin</b></a></td>
      <td>Pop down and destroy plot windows</td></tr>
    <tr><td><a href="xgraph"><b>xgraph</b></a></td>
      <td>Plot simulation results using <tt>xgraph</tt></td></tr>

    <tr><th colspan=2><a href="misccmds">Miscellaneous Commands</a></th></tr>
    <tr><td><a href="bug"><b>bug</b></a></td>
      <td>Submit bug report</td></tr>
    <tr><td><a href="help"><b>help</b></a></td>
      <td>Enter help system</td></tr>
    <tr><td><a href="helpreset"><b>helpreset</b></a></td>
      <td>Clear help system cache</td></tr>
    <tr><td><a href="qhelp"><b>qhelp</b></a></td>
      <td>Print command summaries</td></tr>
    <tr><td><a href="quit"><b>quit</b></a></td>
      <td>Exit program</td></tr>
    <tr><td><a href="rusage"><b>rusage</b></a></td>
      <td>Print resource usage statistics</td></tr>
    <tr><td><a href="stats"><b>stats</b></a></td>
      <td>Print resource usage statistics</td></tr>
    <tr><td><a href="version"><b>version</b></a></td>
      <td>Print program version</td></tr>

    </table>


!!REDIRECT repeat       controlcmds#repeat
!!REDIRECT while        controlcmds#while
!!REDIRECT dowhile      controlcmds#dowhile
!!REDIRECT foreach      controlcmds#foreach
!!REDIRECT if           controlcmds#if
!!REDIRECT else         controlcmds#if
!!REDIRECT label        controlcmds#label
!!REDIRECT goto         controlcmds#goto
!!REDIRECT begin        controlcmds#goto
!!REDIRECT continue     controlcmds#continue
!!REDIRECT break        controlcmds#break
!!REDIRECT end          controlcmds#end
!!REDIRECT endif        controlcmds#end
!!REDIRECT endwhile     controlcmds#end
!!REDIRECT enddowhile   controlcmds#end
!!REDIRECT endforeach   controlcmds#end
!!REDIRECT endrepeat    controlcmds#end

!! ----------------------------------------------------------------------------
!! commands.tex 012209
!!KEYWORD
controlcmds
!!TITLE
Control Structures
!!HTML 
    Control structures operate on expressions involving vectors,
    constants, and ($-substituted) shell variables.  A non-zero result
    (of any element, if the length is greater than 1) indicates
    ``true''.

    <p>
    Although control structures are most commonly used in command
    scripts, they are also allowed from the command line.  While a
    block is active, the command prompt changes to one or more
    "<tt>></tt>" characters, the number of which represents the
    current depth into the control commands.  As with a UNIX shell,
    control structures can be used from the command line to repeat one
    or more commands.

    <p>
    The following control structures are available:
    <a name="repeat"></a>
    <dl>
    <dt><b>repeat block</b><dd>
 
    <p>
    <tt>repeat</tt> [<i>number</i>]
    <blockquote>
          statement<br>
          ...<br>
    </blockquote>
    <tt>end</tt>

    <p>
    Execute the statements in the block defined by the <b>repeat</b>
    line and the corresponding <b>end</b> statement <i>number</i>
    times, or indefinitely if no <i>number</i> is given.  The
    <i>number</i> must be a constant, or a shell variable reference
    that evaluates to a constant, which may be a vector reference in
    the <tt>$&</tt> form.  A vector name is not valid.
    </dl>

    <a name="while"></a>
    <dl>
    <dt><b>while block</b><dd>
 
    <p>
    <tt>while</tt> <i>condition</i>
    <blockquote>
          statement<br>
          ...<br>
    </blockquote>
    <tt>end</tt>

    <p>
    The <b>while</b> line, together with a matching <b>end</b>
    statement, defines a block of commands that are executed while the
    <i>condition</i> remains true.  The <i>condition</i> is an
    expression which is considered true if it evaluates to a nonzero
    value, or if a vector, any component is nonzero.  The test is
    performed at the top of the loop, so that if the <i>condition</i>
    is initially false, the statements are not executed.
    </dl>
 
    <a name="dowhile"></a>
    <dl>
    <dt><b>dowhile block</b><dd>

    <p>
    <tt>dowhile</tt> <i>condition</i>
    <blockquote>
          statement<br>
          ...<br>
    </blockquote>
    <tt>end</tt>

    <p>
    The <b>dowhile</b> line, together with a matching <b>end</b>
    statement, defines a block of commands that are executed while the
    <i>condition</i> remains true.  The <i>condition</i> is an
    expression which is considered true if it evaluates to a nonzero
    value, or if a vector, any component is nonzero.  Unlike the
    <b>while</b> statement, the test is performed at the bottom of the
    loop - so that the loop executes at least once.
    </dl>
 
    <a name="foreach"></a>
    <dl>
    <dt><b>foreach block</b><dd>

    <p>
    <tt>foreach</tt> <i>var value</i> ...
    <blockquote>
          statement<br>
          ...<br>
    </blockquote>
    <tt>end</tt>

    <p>
    The <b>foreach</b> statement opens a block which will be executed
    once for each <i>value</i> given.  Each time through, the
    <i>var</i> will be set to successive <i>value</i>s.  After the
    loop is exited it will have the last value that was assigned to
    it.  The <i>var</i> can be accessed in the loop with the
    <tt>$var</tt> notation, i.e., it should be treated as a shell
    variable, not a vector.  This is set to each <i>value</i> as a
    text item.
    </dl>
 
    <a name="if"></a>
    <dl>
    <dt><b>if block</b><dd>

    <p>
    <tt>if</tt> <i>condition</i>
    <blockquote>
          statement<br>
          ...<br>
    </blockquote>
    <tt>else</tt>
    <blockquote>
          statement<br>
          ...<br>
    </blockquote>
    <tt>end</tt>

    <p>
    If the <i>condition</i> is nonzero then the first set of
    statements is executed, otherwise the second set.  The
    <b>else</b> and the second set of statements may be omitted.
    </dl>
 
    <a name="label"></a>
    <dl>
    <dt><b>label statement</b><dd>

    <p>
    <tt>label</tt> <i>labelname</i>

    <p>
    This defines a label which can be used as an argument to a
    <b>goto</b> statement.
    </dl>
 
    <a name="goto"></a>
    <dl>
    <dt><b>goto statement</b><dd>

    <p>
    <tt>goto</tt> <i>label</i>

    <p>
    If there is a <b>label</b> statement defining the <i>label</i> in
    the block or an enclosing block, control is transferred there.  If
    the <b>goto</b> is used outside of a block, the label must appear
    ahead of the goto (i.e., a forward <b>goto</b> may occur only
    within a block.  There is a <b>begin</b> macro pre-defined as
    "<tt>if 1</tt>" which may be used if forward label references are
    required outside of a block construct.
    </dl>
 
    <a name="continue"></a>
    <dl>
    <dt><b>continue statement</b><dd>

    <p>
    <tt>continue</tt> [<i>number</i>]

    <p>
    If there is a <b>while</b>, <b>dowhile</b>, <b>foreach</b>, or
    <b>repeat</b> block enclosing this statement, the next iteration
    begins immediately and control passes to the top of the block. 
    Otherwise an error results.  If a <i>number</i> is given, that
    many surrounding blocks are continued.  If there are not that many
    blocks, an error results.
    </dl>

    <a name="break"></a>
    <dl>
    <dt><b>break statement</b><dd>

    <p>
    <tt>break</tt> [<i>number</i>]

    <p>
    If there is a <b>while</b>, <b>dowhile</b>, <b>foreach</b>, or
    <b>repeat</b> block enclosing this statement, control passes out
    of the block.  Otherwise an error results.  If a <i>number</i> is
    given, that number of enclosing blocks are exited.  If there are
    not that many blocks, an error results.
    </dl>
 
    <a name="end"></a>
    <dl>
    <dt><b>end statement</b><dd>

    <p>
    <tt>end</tt>

    <p>
    This statement terminates a block.  It is an error for an
    <b>end</b> to appear without a matching <b>if</b>, <b>while</b>,
    <b>dowhile</b>, <b>foreach</b>, or <b>repeat</b> statement.  The
    keywords <tt>endif</tt>, <tt>endwhile</tt>, <tt>enddowhile</tt>,
    <tt>endforeach</tt>, and <tt>endrepeat</tt> are internally aliased
    to <tt>end</tt>.
    </dl>
 
    <p>
    Control structures may be nested.  When a block is entered and the
    input is from the keyboard, the prompt becomes a number of >'s
    equalling the depth of blocks the user has entered.  The current
    control structures may be examined with the debugging command <a
    href="cdump"><b>cdump</b></a>.  The <b>cdump</b> command prints
    out the contents of the currently active control structures.

!!SEEALSO
commands

!! commands.tex: 012709
!!KEYWORD
cdump
!!TITLE
cdump command
!!HTML 
    command: <tt>cdump</tt>
 
    <p>
    The <tt>cdump</tt> command prints out the contents of the
    currently active control structures.  The command takes no
    arguments.  It is intended primarily for debugging.
 
!!SEEALSO
controlcmds

!! ----------------------------------------------------------------------------
!! commands.tex: 030519
!!KEYWORD
strcmds
!!TITLE
String Comparison and Global Return Value
!!HTML 
    These commands are used for string comparison, and for setting the
    global return value.  The global return value is an internal
    global variable that can be set and queried from any script (with
    the <a href="variablesub"><tt>$?</tt></a> construct).  This can be
    used to pass numeric data from a script, but one must take
    care that the value is not overwritten before use, as its scope is
    global.  The string comparison functions return their comparison
    result in the global return value.  There is no native string data
    type in the scripting language, and the commands here provide
    basic string support.

    <p>
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th colspan=2><a href="strcmds">String Comparison and Global
     Return Value</a></th>
    <tr><td><a href="strcmp"><b>strcmp</b></a></td>
      <td>Compare strings</td></tr>
    <tr><td><a href="strcicmp"><b>strcicmp</b></a></td>
      <td>Compare strings, case insensitive</td></tr>
    <tr><td><a href="strprefix"><b>strprefix</b></a></td>
      <td>Check is string is prefix of another</td></tr>
    <tr><td><a href="strciprefix"><b>strciprefix</b></a></td>
      <td>Check is string is prefix of another, case insensitive</td></tr>
    <tr><td><a href="retval"><b>retval</b></a></td>
      <td>Set the "global return value"</td></tr>
    </table>

!!SEEALSO
commands

!! commands.tex 080816
!!KEYWORD
strcmp
!!TITLE
strcmp command
!!HTML 
    command: <tt>strcmp</tt> [<i>varname</i>] <i>string1 string2</i>

    <p>
    The <b>strcmp</b> command is used for string comparison in control
    structures.  This supports the original Spice3 <b>strcmp</b>
    which returns is value in a given variable, and the <i>WRspice</i>
    convention where the comparison value is returned in the global
    return value (accessible with "<tt>$?</tt>").

    <p>
    In either case, the comparison value is a number that is less
    than, equal to, or greater than zero according to whether
    <i>string1</i> is lexically before, equal to, or after
    <i>string2</i>.

    <p>
    If three arguments are given, the first argument is taken as the
    name of a variable which is set to the comparison value.  This
    convention is supported for backwards compatibility, of this
    function only.  Otherwise, the global return value will be set to
    this value.  The other arguments are literal strings.

    <p>
    Example
    <blockquote><tt>
    .control<br>
    set str1="abcd efgh"<br>
    set str2="bbcd efgh"<br>
    strcmp "$str1" "$str2"<br>
    if ($? &#60; 0)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;echo "$str1" ahead of "$str2"<br>
    else<br>
    if ($? = 0)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;echo strings are the same<br>
    else<br>
    &nbsp;&nbsp;&nbsp;&nbsp;echo "$str1" after "$str2"<br>
    end<br>
    end<br>
    .endc
    </tt></blockquote>

!!SEEALSO
strcmds

!! commands.tex 080816
!!KEYWORD
strcicmp
!!TITLE
strcicmp command
!!HTML 
    command: <tt>strcmp</tt> <i>string1 string2</i>

    <p>
    The <b>strcicmp</b> command is similar to <a
    href="strcmp"><b>strcmp</b></a>, however the comparison result is
    case-insensitive, and the Spice3 return convention is not
    supported.  The global return value (accessible as "<tt>$?</tt>")
    is set to the comparison value.  The comparison value is a number
    that is less than, equal to, or greater than zero according to
    whether <i>string1</i> is lexically before, equal to, or after
    <i>string2</i>.  The two arguments are literal strings.

!!SEEALSO
strcmds

!! commands.tex 080816
!!KEYWORD
strprefix
!!TITLE
strprefix command
!!HTML 
    command: <tt>strprefix</tt> <i>string1 string2</i>

    <p>
    The <b>strprefix</b> command will set the global return value to
    one if <i>string1</i> is a prefix of <i>string2</i>, or zero if
    not.

!!SEEALSO
strcmds

!! commands.tex 080816
!!KEYWORD
strciprefix
!!TITLE
strciprefix command
!!HTML 
    command: <tt>strciprefix</tt> <i>string1 string2</i>

    <p>
    The <b>strciprefix</b> command will set the global return value to
    one if <i>string1</i> is a case-insensitive prefix of
    <i>string2</i>, or zero if not.

!!SEEALSO
strcmds

!! commands.tex 030519
!!KEYWORD
retval
!!TITLE
retval command
!!HTML 
    command: <tt>retval</tt> <i>value</i>

    <p>
    The <b>retval</b> command will set the global return value to the
    numeric value given.  This can be used to pass a value back from a
    script.  The value is initialized to zero whenever a script is
    executed, so that zero is the default return value.  The global
    return value is a global value available in any script and the
    command prompt line, and is accessed with the special variable
    name <a href="variablesub"><tt>$?</tt></a>.  The global return
    value is set by this function and the string comparison functions,
    and optionally by the <a href="return"><b>return</b></a> function.

!!SEEALSO
strcmds

!! ----------------------------------------------------------------------------
!! commands.tex: 102817
!!KEYWORD
uicmds
!!TITLE
User Interface Setup Commands
!!HTML 
    These commands perform setup and control of aspects of the user
    interface, both graphical and non-graphical.

    <p>
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th colspan=2>User Interface Setup Commands</th></tr>
    <tr><td><a href="mapkey"><b>mapkey</b></a></td>
      <td>Create keyboard mapping</td></tr>
    <tr><td><a href="setcase"><b>setcase</b></a></td>
      <td>Check/set case sensitivity for name classes</td></tr>
    <tr><td><a href="setfont"><b>setfont</b></a></td>
      <td>Set graphical interface fonts</td></tr>
    <tr><td><a href="setrdb"><b>setrdb</b></a></td>
      <td>Set X resources</td></tr>
    <tr><td><a href="tbupdate"><b>tbupdate</b></a></td>
      <td>Save tool window configuration</td></tr>
    <tr><td><a href="wrupdate"><b>wrupdate</b></a></td>
      <td>Download/install program updates</td></tr>
    </table>

!!SEEALSO
commands

!! commands.tex 011909
!!KEYWORD
mapkey
!!TITLE
mapkey command
!!HTML 
    command: <tt>mapkey</tt> [ <tt>-r</tt> [<i>filename</i>] |
      <tt>-w</tt> [<i>filename</i>] | <i>keyname data</i> ]

    <p>
    The <b>mapkey</b> command provides limited keyboard mapping
    support.  Only the keys that are used for <a
    href="editing">command line editing</a> are mappable.  This is to
    account for "strange" terminals that may not send the expected
    data when a key is pressed.

    <p>
    The following keys can be mapped:
    <blockquote> <b>
    Ctrl-A<br>
    Ctrl-D<br>
    Ctrl-E<br>
    Ctrl-K<br>
    Ctrl-U<br>
    Ctrl-V<br>
    Tab<br>
    Backspace<br>
    Delete<br>
    LeftArrow<br>
    RightArrow<br>
    UpArrow<br>
    DownArrow<br>
    </b></blockquote>
    Of these, the arrow keys and <b>Delete</b> are most likely to need
    remapping.

    <p>
    If no argument is given, the user is prompted to press each of
    these keys, and the internal map is updated.  After doing this,
    the keys should have their expected effect when pressed while
    entering a <i>WRspice</i> command.

    <p>
    If "<tt>-w</tt> [<i>filename</i>]" is given, the present internal
    map will be saved in the named file, or "<tt>wrs_keymap</tt>" in
    the current directory if no <i>filename</i> is given.

    <p>
    If "<tt>-r</tt> [<i>filename</i>]" is given, the file will be read
    as a key mapping file, and the internal map will be updated.  The
    <i>filename</i>, if not given, defaults to "<tt>wrs_keymap</tt>". 
    If no path is given, it will be found in the current directory or
    the startup directory.

    <p>
    If "<i>keyname data...</i>" is given, a single key in the internal
    map can be updated.  The format is the same as the entries in the
    mapping file, i.e., one of the names above, followed by one or
    more hex bytes of data.  The bytes represent the stream sent when
    the named key is pressed, and will henceforth be interpreted as
    the pressing of that key.  The bytes should be in hex format, and
    the first byte of a multi-byte sequence must be the <b>Escape</b>
    character (1b).

    <p>
    Example (from real life):

    <p>
    After installing the latest X-window system, suppose one finds
    that, when running <i>WRspice</i> in an <tt>xterm</tt> window, the
    <b>Delete</b> key no longer deletes the character under the cursor
    in <i>WRspice</i>, but instead injects some gibberish.  There are
    three ways to fix this.  The first two are specific to the
    <tt>xterm</tt> program, and instruct the <tt>xterm</tt> to send
    the ASCII Del character when <b>Delete</b> is pressed, rather than
    use the new default which is to send the VT-100 "delete character"
    string.  The third method is to map this string into the delete
    function in <i>WRspice</i>.

    <ol>
    <li>From the main <tt>xterm</tt> menu, find and click on the
    "<b>Delete is DEL</b>" entry.  Usually, holding the <b>Ctrl</b>
    key and clicking in the <tt>xterm</tt> with button 1 displays this
    menu.

    <li>Create a file named "<tt>XTerm</tt>" in your home directory,
    containing the line
    <blockquote>
    <tt>*deleteIsDEL: true</tt>
    </blockquote>

    <li>In <i>WRspice</i>, type "<tt>mapkey</tt>" and follow the
    prompts.  You can save the new map, and add a line to a
    <tt>.wrspiceinit</tt> <a href="startup_files">startup file</a> to
    read it when <i>WRspice</i> starts.
    </ol>

!!SEEALSO
uicmds

!! commands.tex 121011
!!KEYWORD
setcase
!!TITLE
setcase command
!!HTML
    command: <tt>setcase</tt> [<i>flags</i>]

    <p>
    This command sets or reports the case sensitivity of various name
    classes in <i>WRspice</i>.  These classes are:

    <blockquote>
    Function names.<br>
    User-defined function names.<br>
    Vector names.<br>
    .PARAM names.<br>
    Codeblock names.<br>
    Node and device names.<br>
    </blockquote>

    <p>
    The <i>flags</i> is a word consisting of letters, each letter
    corresponds to a class from the list above.  If lower-case, the
    class will be case-sensitive.  If upper-case, the class will be
    case-insensitive.

    <p>
    The letters are <tt>f</tt>, <tt>u</tt>, <tt>v</tt>, <tt>p</tt>,
    <tt>c</tt>, and <tt>n</tt> corresponding to the classes listed
    above.  By default, all <i>WRspice</i> identifiers are
    case-insensitive, which corresponds to the string
    "<tt>FUVPCN</tt>".  Letters can appear in any order, and
    unrecognized characters are ignored.  Not all letters need be
    included, only those seen will be used.

    <p>
    If given an argument string as described above, and called from a
    <a href="startup_files">startup file</a>, the case sensitivities
    will be set.  This can <b>not</b> be done from the <i>WRspice</i>
    prompt.  Case sensitivity can also be set from the command line by
    using the <tt>-c</tt> <a href="arguments#-c">option</a>.

    <p>
    If no argument, a report of the case sensitivity status is printed.
    This can be done from the <i>WRspice</i> prompt.

!!SEEALSO
uicmds

!! commands.tex 030518
!!KEYWORD
setfont
!!TITLE
setfont command
!!HTML
    command: <tt>setfont</tt> <i>font_num</i> <i>font_specifier</i>

    <p>
    This command can be used to set the fonts employed in the
    graphical interface.  Although this can be given at a prompt, it
    is intended to be invoked in a startup script.

    <p>
    The first argument is an integer 1-6 (1-4 on Windows) which
    designates the font category.  The index corresponds to the
    entries in the drop-down menu of font categories found in the <a
    href="fontspanel">Font Selection</a> panel.

    <p>
    The rest of the line is a font description string.  This varies
    between graphics types.

    <dl>
    <dt>Unix/Linux<dd>
    For GTK1 releases, the name is the X Logical Font Descriptor name
    for a font available on the user's system, or an alias.  For GTK2
    releases, the name is a Pango font description name.  There is a
    very modest attempt to interpret a specification of the wrong
    type.
    </dl>

    <dl>
    <dt>Windows<dd>
    The name is in one or the following formats:
    <dl>
    <dt>New standard (<i>WRspice</i> release 2.3.58 and later)<dd>
    <i>face_name pixel_height</i>
    <blockquote>
    Example: <tt>Lucida Console 12</tt>
    </blockquote>
    </dl>

    <dl>
    <dt>Old standard (deprecated)<dd>
    (<i>pixel_height</i>)<i>face_name</i>
    <blockquote>
    Example: <tt>(12)Lucida Console</tt>
    </blockquote>
    </dl>

    The <i>face_name</i> is the name of a font family installed on the
    system, and the <i>pixel_height</i> is the on-screen size.
    </dl>

    <p>
    You will probably never need to use the <b>setfont</b> command
    directly.  All settable fonts are saved in the
    <tt>.wrspiceinit</tt> <a href="startup_files">startup file</a>
    when the <b>Update Tools</b> menu command in the <b>File</b> menu is
    given, or the <a href="tbupdate"><b>tbupdate</b></a> command is
    invoked.

!!SEEALSO
uicmds

!! commands.tex 012209
!!KEYWORD
setrdb
!!TITLE
setrdb command
!!HTML 
    command: <tt>setrdb</tt> <i>resource</i>: <i>value</i>

    <p>
    The <b>setrdb</b> command adds resources to the X resource
    database.  The user interface toolset currently used to implement
    the <i>WRspice</i> user interface is the GTK toolkit (<a
    href="http://www.gtk.org"><tt>www.gtk.org</tt></a>) which does not
    use the X resource mechanism.

    <p>
    <i>WRspice</i> presently only recognizes resource strings which
    set the plotting colors for the <a href="plot"><b>plot</b></a>
    command.  The names of these resources are "<tt>color0</tt>"
    through "<tt>color19</tt>", which correspond directly to the <a
    href="color">color<i>N</i></a> shell variables, and to the colors
    listed in the <b>Colors</b> tool of the <b>Tools</b> menu of the
    <a href="toolbar"><b>Tool Control</b></a> window.  To set a color
    using the <b>setrdb</b> command, one can use forms like
    <blockquote>
    <tt>setrdb *color2:  pink</tt>
    </blockquote>
 
!!SEEALSO
uicmds

!! commands.tex 030518
!!KEYWORD
tbupdate
!!TITLE
tbupdate command
!!HTML
    command: <tt>tbupdate</tt>

    <p>
    This command will update the user's <a
    href="startup_files"><tt>.wrspiceinit</tt></a> file in the home
    directory to reflect the current <a href="tbsetup">tool setup</a>. 
    The window arrangement should be the same the next time the user
    starts <i>WRspice</i>.  This command is also performed when the
    user presses the <b>Update Tools</b> button in the <b>File</b>
    menu of the <a href="toolbar"><b>Tool Control</b></a> window.

!!SEEALSO
uicmds

!! commands.tex 042118
!!KEYWORD
wrupdate
!!TITLE
wrupdate command
!!HTML
    command: <tt>wrupdate</tt>

    <p>
    This command is equivalent to giving the special keyword
    "<tt>:xt_pkgs</tt>" to the help system, which brings up the
    <i>XicTools</i> <a href="update">package management</a> page.  The
    page lists installed and available packages for each of the
    <i>XicTools</i> programs for the current operating system, and
    provides buttons to download and install the packages.

    <p>  
    Unlike in earlier <i>WRspice</i> releases, there is no provision
    for automatic checking for updates, so this command or equivalent
    should be run periodically to check for updated packages.  The
    computer must have http access to the internet for successful use
    of this functionality.
 
!!SEEALSO
uicmds

!! ----------------------------------------------------------------------------
!! commands.tex 012709
!!KEYWORD
shellcmds
!!TITLE
Shell Commands
!!HTML 
    The commands listed below are built into the <i>WRspice</i> shell,
    or control shell operation.

    <p>
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th colspan=2>Shell Commands</th>
    <tr><td><a href="alias"><b>alias</b></a></td>
      <td>Create alias</td></tr>
    <tr><td><a href="cd"><b>cd</b></a></td>
      <td>Change directory</td></tr>
    <tr><td><a href="echo"><b>echo</b></a></td>
      <td>Print string</td></tr>
    <tr><td><a href="echof"><b>echof</b></a></td>
      <td>Print string to file</td></tr>
    <tr><td><a href="historycomm"><b>history</b></a></td>
      <td>Print command history</td></tr>
    <tr><td><a href="pause"><b>pause</b></a></td>
      <td>Pause script execution</td></tr>
    <tr><td><a href="pwd"><b>pwd</b></a></td>
      <td>Print the current working directory</td></tr>
    <tr><td><a href="rehash"><b>rehash</b></a></td>
      <td>Update command database</td></tr>
    <tr><td><a href="set"><b>set</b></a></td>
      <td>Set a variable</td></tr>
    <tr><td><a href="shell"><b>shell</b></a></td>
      <td>Execute operating system commands</td></tr>
    <tr><td><a href="shift"><b>shift</b></a></td>
      <td>Shift argument list</td></tr>
    <tr><td><a href="unalias"><b>unalias</b></a></td>
      <td>Destroy alias</td></tr>
    <tr><td><a href="unset"><b>unset</b></a></td>
      <td>Unset a variable</td></tr>
    <tr><td><a href="usrset"><b>usrset</b></a></td>
      <td>Print list of internally used variables</td></tr>
    </table>

!!SEEALSO
commands

!! commands.tex 011909
!!KEYWORD
alias
!!TITLE
alias command
!!HTML 
    command: <tt>alias</tt> [<i>word</i>] [<i>text</i>]

    <p>
    The <b>alias</b> command is used to create aliases, as in the
    C-shell.  The <b>alias</b> command causes <i>word</i> to be aliased
    to <i>text</i>.  Whenever a command line beginning with
    <i>word</i> is typed, <i>text</i> is substituted.  Arguments are
    either appended to the end, or substituted in if history
    characters are present in the text.  With no argument, a list of
    the current aliases is displayed.
 
    <p>
    In the body if the alias text, any strings of the form
    !:<i>number</i> are replaced with the <i>number</i>'th argument of
    the actual command line.  Note that when the alias is defined with
    the <b>alias</b> command, these strings must be quoted to prevent
    history substitution from replacing the !'s before the alias
    command can get to them.  Thus the command
    <blockquote>
         <tt>alias foo echo '!:2' '!:1'</tt>
    </blockquote>
    Causes "<tt>foo bar baz</tt>" to be replaced with "<tt>echo baz
    bar</tt>".  Other !  modifiers as described in the section on <a
    href="historysub">history substitution</a> may also be used,
    always referring to the actual command line arguments given.  If a
    command line starts with a backslash '<tt>\</tt>' any alias
    substitution is inhibited.

!!SEEALSO
unalias
aliases
spshell
shellcmds

!! commands.tex 011909
!!KEYWORD
cd
!!TITLE
cd command
!!HTML 
    command: <tt>cd</tt> [<i>directory</i>]

    <p>
    The <b>cd</b> command is used to change the current working
    directory.  The command will change the current working directory
    to <i>directory</i>, or to the user's home directory if none is
    given.

!!SEEALSO
shellcmds
 
!! commands.tex 011909
!!KEYWORD
echo
!!TITLE
echo command
!!HTML 
    command: <tt>echo</tt> [<tt>-n</tt>] [<i>stuff</i> ...]

    <p>
    The <b>echo</b> command will print its arguments on the standard
    output.  If the <tt>-n</tt> flag is given, then the arguments are
    echoed without a trailing newline.

!!SEEALSO
shellcmds
 
!! commands.tex 012709
!!KEYWORD
echof
!!TITLE
echof command
!!HTML
    This command is only available from the control scripts which are
    active during <a href="monte">Monte Carlo</a> or <a
    href="oprng_analysis">operating range</a> analysis.

    <p>
    The <tt>echof</tt> command is used in the same manner as the <a
    href="echo"><b>echo</b></a> command, however the text is directed
    to the output file being generated as the analysis is run.  If the
    file is not open, there is no action.  This command can be used in
    the scripts to insert text, such as the Monte Carlo trial values,
    into the output file.

!! commands.tex 011909
!!KEYWORD
historycomm
!!TITLE
history command
!!HTML 
    command: <tt>history</tt> [<tt>-r</tt>] [<i>number</i>]

    <p>
    The <b>history</b> command prints the last commands executed.  The
    command will print out the last <i>number</i> commands typed by
    the user, or all the commands saved if <i>number</i> is not given. 
    The number of commands saved is determined by the value of the <a
    href="historyvar"><tt>history</tt></a> variable.  If the
    <tt>-r</tt> flag is given, the list is printed in reverse order.
 
!!SEEALSO
historysub
shellcmds

!! commands.tex 011909
!!KEYWORD
pause
!!TITLE
pause command
!!HTML 
    command: <tt>pause</tt>

    <p>
    The <b>pause</b> command is used in scripts to cause the executing
    script to wait for a keypress.  The function takes no arguments,
    and the keypress is discarded.

!!SEEALSO
shellcmds

!! commands.tex 091714
!!KEYWORD
pwd
!!TITLE
pwd command
!!HTML 
    command: <tt>pwd</tt>

    Print the current working directory.

!!SEEALSO
shellcmds

!! commands.tex 011909
!!KEYWORD
rehash
!!TITLE
rehash command
!!HTML 
    command: <tt>rehash</tt>

    <p>
    The <b>rehash</b> command rebuilds the command list from the files
    found along the user's executable file search path.  The command
    will recalculate the internal hash tables used when looking up
    operating system commands, and make all operating system commands
    in the user's <b>PATH</b> available for command completion.  This
    command takes no arguments, and has effect only when the <a
    href="unixcom"><tt>unixcom</tt></a> variable is set.
 
!!SEEALSO
shellcmds
unixcomcomm

!! commands.tex 041611
!!KEYWORD
set
!!TITLE
set command
!!HTML 
    command: <tt>set</tt> [<i>varname</i> [= <i>value</i>] ...]

    <p>
    The <b>set</b> command allows the user to examine and set shell
    variables.  It is also possible to assign vectors with the
    <b>set</b> command.  In addition, shell variables are set which
    correspond to definitions supplied on the <a
    href=".options"><tt>.options</tt></a> line of the current circuit,
    and there are additional shell variables which are set
    automatically in accord with the current plot.  The shell
    variables that are currently active can be listed with the
    <b>set</b> command given without arguments, and are also listed
    within the <b>Variables</b> window brought up from the
    <b>Tools</b> menu of the <b>Tool Control</b> window.  In these
    listings, a '<tt>+</tt>' symbol is prepended to variables defined
    from a <tt>.options</tt> line in the current circuit, and a '*'
    symbol is prepended to those variables defined for the current
    plot.  These variable definitions will change as the current
    circuit and current plot change.  Some variables are read-only and
    may not be changed by the user, though this is not indicated in
    the listing.

    <p>
    Before a simulation starts, the options from the <tt>.options</tt>
    line of the current circuit are merged with any of the same name
    that have been set using the shell.  The result of the merge is
    that options that are booleans will be set if set in either case,
    and those that take values will assume the value set through the
    shell if conflicting definitions are given.  The merge will be
    suppressed if the shell variable <a
    href="noshellopts"><tt>noshellopts</tt></a> is set <i>from the
    shell</i>, in which case the only options used will be those from
    the <tt>.options</tt> line, and those that are redefined using the
    <b>set</b> command will be ignored.

    <p>
    Above, the <i>varname</i> is the name of the shell variable to
    set, and <i>value</i>, if present, is a single token to be
    assigned.  Multiple variables can be assigned with a single
    <b>set</b> command.  If <i>value</i> is missing (along with the
    '<tt>=</tt>'), then <i>varname</i> is of boolean type and always
    taken as "true" when set.  If <i>value</i> is a pure number not
    double quoted, then <i>varname</i> will reference that number. 
    Otherwise, <i>varname</i> will reference <i>value</i> as a
    character string, unless <i>value</i> is a list.  A list is a
    space-separated list of tokens in space-separated parentheses, as
    in
    <blockquote>
    <tt>set mylist = ( abc def 1.2 xxdone )</tt>
    </blockquote>
    which sets the variable <tt>mylist</tt> to the list of four
    tokens.  The <a href="unset"><b>unset</b></a> command can be used
    to delete a variable.

    <p>
    The value of a variable <i>word</i> may be inserted into a command
    by writing <tt>$</tt><i>word</i>.  If a variable is set to a list
    of values that are enclosed in parentheses (which must be
    separated from their values by white space), the value of the
    variable is the list.

    <p>
    The set command can also be used to assign values to <a
    href="plotvec">vectors</a>.  The syntax in this case is

    <blockquote>
      <tt>set &</tt><i>vector</i> <tt>=</tt> <i>value</i>
    </blockquote>

    which is equivalent to

    <blockquote>
      <tt>let</tt> <i>vector</i> <tt>=</tt> <i>value</i>
    </blockquote>

    <p>
    When entering this form from the <i>WRspice</i> command line, the
    '<tt>&</tt>' character must be hidden from the shell, perhaps most
    conveniently be preceding it with a backslash.  The <i>value</i>
    must be numeric, and a value must be given, unlike for a variable
    which can be set as a boolean.

    <p>
    There are a number of variables with internal meaning to
    <i>WRspice</i>, and in fact this is the mechanism by which most
    <i>WRspice</i> defaults are specified.  Several of the other
    buttons in the <a href="toolsmenu"><b>Tools</b></a> menu,
    including <a href="cmdopts"><b>Commands</b></a>, <a
    href="dbgopts"><b>Debug</b></a>, <a href="plotopts"><b>Plot
    Opts</b></a>, <a href="shellopts"><b>Shell</b></a>, and <a
    href="simopts"><b>Sim Opts</b></a> bring up panels from which
    these special variables can be modified.

    <p>
    The <a href="variables">predefined variables</a> which have
    meaning to <i>WRspice</i> can be listed with the <a
    href="usrset"><b>usrset</b></a> command.  In general, variables
    set in the <tt>.options</tt> line are available for expansion in
    $<i>varname</i> references, but do not otherwise affect the
    functionality of the shell.
 
!!SEEALSO
variablesub
setandlet
shellcmds

!! commands.tex 011909
!!KEYWORD
shell
!!TITLE
shell command
!!HTML 
    command: <tt>shell</tt> [<i>command</i>]
 
    <p>
    The <b>shell</b> command will pass its arguments to the operating
    system shell.  The command will fork a shell if no <i>command</i>
    is given, or execute the arguments as a command to the operating
    system.
 
!!SEEALSO
shellcmds
unixcom

!! commands.tex 011909
!!KEYWORD
shift
!!TITLE
shift command
!!HTML 
    command: <tt>shift</tt> [<i>varname</i>] [<i>number</i>]

    <p>
    The <b>shift</b> command facilitates handling of list variables in
    shell scripts.  If <i>varname</i> is the name of a list variable,
    it is shifted to the left by <i>number</i> elements, i.e, the
    <i>number</i> leftmost elements are removed.  The default
    <i>varname</i> is <tt>argv</tt>, and the default <i>number</i> is
    1.
 
!!SEEALSO
shellcmds
variables

!! commands.tex 011909
!!KEYWORD
unalias
!!TITLE
unalias command
!!HTML 
    command: <tt>unalias</tt> [<i>word</i> ...]

    <p>
    The <b>unalias</b> command is used to remove aliases previously
    set with the <a href="alias"><b>alias</b></a> command.  The
    command removes any aliases associated with each of the
    <i>word</i>s.  The argument may be "*", in which case all aliases
    are deleted.
 
!!SEEALSO
aliases
shellcmds

!! commands.tex 011909
!!KEYWORD
unset
!!TITLE
unset command
!!HTML 
    command: <tt>unset</tt> [<i>varname</i> ...]

    <p>
    The <b>unset</b> command will remove the definitions of shell
    variables, previously defined with the <a
    href="set"><b>set</b></a> command, passed as arguments.  All of
    the named variables are unset (undefined).  The argument may be
    "*", in which case all variables are unset (although this is
    usually not something that one would want to do).
 
!!SEEALSO
shellcmds
variablesub
variables

!! commands.tex 011909
!!KEYWORD
usrset 
!!TITLE
usrset command
!!HTML
    command: <tt>usrset [-c][-d][-p][-sh][-si]</tt> [<i>keyword</i> ...]

    <p>
    The <b>usrset</b> command prints a (long) list of all of the
    variables used internally by <i>WRspice</i> which can be set with
    the <a href="set"><b>set</b></a> command.  <i>WRspice</i> provides
    a substantial number of internal switches and variables which can
    be configured with the <b>set</b> command.  The <b>usrset</b>
    command prints a listing and brief description of each of the
    variables with internal significance to <i>WRspice</i>.  If no
    arguments are given, all of the variables which control
    <i>WRspice</i> will be printed.  The options print sets of
    keywords associated with certain functions, which are in turn
    associated with a particular panel accessible from the <a
    href="toolbar"><b>Tool Control</b></a> window.

    <p>
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th>Option <th>Toolbar Button <th> Description</tr>
    <tr><td><tt>-c</tt> <td><b>Commands</b>
         <td>Variables which control <i>WRspice</i> commands</tr>
    <tr><td><tt>-d</tt> <td><b>Debug</b>
         <td>Debugging variables</tr>
    <tr><td><tt>-p</tt> <td><b>Plot Opts</b>
         <td>Variables which control plotting</tr>
    <tr><td><tt>-sh</tt> <td><b>Shell</b>
         <td>Variables which control the shell</tr>
    <tr><td><tt>-si</tt> <td><b>Sim Opts</b>
         <td>Simulation control and SPICE options</tr>
    </table>

    <p>
    Other arguments are taken as variable names, which will result in
    a description of that variable being printed.
 
!!SEEALSO
shellcmds

!! ----------------------------------------------------------------------------
!! commands.tex 092611
!!KEYWORD
iocmds
!!TITLE
Input and Output Commands
!!HTML 
    These commands manage input to <i>WRspice</i>, or allow
    <i>WRspice</i> output to be saved in files.

    <p>
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th colspan=2>Input and Output Commands</th></tr>
    <tr><td><a href="codeblock"><b>codeblock</b></a></td>
      <td>Manipulate codeblocks</td></tr>
    <tr><td><a href="dumpnodes"><b>dumpnodes</b></a></td>
      <td>Print node voltages and branch currents</td></tr>
    <tr><td><a href="edit"><b>edit</b></a></td>
      <td>Edit text file</td></tr>
    <tr><td><a href="listing"><b>listing</b></a></td>
      <td>List current circuit</td></tr>
    <tr><td><a href="load"><b>load</b></a></td>
      <td>Read plot data from rawfile</td></tr>
    <tr><td><a href="print"><b>print</b></a></td>
      <td>Print vectors</td></tr>
    <tr><td><a href="return"><b>return</b></a></td>
      <td>Return from script immediately, possibly with a value</td></tr>
    <tr><td><a href="sced"><b>sced</b></a></td>
      <td>Bring up <i>Xic</i> schematic editor</td></tr>
    <tr><td><a href="source"><b>source</b></a></td>
      <td>Read circuit or script input file</td></tr>
    <tr><td><a href="write"><b>write</b></a></td>
      <td>Write data to rawfile</td></tr>
    <tr><td><a href="xeditorcom"><b>xeditor</b></a></td>
      <td>Edit text file</td></tr>
    </table>

!!SEEALSO
commands

!! commands.tex 012109
!!KEYWORD
codeblock
!!TITLE
codeblock command
!!HTML 
    command: <tt>codeblock</tt> [<tt>-options</tt>] [<i>filename</i>]

    <p>
    The <b>codeblock</b> command manipulates codeblocks.  A codeblock
    is a stored executable structure derived from a script file. 
    Being internal representations, codeblocks execute more
    efficiently than script files.  A codeblock generally has the same
    name as the script file from which it was derived.

    <p>
    Option characters, which may be grouped or given as separate tokens,
    following a '-' character, are listed below.
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><td align="left"><tt>p</tt></td>
      <td>print the text of the block (synonym t)</td></tr>
    <tr><td align="left"><tt>d</tt></td>
      <td>delete the block (synonym f)</td></tr>
    <tr><td align="left"><tt>a</tt></td>
      <td>add a block</td></tr>
    <tr><td align="left"><tt>b</tt></td>
      <td>bind a codeblock to the "controls" of the current circuit</td></tr>
    <tr><td align="left"><tt>be</tt></td>
      <td>bind a codeblock to the "execs" of the current circuit</td></tr>
    <tr><td align="left"><tt>c</tt></td>
      <td>list bound codeblocks of the current circuit</td></tr>
    </table><br>

    <p>
    If no <i>filename</i> is given, and neither of the bind options is
    given, all of the blocks in the internal list are listed by name,
    and their commands are printed if <tt>p</tt> is given, and the
    blocks are deleted if <tt>d</tt> is given.  In the latter case,
    the current circuit codeblock references become empty.

    <p>
    If no <i>filename</i> is given and one of the bind options is
    given, the respective bound codeblock reference in the current
    circuit is removed.  Only one of <tt>b</tt> or <tt>be</tt> can
    be given.

    <p>
    In either case, if <tt>c</tt> is given, the bound codeblocks in
    the current circuit are listed, after other operations.  The
    <tt>a</tt> option is ignored if no <i>filename</i> is given.
    
    <p>
    The bound codeblocks for the current circuit are also listed in
    the <a href="listing"><b>listing</b></a> command.

    <p>
    Otherwise, when a name is given, the named file/block is acted on. 
    If no option is given, the add option is assumed.  Added blocks
    overwrite existing blocks of the same name.  The options all apply
    if given, and the operations are performed in the order
    <blockquote>
    <tt>p</tt> (if <tt>a</tt> not given)<br>
    <tt>d</tt><br>
    <tt>a</tt><br>
    <tt>p</tt> (if <tt>a</tt> given)<br>
    <tt>b</tt> or <tt>be</tt><br>
    <tt>c</tt>
    </blockquote>

    <p>
    When a command is entered in response to a prompt or in a script
    (or another codeblock), the blocks are checked first, then the
    <i>WRspice</i> internal commands, then scripts, then vectors (for
    the implicit <a href="let"><b>let</b></a> in <i>vector</i> =
    <i>something</i>) and finally operating system commands if <a
    href="unixcom"><tt>unixcom</tt></a> is set.

    <p>
    Thus, once a codeblock has been added, it can be executed by
    simply entering its name, as if it were a shell command.  If a
    name conflicts with an internal command or script, the codeblock
    has precedence.

    <p>
    A codeblock can be "bound" to the current circuit with the
    <tt>b</tt> and <tt>be</tt> options.  If <tt>be</tt>, the block is
    bound as an "exec" codeblock, and if <tt>b</tt> is given, the
    block is bound as a "control" codeblock.  Each circuit has one of
    each type, which are by default derived from the <a
    href=".exec"><tt>.exec</tt></a> and <a
    href=".control"><tt>.control</tt></a> statements from the circuit
    file.  Binding an external codeblock overrides the blocks obtained
    from the file.  If no <i>filename</i> was given, the existing
    binding is deleted from the current circuit, according to whether
    the <tt>b</tt> or <tt>be</tt> was given.  Separate calls are
    required to unbind both blocks.

    <p>
    <a href="oprng_analysis">Operating range</a> and <a
    href="monte">Monte Carlo</a> analysis can make use of "bound"
    codeblocks.  In both types of analysis, the "controls" codeblock
    execution sets a variable indicating whether the circuit simulated
    properly according to user specified criteria.  When a margin
    analysis file is input, the lines between <tt>.control</tt> and
    <tt>.endc</tt> become the default controls codeblock.  Similarly,
    the lines between <tt>.exec</tt> and <tt>.endc</tt> become the
    default exec codeblock.  A bound codeblock will always supersede
    the default codeblock.

!!SEEALSO
oprngfile
iocmds

!! commands.tex 092611
!!KEYWORD
dumpnodes
!!TITLE
dumpnodes command
!!HTML 
    command: <tt>dumpnodes</tt>

    <p>
    This command prints, on the standard output, a table of the most
    recently computed node voltages (and branch currents) for the
    current circuit.

!!SEEALSO
iocmds

!! commands.tex 093015
!!KEYWORD
edit
!!TITLE
edit command
!!HTML 
    command: <tt>edit</tt> [<i>-n</i>][<i>-r</i>] [<i>filename</i>]

    <p>
    The <b>edit</b> command allows the text of an input file to be
    edited.  The command will bring up a text editor loaded with the
    named file.  If no file name is given, the file associated with
    the current circuit will be edited.  If no file is associated with
    the current circuit, the current circuit will be printed into a
    temporary file which is opened for editing.  If no circuits are
    present, an empty file is opened for editing.  Pressing the
    <b>Text Editor</b> button in the <b>Edit</b> menu of the <a
    href="toolbar"><b>Tool Control</b></a> window is equivalent to
    giving the <b>edit</b> command without arguments.

    <p>
    It should be noted that one can also provide input to
    <i>WRspice</tt> from an arbitrary text editor by "saving" the
    file to the active <a href="fifo">fifo</a> file that
    <i>WRspice</i> creates in the user's home directory.  This is a
    special file the contains a port into <i>WRspice</i>, whereby data
    written to the fifo appear in <i>WRspice</i> as if sourced from a
    regular file (if <i>WRspice</i> is busy, the fifo write will block
    until <i>WRspice</i> is ready).

    <p>
    The editor used is named by the <a
    href="editor"><tt>editor</tt></a> variable, the
    <b>SPICE_EDITOR</b> <a href="environment">environment</a>
    variable, or the <b>EDITOR</b> environment variable, in that
    order.  If none of these is set, or the first one found is set to
    "<tt>xeditor</tt>", the <a href="xeditor">internal editor</a> is
    used, if graphics is available.  If graphics is not available and
    no editor is specified, <i>WRspice</i> will attempt to use the
    "<tt>vi</tt>" editor.  The internal editor has the advantage of
    asynchronous deck sources with the edit window displayed at all
    times, through the <b>Source</b> button in the editor's
    <b>Options</b> menu.  The <a href="xeditorcom"><b>xeditor</b></a>
    command is similar to the <b>edit</b> command, but will always
    call the internal editor.

    <p>
    If an external editor is used, if graphics is available the
    default action is to start the editor in a new <tt>xterm</tt>
    window.  This can be suppressed if the <a
    href="noeditwin"><tt>noeditwin</tt></a> variable is set.  This
    variable should be set if the external editor creates its own
    window to avoid the unneeded <tt>xterm</tt>.  It can also be set
    for an editor such as <tt>vi</tt>, in which case the editing will
    take place in the same window used to interact with
    <i>WRspice</i>.

    <p>
    The <tt>-r</tt> and <tt>-n</tt> options are relevant only when the
    internal editor is <i>not</i> being used, and the editor is a
    text-mode editor such as <tt>vi</tt> and <tt>noeditwin</tt> is set
    so that editing takes place in the console controlling
    <i>WRspice</i>.  If this is the case, after quitting the editor,
    the file will be sourced automatically if the text was saved.  The
    <tt>-n</tt> (no source) option prevents this, and should be given
    if the editor is used to browse files that are not SPICE input
    files.  The <tt>-r</tt> (reuse) option will reuse the existing
    circuit for the automatic source, rather than creating a new one. 
    This saves memory, but prevents revisiting earlier revisions of
    the circuit.  If the internal editor, or any editor that creates
    its own window is used, <i>WRspice</i> will pop up the editor and
    resume command prompting.  There is no automatic source in this
    case.

!!SEEALSO
setcirc
iocmds
fifo

!! commands.tex 022514
!!KEYWORD
listing
!!TITLE
listing command
!!HTML 
    command: <tt>listing</tt> [<tt>l</tt>[<tt>ogical</tt>]]
        [<tt>p</tt>[<tt>hysical</tt>]] [<tt>d</tt>[<tt>eck</tt>]]
        [<tt>e</tt>[<tt>xpand</tt>]] [<tt>n</tt>[<tt>ocontinue</tt>]]

    <p>
    The <b>listing</b> command is used to generate a listing of the
    current circuit.  The command will print a listing of the current
    circuit to the standard output.  The arguments control the format
    of the listing.  A <tt>logical</tt> listing is one in which
    comments are removed and continuation lines are appended to the
    end of the continued line.  A <tt>physical</tt> listing is one in
    which comments and continuation lines are preserved.  A
    <tt>deck</tt> listing is a <tt>physical</tt> listing without line
    numbers, so as to be acceptable to the circuit parser - it
    recreates the input file verbatim.  The last option,
    <tt>expand</tt>, is orthogonal to the previous three - it requests
    that the circuit be printed after subcircuit expansion.  Note that
    only in an expanded listing are error messages associated with
    particular lines visible.  When using <tt>deck</tt> and
    <tt>expand</tt>, by default long lines are broken into
    continuation lines.  If the <tt>nocontinue</tt> option is also
    given, this will not be done.  This option is ignored in other
    cases.

    <p>
    If no argument is given, <tt>logical</tt> is understood.
 
!!SEEALSO
iocmds
source

!! commands.tex 060214
!!KEYWORD
load
!!TITLE
load command
!!HTML 
    command: <tt>load</tt> [<i>filename</i>] [<tt>-p</tt> <i>printfile</i>]
      [<tt>-c</tt><i>N</i>[<tt>+</tt>[<i>M</i>]] <i>datafile</i>] [...]

    <p>
    The <b>load</b> command loads data from the files given.  Several
    file formats are supported, as is discussed below.

    <p>
    The file data will be converted into internal plot structures
    containing vectors available for printing, plotting, and other
    manipulation just as if the analysis had been run.  The last plot
    read becomes the current plot.  Data files can also be loaded from
    the <b>Load</b> button in the <b>Files</b> menu of the <a
    href="toolbar"><b>Tool Control</b></a> window.  A file name given
    without a path prefix is searched for in the <a
    href="sourcepath">source path</a>.
 
    <p>
    The <b>load</b> command is internet aware, i.e., if a given
    filename has an <tt>http://</tt> or <tt>ftp://</tt> prefix, the
    file will be downloaded from the internet and loaded.  The file is
    transferred as a temporary file, so if a permanent local copy is
    desired, the <a href="write"><b>write</b></a> command should be
    used to save a file to disk.

    <p>
    ASCII and binary rawfiles, and Common Simulation Data Format
    (CSDF) files can be listed without options.  These formats are
    auto-detected and the file data will be processed appropriately. 
    The rawfile format is the native format used in <i>WRspice</i> and
    Berkeley SPICE3.  CSDF is one of the formats used by <a
    href="hspicesim">HSPICE</a>, and post-processing tools such as
    Synopsys WaveView.

    <p>
    In HSPICE, "<tt>.options csdf=1</tt>" and "<tt>.options
    post=csdf</tt>" will produce CSDF files.  These files can be
    loaded into <i>WRspice</i> for display and other purposes with the
    <b>load</b> command.

    <p>
    In <i>WRspice</i> rawfiles or CSDF files can be produced by the
    <b>Save Plot</b> button in <a href="plotpanel"><b>plot</b></a> windows,
    the <a href="write"><b>write</b></a> and <a
    href="run"><b>run</b></a> commands, and may be generated in <a
    href="batchmode">batch mode</a>.

    <p>
    If no argument is given, <i>WRspice</i> will attempt to load a
    file with a default name.  The default name is the value of the <a
    href="rawfile"><tt>rawfile</tt></a> variable if set, or the
    argument to the <a href="-r"><tt>-r</tt></a> command line option
    if one was given, or "<tt>rawspice.raw</tt>".

    <p>
    If the option flag <tt>-p</tt> appears before a file name, the
    file that follows is assumed to be a file produced with the
    <i>WRspice</i> <a href="print"><b>print</b></a> command.  This
    works for the default columnar print format only.  The format is
    common to other SPICE programs.  This can be useful on occasion,
    but the print format lacks to expressiveness of the plot data file
    formats.

    <p>
    The <tt>-c</tt> option will allow parsing of general columnar
    numerical data, and is useful for extracting data from output from
    other programs, or report text files.  The option has several forms.

    <dl>
    <dt><tt>-c</tt><i>N</i><dd>
    <i>N</i> is an integer greater than 0, representing the number of
    numerical columns.  A plot with <i>N</i> vectors will be created,
    with names "<tt>column_0</tt>", "<tt>column_1</tt>", etc.  The
    <tt>column_0</tt> vector will be taken as the scale vector.  The
    file is read, amd all lines that start with <i>N</i> space or
    comma-separated numbers will contribute to the vectors.  Any
    additional text on the line following the numbers is ignored. 
    Lines that don't provide <i>N</i> numbers are also ignored.
    </dl>

    <dl>
    <dt><tt>-c</tt><i>N</i><tt>+</tt><dd>
    As above, but lines must provide exactly <i>N</i> numbers or will
    be ignored.  Parsing of a line stops if a token is read that is
    not a number, so that any numbers following a non-number in the
    line will always be ignored.
    </dl>

    <dl>
    <dt><tt>-c</tt><i>N</i><tt>+</tt><i>M</i><dd>
    This assumes that there are <i>N</i> columns of numbers in a
    logical block, followed by a logical block containing <i>M</i>
    columns of numbers.  We assume that there are <i>N</i> + <i>M</i>
    vectors, and the lines have been broken to avoid being too long,
    as is done in the SPICE printing if the number of columns to be
    printed would exceed the page width.  However, it is required that
    <i>M</i> be less than <i>N</i>, and only one "wrap" can be
    accommodated.  If for some reason the <i>M</i> vectors end up
    being a different length than the <i>N</i> vectors, they will be
    truncated or zero-padded so that all vectors will have the same
    length.
    </dl>

    <p>
    When reading columnar or print data, the scale vector is checked
    for cyclicity, and the plot dimensions will be set if found.
    Only two-dimensional vectors are produced, higher dimensions
    can not be determined.

!!SEEALSO
rawfilefmt
iocmds

!! commands.tex 092816
!!KEYWORD
print
!!TITLE
print command
!!HTML 
    command: <tt>print</tt> [/<i>format</i>] [<tt>col | line</tt>]
    <i>expr</i> [...]

    <p>
    The <b>print</b> command is used to print vector data on-screen or
    to a file using output redirection.  The command prints the values
    of the given <a href="explists">expressions</a> to the standard
    output.

    <p>
    The default is to use exponential format for all values, with the
    number of digits given by the <a href="numdgt"><tt>numdgt</tt></a>
    variable.  However this, and some other presentation attributes,
    can be specified in the format string, if given.  If given, the
    format string must be the first argument, and the string must
    start with a '/' (forward slash) character.  The syntax is further
    described below.
    
    <p>
    All vectors listed will be printed in the same format, except for
    the scale vector, which is printed by default in the
    "<tt>col</tt>" mode, and is printed with the default notation.

    <p>
    If <tt>line</tt> is specified, the value of each expression is
    printed on one line (or more if needed).  If all expressions have
    a length of 1, the default style is <tt>line</tt>, otherwise
    <tt>col</tt> is the default.
 
    <p>
    If <tt>col</tt> is specified, the values are printed in columns. 
    This is the default if any of the vectors are multi-valued.  This
    mode makes use of the <a href="height"><tt>height</tt></a> and <a
    href="width"><tt>width</tt></a> variables to define the page size. 
    By default, per-page formatting is applied, with page eject
    characters between pages.  With column formatting, by default the
    scale vector (<tt>time</tt>, <tt>frequency</tt>) will be shown in
    the first column.  If there are more vectors that can be
    accommodated with the page width, the print will be repeated, with
    a new set of columns (other than the scale) until all variables
    have been printed.

    <p>
    If the expression is "<tt>all</tt>", all of the vectors in the
    current plot are printed.  If no arguments are given, the
    arguments to the last given <b>print</b> command are used.  If
    only the format argument is given, the arguments from the last
    given <b>print</b> command other than the format are used, with
    the new format.

    <p>
    If the argument list contains a token consisting of a single
    period ("."), this is replaced with the vector list found in the
    first <a href=".print"><tt>.print</tt></a> line from the input
    file with the same analysis type as the current plot.  For
    example, if the input file contains
    <blockquote><tt>
    .tran .1u 10u<br>
    .print tran v(1) v(2)
    </tt></blockquote>
    then one can type "<tt>run</tt>" followed by "<tt>print .</tt>" to
    print <tt>v(1)</tt> and <tt>v(2)</tt>.

    <p>
    The related syntax <tt>.@</tt><i>N</i> is also recognized, where
    <i>N</i> is an integer representing the <i>N</i>'th matching
    <tt>.print</tt> line.  The count is 1-based, but <i>N</i>=0 is
    equivalent to <i>N</i>=1.  The token is effectively replaced by
    the vector list from the specified <tt>.print</tt> line found in
    the circuit deck.

    <p>
    The print command is responsive to the following variables.

    <dl>
    <dt><a href="width"><tt>width</tt></a>,
      <a href="height"><tt>height</tt></a><dd>
    These option variables set the page size (in characters and lines)
    assumed for the output when directed to a flie or device.  If not
    set, a standard A-size page is assumed.  When printing on-screen,
    the actual screen or window size will be used.
    </dl>

    <dl>
    <dt><a href="nopage"><tt>nopage</tt></a><dd>
    This boolean option will suppress page breaks between pages when
    set.  This is always true when printing to a screen.  Page breaks
    consist of a form-feed character, which may be followed by a
    two-line page header.
    </dl>

    <p>
    The following variables are all booleans, and apply only to column
    mode of the <b>print</b> command.

    <dl>
    <dt><a href="printautowidth"><tt>printautowidth</tt></a><dd>
    When set, the window width or the setting of the <tt>width</tt>
    variable is ignored, and a line width sufficient to include
    columns for all variables being printed is used, if possible. 
    There is a hard limit of 2048 characters in the lines.  Variables
    that don't fit are printed subsequently, as in the case with
    <tt>printautowidth</tt> not set.
    </dl>

    <dl>
    <dt><a href="printnoheader"><tt>printnoheader</tt></a><dd>
    When set, don't print the top header, which consists of the plot
    title, circuit name, data, and a line of "<tt>-</tt>" characters
    (three lines).  This is normally printed at the top of the first
    page of output.
    </dl>

    <dl>
    <dt><a href="printnoindex"><tt>printnoindex</tt></a><dd>
    When set, don't print the vector indices, which are otherwise
    printed in the leftmost column of each page.
    </dl>

    <dl>
    <dt><a href="printnopageheader"><tt>printnopageheader</tt></a><dd>
    When set, don't print the page header.  The page header, which
    consists of the variable names at the top of each column and a
    line of "<tt>-</tt>" characters, is otherwise printed at the top
    of each page of output.
    </dl>

    <dl>
    <dt><a href="printnoscale"><tt>printnoscale</tt></a><dd>
    When set, don't print the scale vector in the leftmost data
    column.  This is otherwise done for each set of variables printed. 
    The Spice3 <tt>noprintscale</tt> variable is an alias, but
    deprecated.
    </dl>

    <p>
    The syntax of the format string to the <b>print</b> command allows
    overriding the states of the switches listed above while printing. 
    The format string, if used, must be the first argument given to
    the <b>print</b> command, and must begin with a '<tt>/</tt>'
    (forward slash) character.  It contains no space, and is a
    sequence of the characters and forms shown below, all of which are
    optional.

    <dl>
    <dt><i>integer</i><dd>
    The <i>integer</i> is the number of figures to the right of the
    decimal point to print.  If not given, the value of the <a
    href="numdgt"><tt>numdgt</tt></a> variable is used if set,
    otherwise a default of 6 is used.

    <dt><tt>f</tt><dd>
    If '<tt>f</tt>' is found in the string, data values will be printed
    using a fixed-point format, rather than the default exponential
    format.
    </dl>

    The remaining options apply/unapply the switches, whose defaults
    are set by the <tt>print...</tt> variables described above.  The
    format string always overrides the variables.

    <dl>
    <dt><tt>-</tt><dd>
    Negate the effect of options that follow.
    <dt><tt>+</tt><dd>
    Don't negate effect of options that follow.  This is redundant
    unless it follows '<tt>-</tt>'.
    <dt><tt>a</tt><dd>
    Take <tt>printautowidth</tt> as if set, or not set if negated.
    <dt><tt>b</tt><dd>
    Take <tt>nopage</tt> as if set, or not set if negated.
    <dt><tt>h</tt><dd>
    Take <tt>printnoheader</tt> as if set, or not set if negated.
    <dt><tt>i</tt><dd>
    Take <tt>printnoindex</tt> as if set, or not set if negated.
    <dt><tt>p</tt><dd>
    Take <tt>printnopageheader</tt> as if set, or not set if negated.
    <dt><tt>s</tt><dd>
    Take <tt>printnoscale</tt> as if set, or not set if negated.
    <dt><tt>n</tt><dd>
    Alias for "<tt>abhips</tt>".
    </dl>

    <p>
    Examples
    <blockquote>
      <tt>print /3f+ahi-ps ...</tt>
    </blockquote>
    Print using a fixed three decimal place format, and as if
    <tt>printautowidth</tt>, <tt>printnoheader</tt>, and
    <tt>printnoindex</tt> were set, and <tt>printnopageheader</tt> and
    <tt>printnoscale</tt> were unset.

    <blockquote>
      <tt>print /n ...</tt>
    </blockquote>
    Print the vectors listed, and nothing but the vectors listed. 
    This is useful when one wants to simply feed a list of numbers to
    another application.

    <blockquote>
      <tt>print /n-s ...</tt>
    </blockquote>
    As above, but print the scale in the first column.  The
    '<tt>-</tt>' can be used as shown to undo individual implicit
    settings from '<tt>n</tt>'.

    <blockquote>
     <tt>print /3f v(5)</tt>
    </blockquote>
    This prints v(5) to three decimal places in fixed-point notation.
    <blockquote>
      <tt>print /4f v(2) v(3) v(4) > myfile</tt>
    </blockquote>
    This prints the vectors to four decimal places in the file "myfile".
    <blockquote>
      <tt>print 2*v(2)+v(3) v(4)-v(1)</tt>
    </blockquote>
    This prints the computed quantities using the default format.

!!SEEALSO
iocmds

!! commands.tex 030519
!!KEYWORD
return
!!TITLE
return command
!!HTML
   command: <tt>return</tt> [<i>expression</i> ...]

   <p>
   This will cause the currently executing script or <a
   href="codeblock">codeblock</a> to terminate immediately and return
   to the caller.  If an expression follows, it will be evaluated and
   the <a href="strcmds">global return value</a> will be set to the
   result.  The global return value is an internal global variable
   that can be set and queried from any script or the command prompt
   as the special variable name <a href="variablesub"><tt>$?</tt></a>.
   The <a href="retval"><b>retval</b></a> command is used to set the
   global return value without immediately returning.

!!SEEALSO
iocmds
retval
source

!! commands.tex 012109
!!KEYWORD
sced
!!TITLE
sced command
!!HTML
   command: <tt>sced</tt> [<i>filename</i> ...]

   <p>
   The <b>sced</b> command brings up the <i>Xic</i> graphical editor
   (if available) in electrical mode.  This allows schematic capture,
   with most of the <i>WRspice</i> functionality directly available
   through the <i>Xic</i> interface.  If the <i>Xic</i> graphical
   editor is not available for execution, this command will exit with
   a message indicating that <i>Xic</i> is not available.  Otherwise,
   the <b>sced</b> command will bring up the schematic capture
   front-end with file <i>filename</i>, which must be an <i>Xic</i>
   input file (<i>not</i> a standard <i>WRspice</i> circuit file!). 
   If the current circuit originated from <i>Xic</i>, that file will
   be loaded into <i>Xic</i> if no <i>filename</i> is given.

   <p>
   When <i>Xic</i> saves a native-mode top-level cell containing a
   schematic, the circuit SPICE listing is appended to the file. 
   <i>WRspice</i> is smart enough to ignore the geometric information
   in these files and read only the circuit listing.

   <p>
   <i>Xic</i> can also be started from the <b>Xic</b> button in the
   <b>Edit</b> menu of the <b>Tool Control</b> window.

!!SEEALSO
xic:info
iocmds

!! commands.tex 051516
!!KEYWORD
source
!!TITLE
source command
!!HTML 
    <table border=0>
    <tr><td valign=top><b>jump to</b></td> <td>
    <a href="source#implicit"><b>Implicit Source</b></a><br>
    <a href="source#input"><b>Input Format Notes</b></a>
    </dt></dr></table>

    <p>
    command: <tt>source</tt> [<tt>-r</tt>][<tt>-n</tt>][<tt>-c</tt>]
    <i>file</i> [<i>files</i> ...]

    <p>
    The <b>source</b> command is used to load circuit files and
    command scripts.

    <p>
    If more than one file name is given, the files will be
    concatenated into a temporary file, which is read.  The command
    will read and process circuit descriptions and command text from
    the file(s).  If <a href=".newjob"><tt>.newjob</tt></a> lines are
    found within the files, the input will be partitioned into two or
    more circuit decks, divided by the <tt>.newjob</tt> lines.  Each
    circuit deck is processed independently and in sequence.

    <p>
    If a file does not have a path prefix, it is searched for in the
    search path specified by the <a
    href="sourcepath"><tt>sourcepath</tt></a> variable.  If not in the
    search path or current directory, a full path name must be given.

    <p>
    The <b>source</b> command is internet aware, i.e., if a given
    filename has an <tt>http://</tt> or <tt>ftp://</tt> prefix, the
    file will be downloaded from the internet and sourced.  The file
    is transferred as a temporary file, so if a permanent local copy
    is desired, the <a href="edit"><b>edit</b></a> or <a
    href="listing"><b>listing</b></a> commands should be used to save
    the circuit description to disk.

    <p>
    When an input file or set of files is "sourced", the following
    steps are performed for each circuit deck found.  The logic is
    rather complex, and the following steps illustrate but perhaps
    oversimplify the process.  In particular, the subcircuit/model <a
    href=".cache">cache</a> substitution is omitted here.

    <ol>
    <li>The input is read into a "deck" in memory.  Line continuation
    is applied.

    <li>In interactive mode, the <a href="titleinc">title line</a>
    from the circuit is printed on-screen, unless the <a
    href="noprtitle"><b>noprtitle</b></a> variable is set, in which
    case this printing is suppressed.  The variable can be set by
    checking the box in the <b>source</b> page of the <a
    href="cmdopts"><b>Command Options</b></a> tool from the <a
    href="toolsmenu"><b>Tools</b></a> menu.

    <li>The deck is scanned for <tt>.param</tt> lines which are
    outside of subcircuit definitions.  These are shell expanded, and
    used to evaluate <tt>.if</tt>, <tt>.elif</tt> and similar lines. 
    Lines that are not in scope are ignored.

    <li>Files referenced from <tt>.include</tt> and <tt>.lib</tt>
    lines are resolved and read.  At each level, parameters are
    scanned again, so that <tt>.if</tt>, etc.  lines do the right
    thing at each level.

    <li>Verilog blocks, <tt>.exec</tt> blocks, and <tt>.control</tt>
    blocks are moved out of the main deck into separate storage.

    <li>The <tt>.exec</tt> lines, if any, are executed by the shell.

    <li>The <tt>.options</tt> lines are extracted, shell expanded, and
    evaluated.  During evaluation, the shell receives the assignment
    definitions.

    <li>The remaining lines in the deck are shell expanded.

    <li>Subcircuit expansion is performed.  This takes care of
    parameter expansion within subcircuit definition blocks. 

    <li>The circuit (if any) is parsed, and added to the internal
    circuits list.

    <li>The <tt>.control</tt> lines, if any, and executed by the shell.
    </ol>

    After a <b>source</b>, the current circuit will be the last
    circuit parsed.

    <p>
    There are three option flags available, which modify the behavior
    outlined above.  These can be grouped or given as individual tokens,
    following a '-' character.  Note that if a file name starts with '-',
    it must be quoted with double-quote marks.  The options are applied
    before files are read.

    <dl>
    <dt><tt>r</tt><dd>
    Reuse the current circuit.  The current circuit is destroyed before
    the new circuit is created, which becomes the current circuit.
    This option is ignored if <tt>-n</tt> is also given.
    </dl>

    <dl>
    <dt><tt>n</tt><dd>
    Ignore any circuit definition lines in input.  Executable lines will
    still be executed, but no new circuit will be produced.
    </dl>

    <dl>
    <dt><tt>c</tt>
    Ignore any <tt>.control</tt> commands.  However, <tt>.exec</tt> lines
    will still be executed.
    </dl>

    <dl>
    <dt><tt>n</tt> and <tt>c</tt><dd>
    If both of the <tt>n</tt> and <tt>c</tt> options are given, all lines
    of input except for the first "title" line are taken to be executable,
    and are executed, as if for a startup file.
    </dl>

    <a name="implicit"></a>
    <h2>Implicit Source</h2>

    In many cases, the "<tt>source</tt>" is optional.  If the name of
    an existing file is given as a command, the <tt>source</tt> is
    applied implicitly, provided that the file name does not clash
    with a <i>WRspice</i> command.

    <a name="input"></a>
    <h2>Input Format Notes</h2>

    <p>
    The first line in the input file (after concatenation of multiple
    input files), and the first line following a <tt>.newjob</tt>
    line, is considered a title line and is not parsed but kept as the
    name of the circuit.  The exceptions to this rule are old format
    margin analysis input files and <i>Xic</i> files.

    <p>
    Command lines must be surrounded by the lines <tt>.exec</tt> or
    <tt>.control</tt> and <tt>.endc</tt> in the file, or prefixed by
    "<tt>*@</tt>" or "<tt>*#</tt>" in order to be recognized as
    commands, except in startup files where all lines but the title
    line are taken as executable.  Commands found in <tt>.exec</tt>
    blocks or <tt>*@</tt> lines are executed before the circuit is
    parsed, thus can set variables used in the circuit.  Commands
    found in <tt>.control</tt> blocks or <tt>*#</tt> lines are
    executed after the circuit is parsed.  so a control line of
    "<tt>ac ...</tt>" will work the same as the corresponding
    <tt>.ac</tt> line, for example.  Use of the "comment" control
    prefixes <tt>*@</tt> and <tt>*#</tt> makes it possible to embed
    commands in <i>WRspice</i> input files that will be ignored by
    earlier versions of SPICE.

    <p>
    Shell variables found in the circuit deck (but not in the commands
    text) are evaluated during the source.  The <a
    href="reset"><b>reset</b></a> command can be used to update these
    variables if they are later changed by the shell after sourcing.

!!SEEALSO
fifo
iocmds

!! commands.tex 022117
!!KEYWORD
write
!!TITLE
write command
!!HTML 
    command: <tt>write</tt> [<i>file</i> [<i>expr</i> ...]]

    <p>
    The <b>write</b> command is used to save simulation data to a
    file.

    <p>
    There are two data formats universally available, the "rawfile"
    format native to <i>WRspice</i> and other simulators based on
    Berkeley SPICE3, and the Common Simulation Data Format (CSDF). 
    The CSDF is one of the formats generated by <a
    href="hspicesim">HSPICE</a>, and is compatible with
    post-processors such as Synopsys WaveView.

    <p>
    In the Red Hat 6 and 7 releases, a third output format is
    available:  the Cadence PSF format.  This support is provided
    through third-party libraries which support only the indicated
    operating systems.  Unlike the other formats, PSF output can not
    be read back into <i>WRspice</i>.  This format is used by the
    waveform viewer component of the Cadence Analog Design Environment
    (ADE) product.

    <p>
    PSF output consists of files created in a specified directory. 
    Presently, output is available only for AC, DC, transient, and
    operating-point analysis.  Only simple analysis is supported, no
    <a href="multidc">chained DC</a> or <a href="sweep">looping</a>.

    <p>
    To specify PSF output, one gives a "filename", for example to the
    <b>write</b> command or the <a
    href="rawfile"><tt>rawfile</tt></a> variable, in the form

    <blockquote>
    <tt>psf</tt>[<tt>@</tt><i>path</i>]
    </blockquote>

    If this is simply "<tt>psf</tt>", output goes to a directory named
    <tt>psf</tt> in the current directory.  Otherwise, the
    <tt>psf</tt> keyword can be followed by a '<tt>@</tt>' character
    and a path to a directory, with no white space around the
    <tt>@</tt>.  Output will go to the indicated directory.  In either
    case, the directory will be created if it doesn't exist, but in
    the second case and parent directories must currently exist, they
    won't be created.

    <p>
    If the file name is given an extension from among those listed
    below, CSDF output will be generated.  Otherwise, rawfile format
    will be used.
    <blockquote>
    <tt>.csdf</tt><br>
    <tt>.tr</tt><i>N</i><br>
    <tt>.ac</tt><i>N</i><br>
    <tt>.sw</tt><i>N</i>
    </blockquote>
    The <i>N</i> is an integer, and <tt>tr</tt>, <tt>ac</tt>, and
    <tt>sw</tt> correspond to transient, ac, and dc sweep results,
    respectively.  This is the same convention as used by HSPICE when
    generating files for post-processing.

    <p>
    If no <i>expr</i> is given, then all vectors in the current plot
    will be written, the same as giving the word "<tt>all</tt>" as an
    <i>expr</i>.  If, in addition, no file name is given, a default
    name will be used.  The default name is the value of the <a
    href="rawfile"><tt>rawfile</tt></a> variable if set, or the
    argument to the <a href="-r"><tt>-r</tt></a> command line option
    if one was given, or "<tt>rawspice.raw</tt>".

    <p>
    The command writes out the <i>exprs</i> to the
    <i>file</i>.  First, vectors are grouped together by plots, and
    written out as such.  For example, if the expression list
    contained three vectors from one plot and two from another, then
    two plots will be written, one with three vectors and one with
    two.  Additionally, if the scale for a vector isn't present, it is
    automatically written out as well.

    <p>
    The default rawfile format is ASCII, but this may be changed with
    the <a href="filetype"><tt>filetype</tt></a> variable or the
    <b>SPICE_ASCIIRAWFILE</b> <a href="environment">environment</a>
    variable.

    <p>
    If the <a href="appendwrite"><tt>appendwrite</tt></a> variable is
    set, the data will be appended to an existing file.

    <p>
    Files that have been appended to, or have multiple plots, are
    concatenations of data for a single plot.  This is expected and
    perfectly legitimate for rawfiles, and for CSDF files used only by
    <i>WRspice</i>, but concatenated CSDF files may not be portable to
    other applications.

!!SEEALSO
load
expressions
iocmds

!! commands.tex 012209
!!KEYWORD
xeditorcom
!!TITLE
xeditor command
!!HTML 
    command: <tt>xeditor</tt> [<i>file</i>]

    <p>
    The <b>xeditor</b> command invokes a <a href="xeditor">text
    editing window</a> for editing circuit and other text files.  It
    is available only when graphics is enabled.  This is similar to
    the <a href="edit"><b>edit</b></a> command, however the internal
    editor is always used.  The <a href="editor"><tt>editor</tt></a>
    variable and the <a href="environment">environment</a> variables
    used by the <b>edit</b> command are ignored by the <b>xeditor</b>
    command.

    <p>
    The <b>xeditor</b> command brings up a general-purpose text editor
    window.  The same pop-up editor is invoked in read-only mode by
    the <b>Notes</b> button of the <b>Help</b> menu in the <a
    href="toolbar"><b>Tool Control</b></a> window for use as a file
    viewer.  In that mode, commands which modify the text are not
    available.

!!SEEALSO
iocmds

!!REDIRECT runop        simcmds#runop

!! ----------------------------------------------------------------------------
!! commands.tex 030119
!!KEYWORD
simcmds
!!TITLE
Simulation Commands
!!HTML 
    The commands described in this section initiate, control, and
    monitor <i>WRspice</i> simulations.  One can monitor the progress
    of a run in two ways, in addition to the percentage complete that
    is printed in the <a href="toolbar"><b>Tool Control</b></a>
    window.  First, the <a href="iplot"><b>iplot</b></a> command
    can be used to plot one or more variables as the simulation is
    progressing.  To plot <tt>v(1)</tt>, for example, one would type,
    before the run is started, "<tt>iplot v(1)</tt>".  During the run,
    <tt>v(1)</tt> will be plotted on screen, with the plot rescaled as
    necessary.  Second, one can print variables.  For example, the <a
    href="trace"><b>trace</b></a> command can be used, by typing
    "<tt>trace time</tt>" before the run starts, to cause the time
    value to be printed at each output point during transient
    analysis.

    <a name="runop"></a>
    <h4>Runops</h4>

    The <b>iplot</b> and <b>trace</b> commands are examples of what
    are called "runops".  Other runops include the <a
    href="stop"><b>stop</b></a> and <a
    href="measure"><b>measure</b></a> commands.  A runop remains in
    effect until deleted with the <a href="delete"><b>delete</b></a>
    command, and the runops in effect can be listed with the <a
    href="status"><b>status</b></a> command.  The runops can also be
    listed, deleted, or made inactive with the <b>Trace</b> tool from
    the <b>Tools</b> menu in the <a href="toolbar"><b>Tool
    Control</b></a> window.  All runops are available as commands,
    which apply to any circuit while in force.  Some runops can be
    specified from within the <i>WRspice</i> input file, in which case
    the runop applies when simulating that file only.  The table below
    lists the runops that are presently available.

    <p>
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th colspan=2>Runops</th?</tr>
    <tr><th>Command</th> <th>Input Keyword</th></tr>
    <tr><td><a href="save"><b>save</b></a></td>
      <td><a href=".save"><tt>.save</tt></a></td></tr>
    <tr><td><a href="trace"><b>trace</b></a></td>
      <td>-</td></tr>
    <tr><td><a href="iplot"><b>iplot</b></a></td>
      <td>-</td></tr>
    <tr><td><a href="measure"><b>measure</b></a></td>
      <td><a href=".measure"><tt>.measure</tt></a></td></tr>
    <tr><td><a href="stop"><b>stop</b></a></td>
      <td><a href=".stop"><tt>.stop</tt></a></td></tr>
    </table>

    <p>
    The run can be paused at any time by typing <b>Ctrl-C</b> in the
    controlling text window.  The run can be resumed with the <a
    href="resume"><b>resume</b></a> command, or reset with the <a
    href="reset"><b>reset</b></a> command.

    <p>
    It is possible to transparently execute simulations on a remote
    machine while in <i>WRspice</i>, if the remote machine has a <a
    href="wrspiced"><tt>wrspiced</tt> daemon</a> running.  It is also
    possible to run simulations asynchronously on the present machine. 
    These jobs are not available for use with the <b>iplot</b>
    command, however.  The <a href="jobs"><b>jobs</b></a> command can
    be used to monitor their status.

    <p>
    Many of these commands operate on the "current circuit" which by
    default is the last circuit entered into <i>WRspice</i> explicitly
    with the <a href="source"><b>source</b></a> command, or implicitly
    by typing the file name.  The <a href="setcirc"><b>setcirc</b></a>
    command can be used to change the current circuit.  The
    <b>Circuits</b> button in the <b>Tools</b> menu also allows
    setting of the current circuit.

    <p>
    When a circuit file is read, any references to shell variables are
    expanded to their definitions.  Shell variables are referenced as
    <tt>$</tt><i>name</i>, where <i>name</i> has been set with the <a
    href="set"><b>set</b></a> command or in the <a
    href=".options"><tt>.options</tt></a> line.  This expansion occurs
    only when the file is sourced, or the <a
    href="reset"><b>reset</b></a> command is given, so that if the
    variable is changed, the circuit must be sourced or reset to make
    the change evident in the circuit.  If a variable is set in the
    shell and also in the <tt>.options</tt> line, the value from the
    shell is used.

    <p>
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th colspan=2>Simulation Commands</th></tr>
    <tr><td><a href="ac"><b>ac</b></a></td>
      <td>Perform ac analysis</td></tr>
    <tr><td><a href="alter"><b>alter</b></a></td>
      <td>Change circuit parameter</td></tr>
    <tr><td><a href="alterf"><b>alterf</b></a></td>
      <td>Dump alter list to Monte Carlo output file</td></tr>
    <tr><td><a href="aspice"><b>aspice</b></a></td>
      <td>Initiate asynchronous run</td></tr>
    <tr><td><a href="cache"><b>cache</b></a></td>
      <td>Manipulate subcircuit/model cache</td></tr>
    <tr><td><a href="check"><b>check</b></a></td>
      <td>Initiate range analysis</td></tr>
    <tr><td><a href="dc"><b>dc</b></a></td>
      <td>Initiate dc analysis</td></tr>
    <tr><td><a href="delete"><b>delete</b></a></td>
      <td>Delete watchpoint</td></tr>
    <tr><td><a href="destroy"><b>destroy</b></a></td>
      <td>Delete plot</td></tr>
    <tr><td><a href="devcnt"><b>devcnt</b></a></td>
      <td>Print device counts</td></tr>
    <tr><td><a href="devload"><b>devload</b></a></td>
      <td>Load device module</td></tr>
    <tr><td><a href="devls"><b>devls</b></a></td>
      <td>List available devices</td></tr>
    <tr><td><a href="devmod"><b>devmod</b></a></td>
      <td>Change device model levels</td></tr>
    <tr><td><a href="disto"><b>disto</b></a></td>
      <td>Initiate distortion analysis</td></tr>
    <tr><td><a href="dump"><b>dump</b></a></td>
      <td>Print circuit matrix</td></tr>
    <tr><td><a href="findrange"><b>findrange</b></a></td>
      <td>find edges of operating range</td></tr>
    <tr><td><a href="free"><b>free</b></a></td>
      <td>Delete circuits and/or plots</td></tr>
    <tr><td><a href="jobs"><b>jobs</b></a></td>
      <td>Check asynchronous jobs</td></tr>
    <tr><td><a href="sweep"><b>loop</b></a></td>
      <td>Alias for sweep command</td></tr>
    <tr><td><a href="mctrial"><b>mctrial</b></a></td>
      <td>Run a Monte Carlo trial</td></tr>
    <tr><td><a href="measure"><b>measure</b></a></td>
      <td>Set up a measurement</td></tr>
    <tr><td><a href="noise"><b>noise</b></a></td>
      <td>Initiate noise analysis</td></tr>
    <tr><td><a href="op"><b>op</b></a></td>
      <td>Compute operating point</td></tr>
    <tr><td><a href="pz"><b>pz</b></a></td>
      <td>Initiate pole-zero analysis</td></tr>
    <tr><td><a href="reset"><b>reset</b></a></td>
      <td>Reset simulator</td></tr>
    <tr><td><a href="resume"><b>resume</b></a></td>
      <td>Resume run in progress</td></tr>
    <tr><td><a href="rhostcom"><b>rhost</b></a></td>
      <td>Identify remote SPICE host</td></tr>
    <tr><td><a href="rspice"><b>rspice</b></a></td>
      <td>Initiate remote SPICE run</td></tr>
    <tr><td><a href="run"><b>run</b></a></td>
      <td>Initiate simulation</td></tr>
    <tr><td><a href="save"><b>save</b></a></td>
      <td>List vectors to save during run</td></tr>
    <tr><td><a href="sens"><b>sens</b></a></td>
      <td>Initiate sensitivity analysis</td></tr>
    <tr><td><a href="setcirc"><b>setcirc</b></a></td>
      <td>Set current circuit</td></tr>
    <tr><td><a href="show"><b>show</b></a></td>
      <td>List parameters</td></tr>
    <tr><td><a href="state"><b>state</b></a></td>
      <td>Print circuit state</td></tr>
    <tr><td><a href="status"><b>status</b></a></td>
      <td>Print trace status</td></tr>
    <tr><td><a href="step"><b>step</b></a></td>
      <td>Advance simulator</td></tr>
    <tr><td><a href="stop"><b>stop</b></a></td>
      <td>Specify stop condition</td></tr>
    <tr><td><a href="sweep"><b>sweep</b></a></td>
      <td>Perform analysis over parameter range</td></tr>
    <tr><td><a href="tf"><b>tf</b></a></td>
      <td>Initiate transfer function analysis</td></tr>
    <tr><td><a href="trace"><b>trace</b></a></td>
      <td>Set trace</td></tr>
    <tr><td><a href="tran"><b>tran</b></a></td>
      <td>Initiate transient analysis</td></tr>
    <tr><td><a href="where"><b>where</b></a></td>
      <td>Print nonconvergence information</td></tr>
    </table>

!!SEEALSO
commands

!! commands.tex 011909
!!KEYWORD
ac
!!TITLE
ac command
!!HTML 
    command: <tt>ac</tt> <i>ac_args</i> [<tt>dc</tt> <i>dc_args</i>]
 
    <p>
    The <b>ac</b> command will initiate an <a href=".ac">ac
    analysis</a> of the current circuit.  The <i>ac_args</i> are the
    same as appear in a <tt>.ac</tt> line.  If a <a href=".dc">dc
    sweep</a> specification follows, the ac analysis is performed at
    each point of the dc analysis.
 
!!SEEALSO
simcmds

!! commands.tex 041711
!!KEYWORD
alter
!!TITLE
alter command
!!HTML 
    command: <tt>alter</tt> [<i>device_list</i> , <i>param</i> [=]
    <i>value</i> [<i>param</i> [=] <i>value</i> ... ]]

    <p>
    The <b>alter</b> command allows circuit parameters to be changed
    for the next simulation run.  The parameters will revert to
    original values on subsequent runs, unless the <b>alter</b>
    command is reissued.

    <p>
    If given without arguments, a list of previously entered
    alterations of the current circuit, to be applied in the next
    analysis run, is printed.  List entries may have come from previously
    given <b>alter</b> commands, or from assignments to the
    <tt>@</tt><i>device</i><tt>[</tt><i>param</i><tt>]</tt>
    special vectors.

    <p>
    The <i>device_list</i> is a list of one or more device or model
    names found in the circuit.  The names are separated by white
    space, and the list is terminated with a comma.  Following the
    comma is one or more name/value pairs, optionally an equal sign
    can appear between the two tokens.  The name is a device or model
    keyword, which should be applicable to all of the names listed in
    the <i>device_list</i>.  Note that this probably means that the
    <i>device_list</i> can contain device names or models, but not
    both.  The device and model keywords can be obtained from the <a
    href="show"><b>show</b></a> command.

    <p>
    The <b>alter</b> command can be issued multiple times, to set
    parameters of devices or models which can't be intermixed
    according to the rule above.

    <p>
    The <i>device_list</i> can contain "globbing" (wild-card)
    characters with similar behavior to globbing (<a
    href="glob">global substitution</a>) in the <i>WRspice</i> <a
    href="spshell">shell</a>.  Briefly, '<tt>?</tt>' matches any
    character, '<tt>*</tt>' matches any set of characters or no
    characters, "<tt>[abc]</tt>" matches the characters '<tt>a</tt>',
    '<tt>b</tt>', and '<tt>c</tt>', and "<tt>a{bc,de}</tt>" matches
    "<tt>abc</tt>" and "<tt>ade</tt>".

    <p>
    When the next simulation run of the current circuit is started,
    the given parameters will be substituted.  Thus, the <b>show</b>
    command, if given before the next run, will not show the altered
    values.  The internal set of altered values will be destroyed
    after the substitutions.

    <p>
    Examples:
    <blockquote>
    <tt>alter R2, resistance=50<br>
    alter c{1,2,3}, capacitance 105p</tt>
    </blockquote>
 
!!SEEALSO
simcmds

!! commands.tex 030219
!!KEYWORD
alterf
!!TITLE
alterf command
!!HTML 
    command: <tt>alterf</tt>

    <p>
    This will dump the <a href="alter">alter list</a> to the output
    file, for use in <a href="monte">Monte Carlo</a> analysis.  In
    this approach, the <b>alter</b> command, or equivalently forms
    like "<tt>let @</tt><i>device</i><tt>[</tt><i>param</i><tt>]</tt>
    = <i>trial_value</i>" are used to set trial values in the
    <tt>exec</tt> block.  Once set, this can be called to dump the
    values into the output file.
 
!!SEEALSO
simcmds

!! commands.tex 011909
!!KEYWORD
aspice
!!TITLE
aspice command
!!HTML 
    command: <tt>aspice</tt> <i>infile</i> [<i>outfile</i>]

    <p>
    The <b>aspice</b> command allows simulation jobs to be run in the
    background on the present machine.  This command will run a
    simulation asynchronously with <i>infile</i> as an input circuit. 
    If <i>outfile</i> is given, the output is saved in this file,
    otherwise a temporary file is used.  After this command is issued,
    the job is started in the background, and one may continue using
    <i>WRspice</i> interactively.  When the job is finished, the
    rawfile is loaded and becomes the current plot, and any output
    generated is printed.  Specifically, <i>WRspice</i> forks off a
    new process with the standard input set to <i>infile</i>, and
    which writes the standard output to <i>outfile</i>.  The forked
    program is expected to create a rawfile with name given by a <a
    href="-r">-r</a> command line option.  The forked command is
    effectively "<i>program</i> <tt>-S -r</tt> <i>rawfile</i> &#60;
    <i>infile</i> > <i>outfile</i>", where <i>program</i> is the <a
    href="spicepath"><tt>spicepath</tt></a> variable (which defaults
    to calling <i>WRspice</i>), <i>rawfile</i> is a temporary file
    name, and <i>outfile</i> is the file given, or a temporary file
    name.  Although the <tt>aspice</tt> command is designed for use
    with <i>WRspice</i>, it may be used with other simulators capable
    of emulating the <i>WRspice</i> server mode protocol.  One may
    specify the pathname of the program to be run with the
    <tt>spicepath</tt> variable, or by setting an <a
    href="environment">environment</a> variable.
 
!!SEEALSO
jobs
rspice
simcmds

!! commands.tex 011909
!!KEYWORD
cache
!!TITLE
cache command
!!HTML 
    command: <tt>cache</tt> [<i>keyword</i>] [<i>tagname</i> ...]

    <p>
    This function provides a control interface to the subcircuit/model
    cache.  The subcircuit/model cache contains representations of
    blocks of input lines that were enclosed in <a
    href=".cache"><tt>.cache</tt></a> and <tt>.endcache</tt> lines. 
    These representations are used instead of the actual lines of
    input, reducing setup time.

    <p>
    The command can have the following forms, the first argument is a
    keyword (or letter).  additional arguments are tag names (the
    names that follow "<tt>.cache</tt>" in SPICE input).

    <dl>
    <dt><tt>cache h</tt>[<tt>elp</tt>]<dd>
    Print command usage information.
    </dl><dl>
    <dt><tt>cache l</tt>[<tt>ist</tt>]<dd>
    Print a list of the tag names currently in the cache.  The
    <b>cache</b> command with no arguments does the same thing.
    </dl><dl>
    <dt><tt>cache d</tt>[<tt>ump</tt>] [<i>tagname</i> ...]<dd>
    This will dump the lines saved in the cache, for each
    <i>tagname</i> given, or for all names if no <i>tagname</i> is
    given.  Presently, <tt>.param</tt> lines are listed as comments;
    the actual parameters are in an internal representation and not
    explicitly listed.
    </dl><dl>
    <dt><tt>cache r</tt>[<tt>emove</tt>] <i>tagname</i>
    [<i>tagname</i> ...]<dd>
    This will remove the cached data associated with each
    <i>tagname</i> given.  The given names will no longer be in the
    cache.
    </dl><dl>
    <dt><tt>cache c</tt>[<tt>lear</tt>]<dd>
    This will clear all data from the cache.
    </dl>
 
!!SEEALSO
simcmds

!! commands.tex 030419
!!KEYWORD
check
!!TITLE
check command
!!HTML 
    command: <tt>check</tt> [<tt>-a</tt>] [<tt>-b</tt>] [<tt>-c</tt>]
        [<tt>-m</tt>] [<tt>-r</tt>] [<tt>-f</tt>] [<tt>-s</tt>]
        [<tt>-k</tt>] [<tt>-h</tt>] [<tt>-v</tt>]
        [[<i>pstr1</i>] <i>val1</i> <i>del1</i> <i>stp1</i>]
        [[<i>pstr2</i>] <i>val2</i> <i>del2</i> <i>stp2</i>]
        [<i>analysis</i>]

    <p>
    The <b>check</b> command is used to initiate <a
    href="marganal">margin analysis</a>.  Margin analysis can consist
    of either a swept <a href="oprng_analysis">operating range</a>
    analysis, or a <a href="monte">Monte Carlo</a> analysis.  The
    current circuit is evaluated, and must have an associated block of
    control statements which contain the pass/fail script.  A second
    associated block of executable statements contains initialization
    commands.  These blocks can be provided in the circuit file, or be
    previously defined <a href="codeblock">codeblocks</a> bound to the
    circuit.  Setting up the file in one of the recommended formats
    will ensure that these blocks are created and bound transparently,
    however it is possible to do this by hand.

    <p>
    The option characters can be grouped following a single '-', or
    entered separately.

    <dl>
    <dt><tt>-a</tt><dd>
    If the <tt>-a</tt> flag is given, operating range analysis is
    performed at every point (all points mode).  Otherwise, the
    analysis attempts to limit computation by identifying the contour
    containing the points of operation.  This algorithm can be
    confused by operating ranges with strange shapes, or which possess
    islands of fail points.  If the input file contained a
    <tt>.checkall</tt> line, the <tt>-a</tt> option is redundant, all
    points will be checked in this case.
    </dl>

    <dl>
    <dt><tt>-b</tt><dd>
    If this is given, the analysis will be paused after setup and the
    <b>check</b> command will return.  This is the start for <a
    href="atomic">atomic Monte Carlo</a>; a script can call the <a
    href="mctrial"><b>mctrial</b></a> command numerous times at this
    point, then "<tt>check -c</tt>" to clean up and end the analysis.
    </dl>

    <dl>
    <dt><tt>-c</tt><dd>
    The <tt>-c</tt> (clear) option will clear any margin analysis in
    progress if the analysis has been paused, for example by pressing
    <b>Ctrl-C</b>, or if in an <a href="atomic">atomic Monte Carlo</a>
    script.  Return is immediate whether or not there is a present
    analysis to clear.  Unlike in release 4.3.8 and earlier, no new
    analysis is started, and other options are ignored.

    <p>
    A paused margin analysis is resumed if the <b>check</b> command is
    given which does not have the <tt>-c</tt> option set, and any
    arguments given in this case are ignored.  The <a
    href="resume"><b>resume</b></a> command will also restart a paused
    margin analysis.
    </dl>

    <dl>
    <dt><tt>-m</tt><dd>
    If the <tt>-m</tt> option is given, Monte Carlo analysis is
    performed, rather than operating range analysis.  This is the
    default if a <tt>.monte</tt> line appeared in the file; the
    <tt>-m</tt> option is only required if there is no <tt>.monte</tt>
    line.  The <tt>-a</tt> option is ignored if <tt>-m</tt> is given,
    as is <tt>.checkall</tt>.  Monte Carlo analysis files differ from
    operating range files only in the header (or header codeblock). 
    During Monte Carlo analysis, the header block is executed before
    every simulation so that variables can be updated.  In operating
    range analysis variables are initialized by the header block only
    once, at the start of analysis.
    </dl>

    <dl>
    <dt><tt>-r</tt><dd>
    If the <tt>-r</tt> option is given, remote servers will be
    assigned simulation runs, allowing parallelism to increase
    analysis speed.  The remote servers must have been specified
    through the <a href="rhostcom">rhost</a> command, and each must
    have a <a href="wrspiced"><tt>wrspiced</tt></a> server running. 
    </dl>

    <p>
    Ordinarily, during operating range and Monte Carlo analysis, only
    the current data point is retained.  The amount of data retained
    can be altered with the <tt>-f</tt>, <tt>-s</tt>, and <tt>-k</tt>
    options.  However, if a <a href=".measure"><tt>.measure</tt></a>
    line appears in the circuit deck, or an <a
    href="iplot"><b>iplot</b></a> runop is active, data will be
    retained internally so that the <tt>.measure</tt> or <b>iplot</b>
    is operational.
 
    <dl>
    <dt><tt>-f</tt><dd>
    The <tt>-f</tt> option will cause the data for the current trial
    to be retained.  This is implied if any <tt>.measure</tt> lines
    are present, or if an <b>iplot</b> is active.  The data are
    overwritten for each new trial.  The data for the last trial are
    available after the analysis is complete, or can be accessed for
    intermediate trials if the analysis is paused.
    </dl>

    <dl>
    <dt><tt>-s</tt><dd>
    The <tt>-s</tt> option also causes retention of the data for the
    current trial, but in addition will dump the data to a family of
    rawfiles, similar to the <tt>segment</tt> keyword of the <a
    href=".tran"><tt>.tran</tt></a> line (though this works with other
    than transient analysis).  The default file name is the name of
    the range analysis output file, suffixed with
    <tt>.s</tt><i>NN</i>, where <i>NN</i> is 00, 01, etc.  Each trial
    generates a new suffix in sequence.
    </dl>
 
    <dl>
    <dt><tt>-k</tt><dd>
    With the -k option, all data are retained, in a multi-dimensional
    plot.  Note that this can be huge, so use of the <a
    href="maxdata"><tt>maxdata</tt></a> variable and <a
    href=".save"><tt>.save</tt></a> lines may be necessary.  One can
    see the variations by plotting some or all of the dimensions of
    the output.  Recall forms like <tt>v(1)[<i>N</i>]</tt> refer to
    the <i>N</i>+1'th trial, and <tt>v(1)[<i>N,M</i>]</tt> includes
    the data for the <i>N</i>+1'th to the <i>M</i>+1'th trials.  The
    <a href="mplot"><b>mplot</b></a> command has a facility for
    displaying trial data in a simplified manner.
    </dl>
 
    <dl>
    <dt><tt>-h</t><dd>
    Finally, the -h (help) option will print a brief summary of the
    available options to the <b>check</b> command.
    </dl>

    <dl>
    <dt><tt>-v</tt><dd>
    If <tt>-v</tt> (verbose) is given, results and
    other messages are printed on-screen as the analysis is performed,
    otherwise the analysis is silent except for any printing
    statements executed in the associated command scripts.  The <a
    href="mplot"><b>mplot</b></a> command can be used to follow
    progress graphically.
    </dl>

    <p>
    If an <b>iplot</b> is active, <t>-f</tt> (current trial data
    retention) is implied.  The data will be plotted for each trial in
    the same iplot, erasing after each trial is complete.  If
    <tt>-k</tt> is given, all data will be plotted, without erasure. 
    Note that an iplot doubles internal memory requirements.

    <p>
    The command line may include one or two range specifications.  In
    operating range analysis, each specification consists of an
    optional parameter specification string, followed by three
    numbers.  These numbers will augment or override the
    <tt>checkVAL1</tt>, <tt>checkDEL1</tt>, <tt>checkSTP1</tt>,
    <tt>checkVAL2</tt>, <tt>checkDEL2</tt>, and <tt>checkSTP2</tt>
    vectors that may be in effect.  The numbers are parsed in the
    order shown, and all are actually optional.  A non-numeric token
    will terminate a block, and missing values must be set from the
    vectors.

    <p>
    In Monte Carlo analysis, each block can contain only a single
    number, which will override the <tt>checkSTP1</tt> and
    <tt>checkSTP2</tt> values (if any), in that order.  These values
    are used to define how many Monte Carlo trials to perform.

    <p>
    The optional <i>pstr1</i> and <i>pstr2</i> strings take the same
    format and significance as in the <a href="sweep"><b>sweep</b></a>
    command.  See the description of that command for a description of
    the format.  If a parameter specifier is given, the specified
    device parameters will be altered directly, and the variables and
    vectors normally used to pass values will <b>not</b> be set.  This
    applies only to operating range analysis, and the explicit
    parameter strings can only be applied from the <b>check</b>
    command line and not from the file.  If the analysis is two
    dimensional, then both dimensions must have a parameter
    specification, or neither dimension can have a parameter
    specification; the two mechanisms can not be mixed.

    <p>
    The <i>analysis</i> to be performed is given, otherwise it is
    found in the circuit deck.  In interactive mode, if no analysis is
    specified, the user will be prompted for an analysis string.

    <p>
    During operating range analysis, a file is usually created and
    placed in the current directory for output.  This file is named
    with the base name of the input file, with an extension
    <tt>.d</tt><i>NN</i>, where <i>NN</i> is replaced with
    <tt>00</tt>, <tt>01</tt>, etc.  -- the first case where the
    filename is unique.  If for some reason the input file name is
    unknown, the basename "<tt>check</tt>" will be used.  Similarly,
    in Monte Carlo analysis, a file named
    <i>basename</i>.<tt>m</tt><i>NN</i> is generated.  In either case,
    the shell variable <a href="mplot_cur"><tt>mplot_cur</tt></a> is
    set to the current output file name.  These files can be plotted
    on-screen with the "<tt>mplot</tt> [<i>filename</i>]" command.

    <p>
    The results from operating range/Monte Carlo analysis are hidden
    away in the resulting plot structure.  The plot can be displayed
    by entering "<tt>mplot</tt> <i>vec</i>" where <i>vec</i> is any
    vector in the plot.

    <p>
    When a <tt>.measure</tt> is included in an iterative analysis,
    data are saved as follows.  Before each iteration, the previous
    result vector and its scale are saved to the end of a "history"
    vector and scale, and are then deleted.  The result vector and
    scale are recreated when the measurement is completed during the
    iteration.  Thus, at the end of the analysis, for a measurement
    named "example", one would have the following vectors:

    <p>
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><td><tt>example</tt>
         <td>the result from the final trial</tr>
    <tr><td><tt>example_scale</tt>
         <td>the measurement interval or point in the last trial</tr>
    <tr><td><tt>example_hist</tt>
         <td>results from the prior trials</tr>
    <tr><td><tt>example_hist_scale</tt>
         <td>intervals from the prior trials</tr>
    </table>

    <p>
    Thus, during each trial, the result vector will have the same
    properties as in a standard run.  It can be used in the
    <tt>.control</tt> block of a Monte Carlo or operating range file
    (recall that <tt>$?</tt><i>vector</i> can be used to query
    existence, and that if there is no <tt>checkPNTS</tt> vector
    defined, the <tt>.control</tt> block is called once at the end of
    each trial).

    <p>
    In the current circuit, the parameters to be varied are usually
    included as shell variables <tt>$value1</tt> and <tt>$value2</tt>. 
    These are special hard-coded shell variables which contain the
    parameter values during simulation.  Before the file is sourced
    (recall that variable substitution occurs during the read-in),
    these variables can be set with the <a href="set"><b>set</b></a>
    command, and the file simulated just as any other circuit. 
    Initially, the variables <tt>$value1</tt> and <tt>$value2</tt> are
    set to zero.  The <tt>value1</tt> and <tt>value2</tt> names can be
    changed to other names, and other mechanisms can be used to supply
    trial values, as described in the <a
    href="oprng_analysis">operating range</a> topic.

    <p>
    Briefly, operating range analysis works as follows.  The analysis
    range and other parameters are specified by setting certain
    vectors in the header script, or by hand.  The range is evaluated
    by rows (varying <tt>value1</tt>) for each column
    (<tt>value2</tt>) point.  Columns are then reevaluated if the
    terminating pass point was not previously found.  For a row,
    starting at the left, points are evaluated until a pass point is
    found.  The algorithm skips to the right, and evaluates toward the
    left until a pass point is found.  This minimizes simulation time,
    however strange operating ranges, such as those that are reentrant
    or have islands, will not be reproduced correctly.  The only
    fool-proof method is to evaluate every point, which will occur if
    the <tt>-a</tt> option is given, or the <tt>.checkall</tt> line
    was given in the input file.

    <p>
    The range of evaluation is set with <i>center</i>, <i>step</i>,
    and <i>number</i> variables.  The <i>number</i> is the number of
    steps to take above and below the <i>center</i>.  Thus, if
    <i>number</i> is 1, the range is over the three points <i>center -
    step</i>, <i>center</i>, and <i>center + step</i>.  One can set
    ranges for <tt>value1</tt> and <tt>value2</tt>, or alternatively
    one can set <tt>value2</tt>, and the algorithm can determine the
    operating range for <tt>value1</tt> at each <tt>value2</tt> point. 
    These values represent the parameter variation range in operating
    range analysis, but serve only to determine the number of trials
    in Monte Carlo analysis.

    <p>
    There are a number of vectors with defined names which control
    operating range and Monte Carlo analysis.  In addition, there are
    relevant shell variables.  The <b>check</b> command creates a plot
    structure, which contains all of the special control vectors, plus
    vectors for each circuit node and branch.  This plot becomes the
    current plot after the analysis starts.  The special vectors which
    have relevance to the operating range analysis are listed below.

    <dl>
    <dt><tt>checkPNTS</tt> (real, length >= 1)<dd>
      These are the points of the scale variable (e.g., time in
      transient analysis) at which the pass/fail test is applied.  If
      a fail is encountered, the simulation is stopped and the next
      trial started.  This vector is usually specified as an array,
      with the <a href="compose"><b>compose</b></a> command, and is
      used in operating range and Monte Carlo analysis.  If not
      specified, the evaluation is performed after the trial
      completes.
    </dl>

    <dl>
    <dt><tt>checkVAL1</tt> (real, length 1)<dd>
      This is the initial central value of the first parameter to be
      varied during operating range analysis.  It is not used in Monte
      Carlo analysis.
    </dl>

    <dl>
    <dt><tt>checkDEL1</tt> (real, length 1)<dd>
      The first central value will be incremented or decremented by
      this value between trials in operating range analysis.  It is
      not used in Monte carlo analysis.
    </dl>

    <dl>
    <dt><tt>checkSTP1</tt> (integer, length 1)<dd>
      This is the number of trials above and below the central value. 
      In Monte Carlo analysis, it partially specifies the number of
      simulation runs to perform, and specifies one coordinate of the
      visual array used to monitor progress (with the <a
      href="mplot"><b>mplot</b></a> command).  In operating range
      analysis, the default is zero.  In Monte Carlo analysis, the
      default is 3.
    </dl>

    <dl><dt><tt>
    checkVAL2
    checkDEL2
    checkSTP2</tt><dd>
      These are as above, but relate to the second parameter to be
      varied in the circuit in operating range analysis.  In Monte
      Carlo analysis, only <tt>checkSTP2</tt> is used, in a manner
      analogous to <tt>checkSTP1</tt>.  The total number of
      simulations in Monte Carlo analysis is (2*<tt>checkSTP1</tt> +
      1)*(2*<tt>checkSTP2</tt> + 1), the same as would be checked in
      operating range analysis.
    </dl>

    <dl>
    <dt><tt>checkFAIL</tt>  (integer, length 1, value 0 or 1)<dd>
      This is the global pass/fail flag, which is set after each
      trial, 1 indicates failure.  This variable is used in both
      operating range and Monte Carlo analysis.
    </dl>

    <dl>
    <dt><tt>checkINIT</tt>  (integer, length 1, value 0 or 1)<dd>
      This is set to 1 by <i>WRspice</i> before the initial execution
      of the header block, before operating range or the first Monte
      Carlo trial.  It is set to 0 otherwise.  Thus one can identify
      the first trial in Monte Carlo analysis from within the header
      script.
    </dl>

    <dl>
    <dt><tt>opmin1, opmax1, opmin2, opmax2</tt> (real, length >= 1)<dd>
      The operating range analysis can be directed to find the
      operating range extrema of the one parameter for each value of
      the other parameter.  These vectors contain the values found.
      They are not used in Monte Carlo analysis.
    </dl>

    <dl>
    <dt><tt>value</tt> (real, length variable)<dd>
      This vector can be used to pass trial values to the circuit,
      otherwise shell variables are used.  This pertains to operating
      range and Monte Carlo analysis.
    </dl>

    <dl>
    <dt><tt>checkN1, checkN2</tt> (integer, length 1)<dd>
      These are the indices into the value array of the two parameters
      being varied in operating range analysis.  The other entries are
      fixed.  These vectors are not used if shell variables pass the
      trial values to the circuit, and are not used in Monte Carlo
      analysis.
    </dl>

    <p>
    The shell variables are:

    <dl><dt><tt>
    checkiterate</tt> (0-10)<dd>
      This is the binary search depth used in finding operating range
      extrema.  This is not used in Monte Carlo analysis.
    </dl>

    <dl><dt><tt>
    value1, value2</tt><dd>
      These variables are set to the current trial values to be used
      in the circuit (parameters 1 and 2).  The <i>WRspice</i> deck
      should reference these variables (as <tt>$value1</tt> and
      <tt>$value2</tt>) as the parameters to vary.  Alternatively, the
      <tt>value</tt> array can be used for this purpose.  These
      variables can be used in Monte Carlo analysis.  Additionally,
      these variables, and a variable named "<tt>value</tt>" can be
      set to a string.  When done, the variable or vector named by the
      string will take on the functionality of the assigned-to
      variable.  For example, if <tt>set value1 = L1</tt> is given,
      the variable <tt>L1</tt> is used to pass trial parameter 1
      values to the circuit (references are <tt>$L1</tt>).
    </dl>

    <p>
    The <tt>checkVAL1</tt>, <tt>checkDEL1</tt>, etc.  vectors used
    must be defined and properly initialized, either in the deck or
    directly from the shell.

    <p>
    The shell variables <tt>value1</tt> and <tt>value2</tt> are set to
    the current variable 1 and variable 2 values.  In addition, vector
    variables can be set.  This is needed for scripts such as
    optimization where the parameter to be varied is required to be
    under program control.  If a vector named <tt>value</tt> exists,
    as does a vector named <tt>checkN1</tt>, then the vector entry
    <tt>value</tt>[<i>checkN1</i>] is set to <tt>$value1</tt> if
    <tt>checkN1</tt> is in the range of <tt>value</tt>.  Similarly, if
    a vector <tt>checkN2</tt> exists, then the vector entry
    <tt>value</tt>[<i>checkN2</i>] is set to <tt>$value2</tt> if
    <tt>checkN2</tt> is in the range of <tt>value</tt>.  Thus, instead
    of invoking <tt>$value1</tt> and <tt>$value2</tt> in the
    <i>WRspice</i> text, one can instead invoke
    <tt>$&value[$&checkN1]</tt>, <tt>$&value[$&checkN2]</tt>, where we
    have previously defined the vectors <tt>value</tt>,
    <tt>checkN1</tt>, <tt>checkN2</tt>.  The file could have a number
    of parameters set to <tt>$&value[0]</tt>, <tt>$&value[1]</tt>, ... 
    .  If <tt>checkN1</tt> is set to 2, for example,
    <tt>$&value[2]</tt> would be varied, and the other values would be
    fixed at predefined entries.  The name "value" can be redefined by
    setting a shell variable named "value" to the name of another
    vector.

    <p>
    If any of the shell variables <tt>value1</tt>, <tt>value2</tt>, or
    a <i>shell</i> variable <tt>value</tt> are set to a string, then
    the shell variable or vector named in the string will have the
    same function as the assigned-to variable.  For example, if in the
    header one has "<tt>set value1 = L1</tt>", then the variable
    reference <tt>$L1</tt> would be used in the file to introduce
    variations, rather than <tt>$value1</tt>.  Similarly, if we have
    issued "<tt>set value = myvec</tt>", the vector <tt>myvec</tt> would
    contain values to vary (using the pointer vectors <tt>checkN1</tt>
    and <tt>checkN2</tt>), and a reference would have the form
    <tt>$&myvec[$&checkN1]</tt>.  Note that the alternate variables
    are not automatically defined before the circuit is parsed, so
    that they should be set to some value in the header.  The default
    <tt>$value1</tt> and <tt>$value2</tt> are predefined to zero.

    <p>
    In Monte Carlo analysis, the header block is executed before each
    simulation.  In the header block, shell variables and vectors may
    be set for each new trial.  These variables and vectors can be
    used in the SPICE text to modify circuit parameters.  The names of
    the variables used, and whether to use vectors or variables, is up
    to the user (shell variables are a little more efficient).  Monte
    Carlo analysis does not use predefined names for parameter data. 
    Typically, the <a href="gauss"<tt>gauss</tt></a> function is
    used to specify a random value for the variables in the header
    block.

    <p>
    One can keep track of the progress of the analysis in two ways. 
    <i>WRpice</i> will print the analysis point on the screen, plus
    indicate whether the circuit failed or passed at the point, if the
    <tt>-v</tt> option is given to the <b>check</b> command.  The <a
    href="echo"><b>echo</b></a> command can be used in the codeblock
    to provide more information on screen, which is printed whether or
    not the <tt>-v</tt> option was given.  The second method uses the
    <b>mplot</b> command, which graphically records the pass/fail
    points.  In this mode, the relevant arguments to <b>mplot</b> are
    as follows.
    <dl>
    <dt><tt>mplot -on</tt><dd>
    This will cause subsequent operating range analysis results to be
    plotted while the analysis is running.
    </dl>
    <dl>
    <dt><tt>mplot -off</tt><dd>
    This will return to the default (no graphical output while
    simulating).
    </dl>

    <p>
    The analysis can search for the actual edge of the operating
    region for each row and column.  These data are stored in vectors
    named <tt>opmin1</tt>, <tt>opmax1</tt>, <tt>opmin2</tt>, and
    <tt>opmax2</tt> with length equal to the number of points of the
    fixed variable.  For example, <tt>opmin1[0]</tt> will contain the
    minimum parameter 1 value when parameter 2 is equal to
    <i>central2</i> - <i>delta2</i>*<i>steps2</i>, and
    <tt>opmin1[2*</tt><i>steps2</i><tt>]</tt> will contain the minimum
    parameter 1 value when parameter 2 is <i>central2</i> +
    <i>delta2</i>*<i>steps2</i>.

    <p>
    The binary search depth is controlled by a shell variable
    <tt>checkiterate</tt>, with possible values of 0-10.  If set to
    1-10, the search is performed (setting to 0 skips the range
    finding).  Higher values provide more accuracy but take more time. 
    If the search is performed, a vector called <tt>range</tt> and its
    scale <tt>r_scale</tt> are also produced.  These contain the Y and
    X coordinates of the operating range contour, which can be plotted
    with the command "<tt>plot range</tt>".

    <p>
    A typical approach is to first unset <tt>checkiterate</tt>,
    <tt>checkSTP1</tt>, and <tt>checkSTP2</tt>.  The <b>check</b>
    command is used to run a single-point analysis, while changing the
    values of <tt>value1</tt> and <tt>value2</tt> until a pass point
    is found.  After the pass point is found, <tt>checkiterate</tt>
    can be set to a positive value, which will yield the ranges for
    the two variables.  Then, the <tt>checkSTP1</tt> and other
    variables can be set to cover this range with desired granularity,
    and the analysis performed again.

    <p>
    When only one point is checked (<tt>checkSTP1 = checkSTP2 =
    0</tt>), no output file is generated.  If <tt>checkiterate</tt> is
    nonzero and the <tt>-a</tt> option is given, and a vector is used
    to supply trial values, the range of each entry in the vector is
    determined, and stored in the <tt>opmin1</tt> and <tt>opmax1</tt>
    vectors.  A mask vector can be defined, with the same length as
    the value vector and same name with the suffix "_mask".  Value
    entries corresponding to nonzero entries of this vector do not
    have the range computed.  If the <tt>-a</tt> flag is not given,
    the range is found in the usual way.  The central value must pass,
    or the range will not be computed.

!!SEEALSO
oprngfile
codeblock
rhostcom
simcmds

!! commands.tex 011909
!!KEYWORD
dc
!!TITLE
dc command
!!HTML 
    command: <tt>dc</tt> <i>dc_args</i>
 
    <p>
    The <b>dc</b> command performs a swept <a href=".dc">dc
    analysis</a> of the current circuit.  The <i>dc_args</i> are the
    same as used in the <tt>.dc</tt> line.
 
!!SEEALSO
multidc
simcmds

!! commands.tex 022519
!!KEYWORD
delete
!!TITLE
delete command
!!HTML 
    command: <tt>delete</tt> [[<tt>in</tt>]<tt>active</tt>]
    [<tt>all | save | trace | iplot | measure | stop | </tt><i>number</i>] ...]
 
    <p>
    The <b>delete</b> command is used to remove "runops" (traces or
    breakpoints) from the runop list.  With no arguments, a list of
    existing runops is printed, and the user is prompted for one to
    delete.  The <a href="status"><b>status</b></a> command also
    prints a list of runops.  Runops can also be controlled with the
    panel brought up with the <b>Trace</b> button in the <b>Tools</b>
    menu.

    <p>
    If the <tt>inactive</tt>/<tt>active</tt> keyword is given,
    breakpoints listed to the right but before another (in)active
    keyword are deleted only if they are inactive/active.  Otherwise,
    they are deleted unconditionally.  If one of <tt>stop</tt>,
    <tt>measure</tt>, <tt>trace</tt>, <tt>iplot</tt>, or <tt>save</tt>
    is given, runops of that type only are deleted.  These keywords
    can appear in combination.

    <p>
    Each runop is assigned a unique number, which is available through
    the <b>status</b> command.  This number can also be entered on the
    command line causing that runop to be deleted (if the activity
    matches the <tt>inactive</tt> keyword, if given).  A range of
    numbers can be given, for example "2-6".  There must be no white
    space in the range token.

    <p>
    Examples:
    <blockquote>
      Delete all traces and iplots:<br>
      <tt>delete trace iplot</tt><br>
      <br>
      Delete all inactive runops:<br>
      <tt>delete inactive all</tt><br>
      <br>
      Delete all traces and inactive iplots:<br>
      <tt>delete traces inactive iplots</tt><br>
    </blockquote>
 
!!SEEALSO
stop
iplot
step
simcmds

!! commands.tex 062515
!!KEYWORD
destroy
!!TITLE
destroy command
!!HTML
    command: <tt>destroy</tt> [<tt>all</tt>] | [<i>plotname ...</i>]

    <p>
    The <b>destroy</b> command will delete plot structures.  Giving
    this command will throw away the data in the named plots and
    reclaim the storage space.  This can be necessary if a lot of
    large simulations are being done.  <i>WRspice</i> should warn the
    user if the size of the program is approaching the maximum
    allowable size (within about 90%), but it is advisable to run the
    <a href="rusage"><b>rusage</b></a> <tt>space</tt> command
    occasionally if running out of space is a possibility.  If the
    argument to <b>destroy</b> is <tt>all</tt>, all plots except the
    constants plot will be thrown away.  It is not possible to destroy
    the constants plot.  If no argument is given the current plot is
    destroyed.
 
!!SEEALSO
setplot
free
simcmds

!! commands.tex 080215
!!KEYWORD
devcnt
!!TITLE
devcnt command
!!HTML
    command: <tt>devcnt</tt> [<i>model_name</i> ...]

    <p>
    This command will print a table of instantiation counts of the
    different device types found in the current circuit.  These are
    the number of device structures used in the internal
    representation of the circuit, after subcircuit expansion.

    <p>
    If no arguments appear, all devices found will be included. 
    Otherwise, arguments are taken as model names (the leftmost
    element printed in the output), which may include use of
    "globbing" characters '<tt>*</tt>' and '<tt>?</tt>' and friends. 
    Briefly, '<tt>?</tt>' matches any character, '<tt>*</tt>' matches
    any set of characters or no characters, "<tt>[abc]</tt>" matches
    the characters '<tt>a</tt>', '<tt>b</tt>', and '<tt>c</tt>', and
    "<tt>a{bc,de}</tt>" matches "<tt>abc</tt>" and "<tt>ade</tt>". 
    Matching is case-insensitive.

    <p>
    Note that every device has a model, which is created internally if
    not given explicitly.  In particular, simple resistor, inductor,
    and capacitor devices have default models named "R", "L", and "C".

    <p>
    The <b>devcnt</b> table for all devices is also appended to the
    standard output of batch jobs.
 
!!SEEALSO
simcmds

!! commands.tex 042814
!!KEYWORD
devload
!!TITLE
devload command
!!HTML
    command: <tt>devload</tt> [<i>module_path</i> | <tt>all</tt>]

    <p>
    <i>WRspice</i> supports runtime-loadable <a href="loadable">device
    modules</a>.  Once loaded, the corresponding device is available
    during simulation runs, in the same way as the internally-compiled
    devices in the device library.

    <p>
    This command can be used at any time to load a device module into
    <i>WRspice</i>.  If given without arguments, a list of the
    dynamically loaded device modules currently in memory is printed. 
    Otherwise, the single argument can be a path to a loadable device
    module file to be loaded, or a path to a directory containing
    module files, all of which will be loaded.

    <p>
    Once a module is loaded, it can not be unloaded.  The file can be
    re-loaded, however, so if a module is modified and rebuilt, it can
    be loaded again to update the running <i>WRspice</i>.

    <p>
    On program startup, by default known loadable device modules are
    loaded automatically.  Modules are known to <i>WRspice</i> through
    the following.

    <ol>
    <li>If the <a href="modpath"><tt>modpath</tt></a> variable is set
    to a list of directory paths, modules are loaded from each
    directory in the list.  The <tt>modpath</tt> can be set from
    the <a href="startup_files"><tt>.wrspiceinit</tt></a> file.

    <li>If the <tt>modpath</tt> variable is <b>not</b> set, then
    modules are loaded from the <tt>devices</tt> subdirectory of the
    <tt>startup</tt> directory in the installation area (which is
    generally installed as
    <tt>/usr/local/xictools/wrspice/startup/devices</tt>).  Note that
    if the user sets up a <tt>modpath</tt>, this directory must be
    explicitly included for these devices, which are supplied with the
    <i>WRspice</i> distribution, to be loaded.
    </ol>

    <p>
    If the boolean variable <a href="nomodload"><tt>nomodload</tt></a>
    is set in the <a href="startup_files"><tt>.wrspiceinit</tt></a>
    file, then the module auto-loading is suppressed.  Equivalently,
    giving the "<tt>-mnone</tt>" <a href="-mnone">command line
    option</a> will also suppress auto-loading, by actually setting
    the <tt>nomodload</tt> variable.  Auto-loading is also suppressed
    if the "<tt>-m</tt>" command line <a href="-m">option</a> is
    given, which is another method by which modules can be loaded.

    <p>
    If, instead of a module path, the keyword "<tt>all</tt>" is given
    to the <b>devload</b> command, all known modules as described
    above will be loaded, the same as for the auto-load.  This will
    be done whether or not <tt>nomodload</tt> is set.

    <p>
    This gives the user flexibility in setting up devices in the
    <tt>.wrspiceinit</tt> file.  Normally, devices are auto-loaded
    after <tt>.wrspiceinit</tt> is processed, so that calls to the
    <a href="devmod"><b>devmod</b></a> command (for example) in
    <tt>.wrspiceinit</tt> would likely fail.  However, one can first
    call "<tt>devload all</tt>" to auto-load the devices, and set
    <tt>nomodload</tt> to avoid the automatic loading.  Then, one
    can call commands which require that devices be loaded.

    <p>
    The "<tt>all</tt>" form may also be useful in scripts, in
    conjunction with setting the <tt>modpath</tt> to different values.

!!SEEALSO
devls
devmod

!! commands.tex 121011
!!KEYWORD
devls
!!TITLE
devls command
!!HTML
    command: <tt>devls</tt> [<i>key</i>[<i>minlev</i>[-<i>maxlev</i>]]] ...

    <p>
    This commnd prints a listing of devices available for use in
    simulation, from the built-in device library or <a
    href="devload">loaded</a> as modules at run time.  With no argument,
    all available devices are listed.

    <p>
    Arguments take the form of a key letter, optionally followed by an
    integer, or two integers separated by a hyphen to indicate a
    range.  This will print only devices that match the key letter,
    and have model levels that match the integer or integer range
    given.  Any number of these arguments can be given.

    <p>
    Example:  <tt>devls c r1 m30-40</tt><br>

    <p>
    This will print all devices keyed by '<tt>c</tt>' (capacitors),
    all devices keyed by '<tt>r</tt>' (resistors) with model level 1,
    and devices keyed by '<tt>m</tt>' (mos) with model levels 30-40
    inclusive.

!!SEEALSO
devmod

!! commands.tex 121611
!!KEYWORD
devmod
!!TITLE
devmod command
!!HTML
    command: <tt>devmod</tt> <i>index</i> [<i>level</i> ...]

    <p>
    It is possible to program the model levels associated with devices
    in <i>WRspice</i>.  This allows the user to set up model levels
    for compatibility with another simulator, or to directly use
    simulation files where the model level is different from that
    initially assigned in <i>WRspice</i>.  The effect is similar to
    the <a href=".mosmap"><tt>.mosmap</tt></a> input directive, but
    applies to all device types.

    <p>
    All devices have built-in levels, which are the defaults.  This
    command allows levels to be changed in the currently running
    <i>WRspice</i>.  The change occurs in memory only so is not
    persistent across different <i>WRspice</i> sessions.  However, the
    command can be used in a startup script to perform the changes
    each time <i>WRspice</i> is invoked.

    <p>
    The first argument to <b>devmod</b> is a mandatory device index. 
    This is an integer that corresponds to an internal index for the
    device.  These are the numbers that appear in the listing from the
    <a href="devls"><b>devls</b></a> command.

    <p>
    If there are no other arguments, the device is simply listed, in
    the same format as the entries from <b>devls</b>.

    <p>
    Any following arguments are taken as model levels.  Each level is
    an integer in the range 1-255, and up to eight levels can be
    given.  The device will be called for any of the level numbers
    listed.

    <p>
    After pressing <b>Enter</b>, the device entry is printed with the
    new model levels.  The entire device list is checked, and if there
    are clashes from the new model level, a warning is issued.  If two
    similar devices have the same model number, the device with the
    lowest index will always be selected for that value.

    <p>
    There are a few devices that have levels that can not be changed. 
    These are built-in models, such as MOS and TRA, where the model
    code is designed to handle several built-in levels (such as MOS
    levels 1-3 and 6).  Attempting to change these levels will fail.

    <p>
    Model level 1 is somewhat special in that it is the default when
    no model level is given in SPICE input for a device.  Level 0 is
    reserved for internal use and can not be assigned.  The largest
    possible model level is 255 in WRspice.

!! commands.tex 011909
!!KEYWORD
disto
!!TITLE
disto command
!!HTML 
    command: <tt>disto</tt> <i>disto_args</i> [<tt>dc</tt> <i>dc_args</i>]
 
    <p>
    The <b>disto</b> command will initiate <a href=".disto">distortion
    analysis</a> of the current circuit.  The <i>disto_args</i> are
    the same as appear in a <tt>.disto</tt> line.  If a <a
    href=".dc">dc sweep</a> specification follows, the distortion
    analysis is performed at each point of the dc analysis.
 
!!SEEALSO
multidc
simcmds

!! commands.tex 072018
!!KEYWORD
dump
!!TITLE
dump command
!!HTML 
    command: <tt>dump</tt> [<tt>-r</tt>] [<tt>-c</tt>] [<tt>-t</tt>]
     [<tt>-f</tt> <i>filename</i>]

    <p>
    The <b>dump</b> command sends a print of the internal matrix data
    structure last used by the simulator for the current circuit to
    the standard output.  It is used for program debugging, and may be
    useful for analyzing convergence problems.  The command takes the
    following optional arguments.

    <dl>
    <dt><tt>-r</tt><dd>
    Print the reordred matrix, the default is to print the matrix as
    it exists before internal reordering is performed to optimize
    stability.
    </dl>

    <dl>
    <dt><tt>-c</tt><dd>
    Print in compact form, showing only which elements are nonzero
    (marked with 'x') and zero (marked with '.').
    </dl>

    <dl>
    <dt><tt>-t</tt><dd>
    Terse format, do not print header information.
    </dl>

    <dl>
    <dt><tt>-f</tt> <i>filename</i><dd>
    Print output in the given file.
    </dl>
 
!!SEEALSO
simcmds

!! commands.tex 030219
!!KEYWORD
findrange
!!TITLE
findrange command
!!HTML 
    command: <tt>findrange</tt>

    <p>
    This can be called after a Monte Carlo analysis trial and will
    find the actual uppear and lower operating limits of two
    parameters.
 
!!SEEALSO
simcmds

!! commands.tex 011909
!!KEYWORD
free 
!!TITLE
free command
!!HTML
    command: <tt>free</tt> [<tt>c</tt>[<tt>ircuit</tt>]]
        [<tt>p</tt>[<tt>lot</tt>]] [<tt>a</tt>[<tt>ll</tt>]]
        [<tt>y</tt>[<tt>es</tt>]]

    <p>
    The <b>free</b> command is used to free memory used by circuit and
    plot structures.  This command releases the memory used to store
    plot and circuit structures for reuse by <i>WRspice</i>.  The
    virtual memory space used by plots in particular can grow quite
    large.  If <b>free</b> is given without an argument, the user is
    queried as to whether to delete the current plot and circuit
    structures (independently).  If the argument <tt>all</tt> is
    given, the user is queried as to whether to delete all plot and
    circuit structures.  If the argument <tt>circuit</tt> is given,
    only circuits will be acted on.  Similarly, if the argument
    <tt>plot</tt> is given, only plots will be acted on.  If neither
    <tt>circuit</tt> or <tt>plot</tt> is given, both circuits and
    plots will be acted on.  If the argument <tt>yes</tt> is given,
    the user prompting is skipped, and the action performed.  Only the
    first letter of the keywords is needed.  Plots can also be freed
    from the panel brought up by the <b>Plots</b> button in the
    <b>Tools</b> menu, and circuits can be freed from the panel
    brought up with the <b>Circuits</b> button.  The <a
    href="destroy"><b>destroy</b></a> command can also be used to free
    plots.

!!SEEALSO
destroy
simcmds

!! commands.tex 012209
!!KEYWORD
jobs
!!TITLE
jobs command
!!HTML 
    command: <tt>jobs</tt>
 
    <p>
    The <b>jobs</b> command produces a report on the asynchronous
    <i>WRspice</i> jobs currently running.  Asynchronous jobs can be
    started with the <a href="aspice"><b>aspice</b></a> command
    locally, or on a remote system with the <a
    href="rspice"><b>rspice</b></a> command.  <i>WRspice</i> checks to
    see if the jobs are finished every time a command is executed.  If
    a job is finished, then the data are loaded and become available. 
    This command takes no arguments.
 
!!SEEALSO
simcmds
 
!! commands.tex 030219
!!KEYWORD
mctrial
!!TITLE
mctrial command
!!HTML 
    command: <tt>mctrial</tt>

    <p>
    This is a cCommand to run a single trial for used when when
    performing script-driven Monte Carlo analysis.
 
!!SEEALSO
simcmds

!! commands.tex 060219
!!KEYWORD
measure
!!TITLE
measure command
!!HTML 
    <table border=0>
    <tr><td valign=top>command:</td> <td>
        <tt>measure</tt> <i>analysis</i> <i>resultname</i>
         <i>point</i> | <i>interval</i> [<i>measurements</i>]
         [<i>postcmds</i>]<br>
        <tt>measure</tt> <i>analysis</i> <i>resultname</i>
            <tt>param=</tt><i>expression</i> [<i>postcmds</i>]
    </td></tr>
    </table>
 
    <table border=0>
    <tr><td valign=top><b>jump to</b></td> <td>
    <a href="measure#point"><b>Point and Interval Specification</b></a><br>
    <a href="measure#compat"><b>Syntax Compatibility</b></a><br>
    <a href="measure#measure"><b>Measurements</b></a><br>
    <a href="measure#addl"><b>Post-Measurement Commands</b></a><br>
    <a href="measure#ref"><b>Referencing Results in Sources</b></a><br>
    </td></tr></table>

    The <b>measure</b> command allows one to set up a <a
    href="runop">runop</a> which will identify a measurement point or
    interval, and evaluate an expression at that point, or call a
    number of measurement primitives that apply during the interval,
    such as rise time or pulse width.  The command will apply, if
    active, when any circuit is being run.  There is also a <a
    href=".measure"><tt>.measure</tt></a> input syntax element which
    will set up the measurement on that circuit only.  Both use the
    identical syntax described below.  The syntax is based on the
    <tt>.measure</tt> statement in <a href="hspicesim">HSPICE</a>.

    <dl>
    <dt><i>analysis</i><dd>
    This specifies the type of analysis during which the measurement will
    be active.  Exactly one of the following keywords should appear in
    this field:  <tt>tran</tt>, <tt>ac</tt>, <tt>dc</tt>.
    </dl>
    <p>

    <dl>
    <dt><i>resultname</i><dd>
    This field specifies a name for the measurement.  The name should
    be unique among the measurements in the circuit, and among vectors
    in scope during simulation.  The name should start with an
    alphabetic character and contain no white space or other special
    characters.
    </dl>

    <p>
    A vector with this name will be added to the current
    plot, if the measurement is successful.  Vector names found in
    <tt>.measure</tt> lines are added to the internal save list,
    guaranteeing that the necessary data will be available when
    needed, whether or not the vector has been mentioned in a <a
    href=".save"><tt>.save</tt></a> line.


    <a name="point"></a>
    <h2>Point and Interval Specification</h2>

    <p>
    The field that follows the <i>resultname</i> contains a
    description of the conditions which initiate a measurement.  There
    are three basic types:  a point specification, an interval
    specification, and a post-measurement specificantion.

    <p>
    The <i>interval</i> begins with the "trigger" and ends with the
    "target".  Measurement will apply during this interval.  If no
    target is given, the trigger sets the <i>point</i>, where
    measurement will be performed.  The trigger and target are
    independently specified as follows:

    <dl>
    <dt><i>point</i><dd>
    <blockquote>
    [<tt>trig</tt>] <i>pointlist</i>
    </blockquote>
    This consists of the keyword <tt>trig</tt> (which is optional)
    followed by a point specification list.  The keyword
    "<tt>from</tt>" is equivalent to "<tt>trig</tt>".
    </dl>

    <dl>
    <dt><i>interval</i><dd>
    <blockquote>
    [<tt>trig</tt>] <i>pointlist</i> <tt>targ</tt> <i>pointlist</i>
    </blockquote>
    An interval contains a second point specification initiated with
    the mandatory keyword <tt>targ</tt>.  The keyword "<tt>to</tt>" is
    equivalent to "<tt>targ</tt>".
    </dl>

    <dl>
    <dt>post-measurement<dd>
    <blockquote>
    <tt>param=</tt><i>expression</i>
    </blockquote>
    Measurements in this form will be performed when all <i>point</i>
    and <i>interval</i> measurements are complete.  After all
    <i>point</i> and <i>interval</i> measurements have been performed,
    the <i>expression</i> will be evaluated and the result saved in
    <i>resultname</i>.  The <i>expression</i> can reference other
    measurement results in addition to the usual vectors and functions
    provided by the system.  These measurement lines are evaluated in
    the order found in the input.
    </dl>

    <dl>
    <dt><i>pointlist</i><dd>
    <blockquote>
    <i>pointspec</i> [<i>pointspec</i>] ...
    </blockquote>
    The point is specified with a list of <i>pointspec</i> specifications,
    and the event is registered on the first occasion when all
    <i>pointspec</i> elements are true, i.e., the conjunction is true.
    </dl>

    <dl>
    <dt><i>pointspec</i><dd>
    <i>keyword</i> <i>expression1</i> [<tt>=</tt>][<tt>val=</tt>]
      [</i>expression2</i> [<tt>cross=</tt><i>crosses</i>]
      [<tt>rise=</tt><i>rises</i>] [<tt>fall=</tt><i>falls</i>]]
      [<tt>td=</tt><i>delay</i>]
    </dl>

    <p>
    The <i>pointspec</i> begins with one of the following kewords: 
    <tt>before</tt>, <tt>at</tt>, <tt>after</tt>, <tt>when</tt>.  The
    <tt>at</tt> keyword strobes, meaning that the event is triggered
    only if the conjunctions (other <i>pointspecs</i>) in the list are
    true at the specified event.  The <tt>after</tt> and <tt>when</tt>
    keywords are equivalent, but varied use can give a natural
    language feel to the conjuction list.  They are not strobing,
    meaning that the conjunctions can become true anytime at or after
    the specified event.  The <tt>before</tt> keyword negates logic: 
    the <i>pointspec</i> is true before the specified event.  This can
    be useful as an element in the conjunction list.

    <p>
    Once a <i>pointspec</i> becomes triggered, it remains triggered
    for the remainder of the simulation run.  Once triggered, a
    <tt>before</tt> <i>pointspec</i> will evaluate false, preventing
    the overall list from triggering.  Otherwise, the overall list
    triggers when each <i>pointspec</i> is true.  Similarly, an
    <tt>at</tt> clause that did not have all conjunctions true at its
    event time will thereafter always be false.

    <p>
    Following the keyword are one or two general expressions.  There
    can be an optional equal sign ("<tt>=</tt>") or a
    "<tt>val</tt>" keyword "<tt>val=</tt>" between the expressions.

    <p>
    An <i>expression</i> in this context can be:
    <ul>
    <li>A number or constant expression.  This is taken as the
    triggering point, meaning that the event occurs during simulation
    when the scale variable is equal to or exceeds the value.

    <li>An integer enclosed in square brackets.  This is interpreted
    as an output index, which increments whenever data would be
    written out from the running simulation.  This is most useful when
    the printing increment is constant.  The event triggers when the
    output index equals the integer given.

    <li>The <i>resultname</i> of a measure in the circuit.  The event
    occurs when the referenced measurement is performed.

    <li>A general expression consisting of constants, vector names,
    and circuit variables.  Frequently this will be simply a vector
    name corresponding to a node voltage or branch current in the
    circuit.
    </ul>

    <p>
    In <i>WRspice</i>, an expression token is the minimum text
    required for a syntactically complete expression, and may include
    white space.  Single quotes or parentheses can be used to delimit
    expressions in the <i>pointspec</i>, if nexessary.  The normal <a
    href="squote">single-quote expression</a> expansion and
    substitution is suppressed in this context.

    <p>
    If only one <i>expression</i> is given, and it is not a constant
    expression or a measure name, the event is triggered at the first
    time the expression becomes logically true, meaning that the
    absolute value is one or larger.  This corresponds to logical true
    produced by comparison and other logical operations in
    <i>WRspice</i>.  For example, the expression "<tt>V(5) >
    0.25</tt>" returns 0 if false and 1 if true.

    <p>
    It may be a bit confusing but the form
    <i>expr1</i><tt>=</tt><i>expr2</i> is interpreted as two
    expressions, but the same form with any relational operator other
    than <tt>=</tt> is taken as a single expression with a binary
    result.  Either the symbol or the keyword equivalent can be used. 
    The relational operators available are listed below.

    <p>
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th align="left"><tt>eq or =  </tt></th><td>equal to</td></tr>
    <tr><th align="left"><tt>ne or &#60> </tt></th><td>not equal to</td></tr>
    <tr><th align="left"><tt>gt or >  </tt></th><td>greater than</td></tr>
    <tr><th align="left"><tt>lt or &#60  </tt></th><td>less than</td></tr>
    <tr><th align="left"><tt>ge or >= </tt></th><td>greater than or equal
        to</td></tr>
    <tr><th align="left"><tt>le or &#60= </tt></th><td>less than or equal
        to</td></tr>
    </table>

    <p>
    If two expressions are given, neither can be a measure result
    name.  We are implicitly comparing the values of the two
    expressions, finding points where the two expressions are equal. 
    By default, the first time the values of the two expressions cross
    will trigger the event.  The following keywords can be assigned an
    integer value to trigger at the indicated point.

    <dl>
    <dt><tt>cross=</tt><i>crosses</i><dd>
    Integer <i>crosses</i> is the number of crossings.
    <dt><tt>rise=</tt><i>rises</i><dd>
    Integer <i>rises</i> is the number of times that
    <i>expression1</i> rises above <i>expression2</i>.
    <dt><tt>fall=</tt><i>falls</i><dd>
    Integer <i>falls</i> is the number of times that
    <i>expression1</i> falls below <i>expression2</i>.
    </dl>

    <dl>
    <dt><tt>td=</tt><i>delay</i><dd>
    If two expressions are given, the <i>delay</i> is the amount of
    scale value (e.g., time in transient analysis) before starting to
    look for crossing events.

    <p>
    If one expression is given, and the expression is not constant or
    a measure result name, the <i>delay</i> is the amount of the scale
    value to wait before checking to see if the expression evaluates true.
    If the expression is a measurement name, than the delay is added to
    the measurement time of the referenced measurement.

    <p>
    There is a special case, where no expressions are given, only a
    <tt>td=</tt><i>delay</i> value.  This can be a second or
    subsequent <i>pointspec</i> in the <i>pointlist</i>.  This will
    trigger at the time of the previous <i>pointspec</i> in the list
    (to the left) delayed by <i>delay</i>.
    </dl>

    <dl>
    <dt><tt>ts=</tt><i>delay</i><dd>
    This is similar to <tt>td</tt>, however it is strobing.  In the
    two expression case, in addition to having the effect of
    <tt>td</tt>, it will convert <tt>when</tt> and <tt>after</tt>
    clauses to work as <tt>at</tt>, requiring conjunctions to be true
    at the time of the event.  It simply acts as <tt>td</tt> for
    <tt>at</tt> and <tt>before</tt>.

    <p>
    In the single expression case, it requires that the expression and
    any conjunctions be true at the value given for <tt>ts</tt>.
    </dl>

    <p>
    Examples:<br>
    <tt>at v(2)=0.5 rise=3 td=0.2nS after td=0.1nS</tt><br>
    &nbsp;&nbsp;Trigger 0.1nS after the third rising edge of v(2)
    after 0.2nS crosses 0.5V.<br>
    <tt>when v(2)&#60;v(1) before v(2)&#60;v(3)</tt><br>
    &nbsp;&nbsp;Trigger the first time that <tt>v(2) &#60; v(1)</tt>
    if and only if <tt>v(2) &#60; v(3)</tt> has never been true.

    <a name="compat"></a>
    <h2>Syntax Compatibility</h2>

    <p>
    The present syntax supported by the <tt>.measure</tt> command in
    <i>WRspice</i> is a super set of the previous syntax cases, which
    are shown below.  These should all work in the present system.

    <p>
    Form 1:
    <blockquote>
    <tt>trig|targ at=</tt><i>value</i>
    </blockquote>

    Form 1 is straightforward; the interval starts (<tt>trig</tt>) or
    ends (<tt>targ</tt>) at <i>value</i>.  <i>Value</i> must be within
    the simulation range of the scale variable (e.g., time in
    transient analysis).

    <p>
    The same effect can be achieved with:
    <blockquote>
        <tt>from=</tt><i>value</i> <tt>to=</tt><i>value</i>
    </blockquote>

    <p>
    Form 2:
    <blockquote>
    <tt>trig|targ</tt> <i>variable</i> <tt>val=</tt><i>value</i>
            [<tt>td=</tt><i>delay</i>] [<tt>cross=</tt><i>crosses</i>]
            [<tt>rise=</tt><i>rises</i>] [<tt>fall=</tt><i>falls</i>]
    </blockquote>

    <p>
    Form 2 allows the interval boundaries to be referenced to times
    when a variable crosses a threshold.  The <i>variable</i> can be
    any vector whose value is available during simulation.  The
    <i>value</i> is a constant which is used to measure crossing
    events.  The <tt>val=</tt> which precedes the <i>value</i> is
    optional.  At least one of the <tt>rise/fall/cross</tt> fields
    should be set.  Their values are integers which represent the
    variable crossing the threshold a number of times.  The
    <tt>rise</tt> indicates the variable rising through the threshold,
    <tt>fall</tt> indicates the variable decreasing from above to
    below the threshold, and <tt>cross</tt> indicates <tt>rises +
    falls</tt>.  The interval boundary is set when the specified
    number of transitions is reached.

    <p>
    If the delay is specified, transition counting starts after the
    specified delay.

    <p>
    Example:
    <blockquote>
        <tt>trig v(2) 2.5 td=0.1ns rise=2</tt>
    </blockquote>

    This indicates that the interval begins at the second time v(2) rises
    above 2.5V after 0.1ns.

    <p>
    Form 3:
    <blockquote>
    <tt>trig|targ when</tt> <i>expr1</i>=<i>expr2</i>
            [<tt>td=</tt><i>delay</i>]
            [<tt>cross=</tt><i>crosses</i>] [<tt>rise=</tt><i>rises</i>]
            [<tt>fall=</tt><i>falls</i>]
    </blockquote>

    <p>
    The third form is similar to the second form, except that
    crossings are defined when <i>expr1 = expr2</i>.  A rise is
    defined as <i>expr1</i> going from less than to greater than
    <i>expr2</i>.


    <a name="measure"></a>
    <h2>Measurements</h2>

    One should be aware that measurements are performed using data
    saved in the plot structure as a simulation progresses.  The
    accuracy of the results is directly affected by the density of
    saved points.  In transient analysis, one may wish to use internal
    time point data by setting the <a
    href="steptype"><tt>steptype=nousertp</tt></a> option.  This
    avoids the interpolation to tranient time increments which may
    reduce accuracy if the increment is too coarse.

    <p>
    The following measurements are available when an interval has been
    specified.

    <dl>
    <dt><tt>find</tt> <i>expr</i>
      <dd>evaluate the difference:  <i>expr</i> at target minus
      <i>expr</i> at trigger.</dl>
    <dt><tt>min</tt> <i>expr</i>
      <dd>find the minimum value of <i>expr</i></dl>
    <dl>
    <dt><tt>max</tt> <i>expr</i>
      <dd>find the maximum value of <i>expr</i></dl>
    <dl>
    <dt><tt>pp</tt> <i>expr</i>
      <dd>find the (maximum - minimum) value of <i>expr</i></dl>
    <dl>
    <dt><tt>avg</tt> <i>expr</i>
      <dd>compute the average of <i>expr</i></dl>
    <dl>
    <dt><tt>rms</tt> <i>expr</i>
      <dd>compute the rms value of <i>expr</i></dl>
    <dl>
    <dt><tt>pw</tt> <i>expr</i>
      <dd>This will measure the full-width half-maximum of a pulse
          from <i>expr</i> contained in the interval.  The baseline is
          taken as the initial or final value with the smallest
          difference from the peak value.  The algorithm will measure
          the larger of a negative going or positive going pulse.</dl>
    <dl>
    <dt><tt>rt</tt> <i>expr</i>
      <dd>This will measure the 10-90 percent rise or fall time of the
          edge from <i>expr</i> contained in the interval.  The
          reference start and final values are the values at the ends
          of the interval.</dl>

    When a point has been specified, the only measurement form
    available is

    <dl>
    <dt><tt>find</tt> <i>expr</i>
      <dd>evaluate <i>expr</i> at point</dl>

    <p>
    A <tt>.measure</tt> statement can contain any number of
    measurements, including no measurements.  If no measurement is
    specified, the vector produced contains only zeros, however the
    scale vector contains the start and stop values, which may be the
    only result needed.  The created vector, which is added to the
    current plot, will be of length equal to the number of
    measurements, with the results placed in the vector in order.

    <p>
    The measurement scale point(s) in <tt>.measure</tt> statements are
    saved in a vector, which is the scale for the result vector.  If
    the measurement name is "<tt>result</tt>", the scale vector is
    named "<tt>result_scale</tt>".  The scale contains one or two
    values, depending on whether it is a point or interval
    measurement.

    <a name="addl"></a>
    <h2>Post-Measurement Commands</h2>

    There are a few commands which can be performed after measurement,
    which will run whether or not any measurements are actually made.
    
    <dl>
    <dt><tt>print</tt>, <tt>print_terse</tt><dd>
    By default, nothing is printed on-screen for a <tt>.measure</tt>
    line during interactive simulation.  If the keywords
    "<tt>print</tt>" appears in the <tt>.measure</tt> line, the
    results will be printed on the standard output.  A more concise
    format can be obtained from the alternative keyword
    <tt>print_terse</tt>.  The result vectors are created in all
    cases.
    </dl>

    <dl>
    <dt><tt>stop</tt><dd>
    If the keyword "<tt>stop</tt>" appears in a <tt>.measure</tt>
    line, the analysis will be paused when <i>all</i> measurements are
    complete.  Thus if the deck contains several <tt>.measure</tt>
    lines and <tt>stop</tt> is given in at least one, the analysis
    will pause when all of the measurements are complete, not just the
    one containing <tt>stop</tt>.  The analysis can then be resumed
    with the <a href="resume"><b>resume</b></a> command, or reset with
    the <a href="reset"><b>reset</b></a> command.
    </dl>

    <dl>
    <dt><tt>exec</tt> <i>command</i><dd>
    Execute the <i>WRspice</i> shell command found in <i>command</i>,
    which should be double-quoted if it contains white space.  Note
    that multiple commands can be given, separated by semicolon
    (<tt>';'</tt>) characters.  This will be run before a script is
    called (see below) so can be used to pass information to the
    script.  The command will be executed once only, after
    measurements if any.
    </dl>

    <dl>
    <dt><tt>call</tt> <i>script</i><dd>
    After the measurement (if any) is performed and any command string
    is executed, the named script will be called.  The script can be a
    normal script file or <a href="codeblock">codeblock</a>.  The
    special names "<tt>.exec</tt>", "<tt>.control</tt>", and
    "<tt>.postrun</tt>" call the exec, control, or postrun bound
    codeblocks of the running circuit, if they exist.

    <p>
    The script can be used for additional processing or testing of
    whatever sort.  If the script returns 1, the current simulation
    will pause immediately (no waiting for other measures) however a
    calling analysis, such as Monto Carlo, will continue.  If 2 is
    returned, this indicates a fatal global error and any calling
    analysis will be stopped too.  Any other return value allows the
    run to continue normally.
    </dl>

    <p>
    When a <tt>.measure</tt> is included in an iterative analysis
    (Monte Carlo, loop, etc.), data are saved as follows.  Before each
    iteration, the previous result vector and its scale are saved to
    the end of a "history" vector and scale, and are then deleted. 
    The result vector and scale are recreated when the measurement is
    completed during the iteration.  Thus, at the end of the analysis,
    for a measurement named "example", one would have the following
    vectors:

    <blockquote>
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th align="left"><tt>example</tt></th>
       <td>the result from the final trial</td></tr>
    <tr><th align="left"><tt>example_scale</tt></th>
      <td>the measurement interval or point in the last trial</td></tr>
    <tr><th align="left"><tt>example_hist</tt></th>
      <td>results from the prior trials</td></tr>
    <tr><th align="left"><tt>example_hist_scale</tt></th>
      <td>intervals from the prior trials</td></tr>
    </table><br>
    </blockquote>

    <p>
    Thus, during each trial, the result vector will have the same
    properties as in a standard run.  It can be used in the <a
    href="oprngfile">.control block</a> of a <a href="monte">Monte
    Carlo</a> or <a href="oprng_analysis">operating range</a> file
    (recall that <tt>$?</tt><i>vector</i> can be used to query
    existence, and that if there is no <tt>checkPNTS</tt> vector
    defined, the <tt>.control</tt> block is called once at the end of
    each trial).

    <p>
    Multiple <tt>.measure</tt> lines can be "chained" in the following
    manner.  The vector name following the <tt>from</tt>, <tt>to</tt>,
    <tt>trig</tt>, or <tt>targ</tt> keywords can be the name of
    another measure.  In this case, the effective start time is the
    measure time of the referenced measure.  The measure time is the
    end of the interval or the measure point.  The <tt>td</tt>,
    <tt>rise</tt>, etc.  keywords can be used in the referencing
    measure.  The <tt>td</tt> will be added to the imported time, and
    the other keywords operate in the normal way.  If there are no
    keywords other than <tt>td</tt> specified, the time is the delay
    time plus the imported time.
 
    <p>
    Example:
    <blockquote><tt>
    .measure tran t1 trig v(5) val=.4m rise=3<br>
    .measure tran t2 trig v(5) val=.4m rise=4<br>
    .measure tran pw trig t1 td=20p targ t2 td=20p pw v(5) max v(5)
    </tt></blockquote>
 
    <p>
    In this case, the measures t1 and t2 "frame" a period of an
    (assumed) repeating signal v(5).  Note that no actual measurement
    is performed for these lines.  Their purpose is to be referenced
    in the third line, which takes as its interval the t1-t2 interval
    delayed by 20 pS, and measures the pulse width and peak value.

    <a name="ref"></a>
    <h2>Referencing Results in Sources</h2>

    <p>
    It is possible to reference <tt>.measure</tt> results in sources. 
    The referencing token has the same form as a circuit variable,
    with an optional index, i.e.
    <blockquote>
    <tt>@</tt><i>result</i>[<i>index</i>]
    </blockquote>
    where the <i>index</i>, if used, is an integer that references a
    specific component of the <i>result</i> (0-based).  The value is
    always zero for timepoints before the measurement has been
    performed, and a constant value afterward.

    <p>
    Example:
    <blockquote><tt>
    .measure tran peak from=50n to=150n max v(5)<br>
    .measure tran stuff trig v(4) val=4.5 rise=1 targ v(4) val=4.5<br>
    + fall=2 min v(4) max v(4) pp v(4) avg v(4) rms v(4) print<br>
    vxx 1 0 @peak<br>
    vyy 2 0 @stuff[2]<br>
    </tt></blockquote>

    <p>
    In this example, during transient analysis, <tt>vxx</tt> is zero
    until 150 nS, where the measurement takes place, at which point it
    jumps to the value measured.  Likewise, <tt>vyy</tt> is zero until
    the measurement, at which point it jumps to the third component
    ("<tt>pp v(4)</tt>") result.  The resulting voltages can be used
    elsewhere in the circuit.  Note that we have two implementations
    of a behavioral peak detector.

!!SEEALSO
simcmds
 
!! commands.tex 011909
!!KEYWORD
noise
!!TITLE
noise command
!!HTML 
    command: <tt>noise</tt> <i>noise_args</i> [<tt>dc</tt> <i>dc_args</i>]
 
    <p>
    The <b>noise</b> command initiates a small-dignal <a
    href=".noise">noise analysis</a> of the current circuit.  The
    <i>noise_args</i> are the same as appear in a <tt>.noise</tt>
    line.  If a <a href=".dc">dc sweep</a> specification follows, the
    noise analysis is performed at each point of the dc analysis.
 
!!SEEALSO
multidc
simcmds

!! commands.tex 011909
!!KEYWORD
op
!!TITLE
op command
!!HTML 
    command: <tt>op</tt>

    <p>
    The <b>op</b> command will initiate dc <a href=".op">operating
    point</a> analysis of the current circuit.  The command takes no
    arguments.
 
!!SEEALSO
simcmds
 
!! commands.tex 011909
!!KEYWORD
pz
!!TITLE
pz command
!!HTML 
    command: <tt>pz</tt> <i>pz_args</i>
 
    <p>
    The <b>pz</b> command will initiate <a href=".pz">pole-zero
    analysis</a> on the current circuit.  The <i>pz_args</i> are the
    same as appear in a <tt>.pz</tt> line.
 
!!SEEALSO
simcmds

!! commands.tex 011909
!!KEYWORD
reset
!!TITLE
reset command
!!HTML 
    command: <tt>reset [-c]</tt>
 
    <p>
    The <b>reset</b> command will reinitialize the current circuit. 
    The command will throw out any intermediate data in the circuit
    (e.g, after a breakpoint or user pause with <b>Ctrl-C</b>) and
    re-parse the deck.  Any standard analysis in progress will be
    cleared, however the state of any margin analysis (started with
    the <a href="check"><b>check</b></a> command), or loop analysis
    (started with the <a href="loop"><b>loop</b></a> command) is
    retained by default.  However, if the <tt>-c</tt> option is given,
    these too are cleared.  Thus, the <b>reset</b> command can be used
    to update the shell variables in a deck with or without affecting
    the status of a margin or loop analysis in progress.
 
!!SEEALSO
run
simcmds

!! commands.tex 011909
!!KEYWORD
resume
!!TITLE
resume command
!!HTML 
    command: <tt>resume</tt>
 
    <p>
    The <b>resume</b> command will resume an analysis in progress. 
    The simulation can be stopped by typing an interrupt
    (<b>Ctrl-C</b>) or with the <a href="stop"><b>stop</b></a>
    command.  If no analysis is currently in progress, the effect is
    the same as the <a href="run"><b>run</b></a> command.  Each
    circuit can have one each of a standard analysis, a loop analysis
    (started with the <a href="loop"><b>loop</b></a> command), and a
    margin analysis (from the <a href="check"><b>check</b></a>
    command) in progress.  The <b>resume</b> command will resume
    standard analysis, margin analysis, and loop analysis in that
    precedence.  Paused margin and loop analysis can also be restarted
    with the <b>check</b> and <b>loop</b> commands.  These commands,
    and the <a href="reset"><b>reset</b></a> command, can be used to
    clear stopped analyses.  The <b>resume</b> command takes no
    arguments.
 
!!SEEALSO
simcmds

!! commands.tex 012411
!!KEYWORD
rhostcom
!!TITLE
rhost command
!!HTML
    command: <tt>rhost</tt> [<tt>-a</tt>][<tt>-d</tt>] [<i>hostname</i>]

    <p>
    The <b>rhost</b> command allows addition of host names which are
    available for remote <i>WRspice</i> runs.  This command allows
    manipulation of a list of host names which are available for
    remote <i>WRspice</i> runs with the <a
    href="rspice"><b>rspice</b></a> command.  If no arguments are
    given, the list of hosts is printed.  The <tt>-a</tt> and
    <tt>-d</tt> options allow a host name to be added to or deleted
    from the list, respectively.  The default is <tt>-a</tt>.  Hosts
    are added to the list if they have been specified in the <a
    href="environment">environment</a> or with the <a
    href="rhost"><tt>rhost</tt></a> variable, and a job has been
    submitted.  The <i>hostname</i> can optionally be suffixed with a
    colon followed by the port number to use to communicate with the
    <a href="wrspiced"><tt>wrspiced</tt></a> daemon.  If not given,
    the port number is obtained from the operating system for
    "wrspice/tcp", or 6114 if this is not defined.  Port number 6114
    is registered with IANA for this service.
 
!!SEEALSO
simcmds

!! commands.tex 011909
!!KEYWORD
rspice
!!TITLE
rspice command
!!HTML 
    command:
    <blockquote>
    <tt>rspice</tt> <i>inputfile</i><br>
    <tt>rspice</tt> [<tt>-h</tt> <i>host</i>] [<tt>-p</tt>
      <i>program</i>] [<tt>-f</tt> <i>inputfile</i>] [<i>analysis</i>]
    </blockquote>

    <p>
    The <b>rspice</b> command is used to initiate simulation runs on a
    remote machine.  This command initiates a <a
    href="wrspiced">remote <i>WRspice</i></a> job, using the
    <i>inputfile</i> as input, or the current circuit if no
    <i>inputfile</i> is given.  If the <tt>-h</tt> option is not used,
    the default host can be specified in the <a
    href="environment">environment</a> before <i>WRspice</i> is
    started with the <b>SPICE_HOST</b> environment variable, or with
    the <a href="rhost"><tt>rhost</tt></a> variable.  In addition, a
    list of hosts which are nominally available for remote runs can be
    generated with the <a href="rhostcom"><b>rhost</b></a> command. 
    The default host used is the host known to <i>WRspice</i> that has
    the fewest active submissions, or which appears last on the list
    (hosts are added to the front of the list).  If the <tt>-p</tt>
    option is not used, <i>WRspice</i> will use the program found in
    the <a href="rprogram"><tt>rprogram</tt></a> variable, and if not
    set will use the same <i>program</i> as the <a
    href="aspice"><b>aspice</b></a> command.  If the <tt>-f</tt>
    option is not used, the current circuit is submitted, otherwise
    <i>inputfile</i> is submitted.  If there is no <i>analysis</i>
    specification, there must be an analysis specified in
    <i>inputfile</i>.  If the current circuit is being submitted,
    there must be an analysis specification given on the command line.

    <p>
    Once the job is submitted, <i>WRspice</i> returns to interactive mode.
    When the job is complete, the standard output of the job, if any,
    is printed, and the rawfile generated becomes the current plot.

    <p>
    Remote runs can only be performed on machines which have the
    <tt>wrspiced</tt> daemon operating, and have permission to execute
    the target program.
 
!!SEEALSO
simcmds

!! commands.tex 082909
!!KEYWORD
run
!!TITLE
run command
!!HTML 
    command: <tt>run</tt> [<i>file</i>]

    <p>
    The <b>run</b> command initiates the analysis found in the deck
    associated with the current circuit.  The command will run the
    simulation as specified in the input file.  If there were any of
    the <a href="analyses">analysis specification</a> lines
    (<tt>.dc</tt>, <tt>.tran</tt>, etc.) they are executed.  The
    output is put in <i>file</i> if it was given, in addition to
    being available interactively.

    <p>
    There are two file formats available, the native "rawfile" format,
    and the Common Simulation Data Format (CSDF) used by <a
    href="hspicesim">HSPICE</a>.  See the description of the <a
    href="write"><b>write</b></a> command for information on format
    selection.

    <p>
    If a standard analysis run is in progress and halted with the <a
    href="stop"><b>stop</b></a> command or by pressing <b>Ctrl-C</b>,
    the <b>run</b> command will resume that run.  This applies only to
    standard analyses, and not margin analysis or loop analysis. 
    Standard analyses started with the analysis commands <b>tran</b>,
    <b>dc</b>, etc., will always start a new analysis, after clearing
    any paused standard analysis.
 
!!SEEALSO
resume
simcmds

!! commands.tex 011909
!!KEYWORD
save
!!TITLE
save command
!!HTML 
    command: <tt>save</tt> [<tt>all</tt>] [<i>nodename</i> ...]

    <p>
    The <b>save</b> command can be used to save a particular set of
    outputs from a simulation run.  The command will save a set of
    outputs, the rest will be discarded.  If a node has been mentioned
    in a <b>save</b> command, it will appear in the working plot after
    a run has completed, or in the rawfile if <i>WRspice</i> is run in
    batch mode (in this case, the command can be given in the input
    file as <a href=".save"><tt>.save</tt></a> ...).  If a node is
    traced or plotted it will also be saved.  If no <b>save</b>
    commands are given, all nodes will be saved.  The save can be
    deleted with the <a href="delete"><b>delete</b></a> command, or
    from the panel brought up by the <b>Trace</b> button in the
    <b>Tools</b> menu.
 
    <p>
    If a <b>save</b> command is given at the prompt in interactive
    mode, it is placed in a global list, and activity will persist
    until deleted (with the <b>delete</b> command).  If the command is
    given in a file, the command will be added to a list for the
    current circuit, and will apply only to that circuit.  Thus, for
    example, a <i>WRspice</i> file can contain lines like
    <blockquote>
        <tt>*# save v(1) ... </tt>
    </blockquote>
    and the action will be performed as that circuit is run, but the
    "<tt>save v(1) ... </tt>" directive will not apply to other
    circuits.
 
    <p>
    One can save "special" variables, i.e., device/circuit <a
    href="show">parameters</a> that begin with '@'.  If a device
    parameter is a list type, only a single component can be saved. 
    The single component can be specified with an integer, or with a
    vector name that evaluates to an integer.  For example, the
    initial condition values for a Josephson junction can be accessed
    as a list, say for a junction named "b1", one can specify
    <blockquote>
    <tt>@b1[ic,0]</tt> or <tt>@b1[ic][0]</tt>
    </blockquote>
    which are equivalent and each the same as <tt>@b1[vj]</tt>, the initial
    voltage.  Similarly,
    <blockquote>
    <tt>@b1[ic,1]</tt> or <tt>@b1[ic][1]</tt>
    </blockquote>
    are equivalent, each being the same as <tt>@b1[phi]</tt>, the initial
    phase.

    <p>
    One can also have
    <blockquote>
    <tt>let val = 1</tt>  (this vector is defined somewhere)<br>
    <tt>@b1[ic,val]</tt> or <tt>@b1[ic][val]</tt>
    </blockquote>

    Thus, commands like
    <blockquote>
    <tt>save @b1[ic,0]</tt>
    </blockquote>
    or equivalently
    <blockquote>
    <tt>save @b1[ic][0]</tt>
    </blockquote>
    are accepted.  Note that "<tt>save @b1[ic]</tt>" is the same as
    "<tt>save @b1[ic,0]</tt>".  The "0" can be an integer, or a vector
    name that evaluates to an integer.

!!SEEALSO
status
simcmds

!! commands.tex 011909
!!KEYWORD
sens
!!TITLE
sens command
!!HTML 
    command: <tt>sens</tt> <i>sens_args</i> [<tt>dc</tt> <i>dc_args</i>]
 
    <p>
    The <b>sens</b> command initiates <a href=".sens">sensitivity
    analysis</a> on the current circuit.  The <i>sens_args</i> are the
    same as appear in a <tt>.sens</tt> line.  If a <a href=".dc">dc
    sweep</a> specification follows, the sensitivity analysis is
    performed at each point of the dc analysis.
 
!!SEEALSO
.sens
simcmds

!! commands.tex 011909
!!KEYWORD
setcirc
!!TITLE
setcirc command
!!HTML 
    command: <tt>setcirc</tt> [<i>circuit_name</i>]

    <p>
    The <b>setcirc</b> command will set the "current circuit" assumed
    by <i>WRspice</i>.  The current circuit is the one that is used by
    the analysis commands.  When a circuit is loaded with the <a
    href="source"><b>source</b></a> command, it becomes the current
    circuit.  If no arguments are given, a list of circuits is
    printed, and the user is requested to choose one.  The current
    circuit can also be selected from the panel brought up by the
    <b>Circuits</b> button in the <b>Tools</b> menu.
 
!!SEEALSO
simcmds
 
!! commands.tex 062515
!!KEYWORD
show
!!TITLE
show command
!!HTML 
    command: <tt>show</tt> [<tt>-r|-o|-d|-n <i>nodename</i>|-m|-D[M]|-M</tt>]
         [<i>args</i>] [<tt>,</tt> <i>parmlist</i>]

    <p>
    The <b>show</b> command is used to display information about
    devices, models, and internal statistics.  If <tt>-r</tt> is
    given, system resource values are printed.  The <i>args</i> are
    resource keywords as in the <a href="rusage"><b>rusage</b></a>
    and <a href="stats"><b>stats</b></a>
    commands, and there is no <i>parmlist</i>.  If there are no
    <i>args</i>, only total time and space usage are printed.

    <p>
    If <tt>-o</tt> is given, <i>WRspice</i> option values are printed. 
    These values are obtained from the <a
    href=".options"><tt>.options</tt></a> line of the current circuit,
    or have been set with the <a href="set"><b>set</b></a> command. 
    If no <i>args</i> are given, the default is "<tt>all</tt>".  There
    is no <i>parmlist</i>.

    <p>
    If <tt>-d</tt> is given, or if no option is given, device
    parameters are printed.  The <i>args</i> are device names, and the
    <i>parmlist</i>, which is separated from the device list by a
    comma, consists of device parameter keywords.  The parameters are
    expected to apply to each device in the device list.  Both lists
    can contain "globbing" (wild-card) characters with similar
    behavior to globbing (<a href="glob">global substitution</a>) in
    the <i>WRspice</i> <a href="spshell">shell</a>.  Briefly,
    '<tt>?</tt>' matches any character, '<tt>*</tt>' matches any set
    of characters or no characters, "<tt>[abc]</tt>" matches the
    characters '<tt>a</tt>', '<tt>b</tt>', and '<tt>c</tt>', and
    "<tt>a{bc,de}</tt>" matches "<tt>abc</tt>" and "<tt>ade</tt>". 
    Either the device <i>args</i> or the <i>parmlist</i> can be
    "<tt>all</tt>", and the default is "<tt>all</tt>, <tt>all</tt>"
    ("<tt>all</tt>" is equivalent to '<tt>*</tt>").  If the
    <i>parmlist</i> is the keyword "<tt>none</tt>", then no parameters
    are listed, only the devices with their resolved model names. 
    This can be useful for determining which model is actually used
    for a MOS device, if L/W <a href="mosmodel">model selection</a> is
    being used.  The command "<tt>show -d m*,none</tt>" will display
    the name of the model used for each MOS device.

    <p>
    If <tt>-n</tt> is given, followed by the name of a circuit node,
    the output is in the same form as for <tt>-d</tt> however only
    devices connected to the named node are displayed.

    <p>
    If <tt>-m</tt> is given, model parameters are printed.  The
    <i>args</i> are model names, and the <i>parmlist</i> is the list
    of model parameters to print.  Wild-carding is accepted in both
    lists.  The default is "<tt>all</tt>, <tt>all</tt>".  The
    parameters are expected to apply to each model in the list.  See
    the entries for the various devices and models for the parameter
    names, or type the <b>show</b> command without a parameter list to
    see the current values for all available parameters for the
    devices or models mentioned.

    <p>
    Spaces around the "," are optional, as is the "," itself if no
    parameters are given.  If no argument is given to the <b>show</b>
    command, all parameters of all devices in the current circuit will
    be displayed.

    <p>
    The <tt>-D</tt> and <tt>-M</tt> options are similar, but keywords
    and descriptions from the internal models are listed, and no
    values are shown.  It is not necessary to have a circuit loaded,
    as it is with <tt>-d</tt> and <tt>-m</tt>.  The <i>args</i> are
    single characters which key the devices in <i>WRpice</i>, such as
    'c' for capacitors, 'q' for bipolar transistors, etc.  For devices
    with a level model parameter such as MOSFETs, an integer indicating
    the model level can follow the key argument, without any space.

    <p>
    If these options are given with no argument, the device or model
    info is printed for each device or model (both for "<tt>show
    -DM</tt>") found in the device library.  If an argument is given,
    only the matching device or model will be be shown, but all of the
    parameters will be listed in addition.  The <tt>-D</tt> option
    lists the instance parameters, and <tt>-M</tt> the model
    parameters, and <tt>-DM</tt> will list both.  In the listing, the
    letters 'RO' indicate a read-only parameter, which is a computed
    quantity not set in the instance or model lines.  The letters 'NR'
    indicate a parameter that can't be read, i.e., it is input-only. 
    Recall that device parameters can be accessed as vectors with the
    <tt>@</tt><i>devname</i>[<i>param</i>] construct.  There is no
    <i>parmlist</i> for the <tt>-D</tt> and <tt>-M</tt> options.

    <p>
    For example, to print the resistance of all resistors in the
    current circuit, enter
    <blockquote>
      <tt>show -d r*, resistance</tt>
    </blockquote>
    The <tt>-d</tt> above is optional, being the default.  To print
    the <tt>cbs</tt> and <tt>cbd</tt> parameters of mosfets
    <tt>m1</tt>-<tt>m4</tt>
    <blockquote>
      <tt>show  m[1-4], c{bd,bs}</tt>
    </blockquote>
    To print the current value of the relative tolerance option, enter
    <blockquote>
      <tt>show -o reltol</tt>
    </blockquote>
    Entering
    <blockquote>
      <tt>show -DM q m5</tt>
    </blockquote>
    will list the instance and model parameters of bipolar transistors
    and level 5 (BSIM2) MOSFETs.

!!SEEALSO
alter
simcmds

!! commands.tex 011909
!!KEYWORD
state
!!TITLE
state command
!!HTML 
    command: <tt>state</tt>

    <p>
    The <b>state</b> command will print the name and a summary of the
    state of the current circuit.  The command takes no arguments.

!!SEEALSO
simcmds

!! commands.tex 022519
!!KEYWORD
status
!!TITLE
status command
!!HTML 
    command: <tt>status</tt>

    <p>
    The <b>status</b> command is used to print a list of the "runops"
    currently in force.  The command will print out a summary of all
    the <a href="save"><b>save</b></a>, <a
    href="iplot"><b>iplot</b></a>, <a href="trace"><b>trace</b></a>,
    <a href="measure"><b>measure</b></a>, and <a
    href="stop"><b>stop</b></a> commands that are active.  Each runop
    is assigned a unique number, which can be supplied to the <a
    href="delete"><b>delete</b></a> command to remove the runop.  The
    runop list can also be manipulated from the panel brought up with
    the <b>Trace</b> button in the <b>Tools</b> menu.  The command
    takes no arguments.

!!SEEALSO
simcmds
 
!! commands.tex 011909
!!KEYWORD
step
!!TITLE
step command
!!HTML 
    command: <tt>step</tt> [<i>number</i>]
 
    <p>
    The <b>step</b> command allows single-stepping through a transient
    simulation.  The command will simulate through the number of user
    output points given, or one, if no number is given.
 
!!SEEALSO
iplot
stop
status
delete
simcmds

!! commands.tex 060119
!!KEYWORD
stop
!!TITLE
stop command
!!HTML 
    command: <tt>stop</tt> <i>analysis</i>  <i>point</i> [<i>postcmds</i>]

    <p>
    The <b>stop</b> command will add a stop point to the runop list. 
    When a condition is true, simulation will stop, but can be
    resumed, after clearing the stop point, with the <a
    href="resume"><b>resume</b></a> command.  The stop points can be
    cleared with the <a href="delete"><b>delete</b></a> command, and
    listed with the <a href="status"><b>status</b></a> command.  The
    panel brought up by the <b>Trace</b> button in the <b>Tools</b>
    menu can also be used to manipulate stop points.

    <p>
    The <b>stop</b> command is a <a href="runop">runop</a> similar to
    the <a href="measure"><b>measure</b></a> command, and is in fact
    implemented internally from the same components.  Analogous to
    <b>measure</b>, there is also a <a href=".stop"><tt>.stop</tt></a>
    input syntax element which uses the same syntax, which will be in
    force when simulating the circuit containing the line.  When
    entered on the command line, the stop is in force for all
    circuits, while the runop is active.

    <p>
    Note that this is a different implementation of the <b>stop</b>
    command than found in <i>WRspice</i>-4.3.8 and earlier, which was
    based on the Berkeley Spice3 implementation.  Although similar,
    the present syntax is a little different, and the command has more
    features and options.

    <dl>
    <dt><i>analysis</i><dd>
    This specifies the type of analysis during which the break
    condition will be active.  Exactly one of the following keywords
    should appear in this field:  <tt>tran</tt>, <tt>ac</tt>,
    <tt>dc</tt>.  Note that this did not appear in the <b>stop</b>
    syntax used in <i>WRspice</i>-4.3.8 and earlier.
    </dl>

    <dl>
    <dt><i>point</i><dd>
    This is precisely the same <a href="measure#point><i>point</i>
    specification</a> as is used in the <b>measure</b> command. 
    Please refer to that section for a description of the syntax. 
    Note that this should cover the pre-4.3.9 syntax, however an
    analysis point index is now an integer enclosed is square
    brackets, numeric values are now assumed to be scale values (such
    as time) otherwise.
    </dl>

    There are a couple of optional "<i>postcmd</i>" operations which
    can be performed when the stop is triggered, but before simulation
    ends.

    <dl>
    <dt><tt>exec</tt> <i>command</i><dd>
    Execute the <i>WRspice</i> shell command found in <i>command</i>,
    which should be double-quoted if it contains white space.  Note
    that multiple commands can be given, separated by semicolon
    (<tt>';'</tt>) characters.  This will be run before a script is
    called (see below) so can be used to pass information to the
    script.  The <i>command</i> will be executed only once, and only
    if the <i>point</i> condition is reached.
    </dl>

    <dl>
    <dt><tt>call</tt> <i>script</i><dd>
    After the <i>point</i> is reached and any command string is
    executed, the named script will be called.  The script can be a
    normal script file or <a href="codeblock">codeblock</a>.  The
    special names "<tt>.exec</tt>", "<tt>.control</tt>", and
    "<tt>.postrun</tt>" call the exec, control, or postrun bound
    codeblocks of the running circuit, if they exist.

    <p>
    The script can be used for additional processing or testing of
    whatever sort.  If the script returns 1, the current simulation
    will <b>not</b> stop, and will continue as if the stop condition
    never occurred.  If the script returns 2, a global error is
    indicated and the present analysis is terminated.  If any other
    value is returned, or there is no explicit return, the analysis
    will stop as normal, and can be resumed.
    </dl>

    <dt><tt>silent</tt><dd>
    Normally when the stop is activated a message is printed.  If the
    <tt>silent</tt> keyword is given, no message will be printed. 
    Suppressing the message may be desirable when the stop is being
    used to terminate failed Monte Carlo trials, for example, where
    message output simply clutters the screen.
    </dl>

    <p>
    If a <b>stop</b> command is given at the prompt in interactive
    mode, it is placed in the global runop list, and activity will persist
    until deleted (with the <a href="delete"><b>delete</b></a>
    command).  If the command is given in a file, the command will be
    added to a list for the current circuit, and will apply only to
    that circuit.  Thus, for example, a <i>WRspice</i> file can
    contain lines like
    <blockquote>
        <tt>*# stop tran when ... </tt>
    </blockquote>
    and the action will be performed as that circuit is run, but the
    "<tt>stop when ... </tt>" directive will not apply to other
    circuits.  This is the same effect as a <tt>.stop</tt> line.
 
!!SEEALSO
step
iplot
status
simcmds

!! commands.tex 120215
!!KEYWORD
sweep loop
!!TITLE
sweep command
!!HTML
    command: <tt>sweep</tt> [<tt>-c</tt>]
        [[<i>pstr1</i>] <i>min1</i> [<i>max1</i> [<i>step1</i>]]
        [[<i>pstr2</i>] <i>min2</i> [<i>max2</i> [<i>step2</i>]]]
        [<i>analysis</i>]]

    <p>
    The <b>sweep</b> command, which for historical compatibility is
    also available as "<b>loop</b>", is used to perform a simulation
    analysis over a range of conditions.  The command works something
    like a <a href="multidc">chained dc sweep</a>, running an analysis
    over a one or two-dimensional range of parameter values.  The
    resulting plot will be multi-dimensional.

    <p>
    There are two fundamental ways in which parameter values can be
    passed to the circuit.  In the command, the <i>pstr1</i> and
    <i>pstr2</i> are text tokens which specify the device parameters
    to vary, in a format to be described.  In a two-dimensional sweep,
    both <i>pstr1</i> and <i>pstr2</i> must be given, or neither can
    be given.  The two different value-setting mechanisms can not be
    mixed.

    <p>
    The specified analysis is performed at each point, yielding
    multidimensional output vectors.  If <i>analysis</i> is omitted,
    an analysis specification is expected to be found in the circuit
    deck. 

    <p>
    If a sweep analysis is paused, for example by pressing
    <b>Ctrl-C</b>, it can be resumed by entering the <b>sweep</b>
    command again.  No arguments are required in this case, however if
    the <tt>-c</tt> option is given the old analysis is cleared, and a
    new analysis started if further parameters are supplied.  The
    <tt>-c</tt> is ignored if there was no sweep analysis in progress. 
    The <a href="resume"><b>resume</b></a> command will also resume a
    paused sweep analysis.  The <a href="reset"><b>reset</b></a>
    command given with the <tt>-c</tt> option will also clear any
    paused sweep analysis.

    <h4>Without explicit device parameter setting</h4>

    Assume in this section that the <i>pstr1</i> and <i>pstr2</i>
    parameter specification strings do not appear, then the shell
    variables <tt>value1</tt> and <tt>value2</tt>, which are
    accessible in the circuit as <tt>$value1</tt> and
    <tt>$value2</tt>, are swept, as in <a
    href="oprng_analysis">operating range</a> analysis.  This is the
    behavior of the historic <b>loop</b> command.  As in operating
    range analysis, there are various related ways of introducing the
    variations.

    <ol>
    <li>Perhaps the most direct method is to include the forms
    <tt>$value1</tt> and <tt>$value2</tt> (if two dimensional) for
    substitution in the current circuit.  The variables will be
    replaced by the appropriate numerical values before each trial, as
    for shell variable substitution.

    <p>
    <li>If a variable named "<tt>value1</tt>" is set to a string token
    with the <a href="set"><b>set</b></a> command, then a variable of
    the same name as the string token will be incremented, instead of
    <tt>value1</tt>.  The same applies to <tt>value2</tt>.  Thus, for
    example, if the circuit contains expansion forms of the variables
    <tt>foo1</tt> and <tt>foo2</tt> (i.e., <tt>$foo1</tt> and
    <tt>$foo2</tt>), one could perform a sweep analysis using these
    variables as

    <blockquote>
      <tt>set value1 = foo1 value2 = foo2<br>
      sweep</tt> ...
    </blockquote>

    <p>
    <li>The method above allows the SPICE <a
    href="options">options</a> to be iterated.  These are the built-in
    keywords, which can be set with the <b>set</b> command or in a
    <tt>.options</tt> line in an input file, which control or provide
    parameters to the simulation.

    <p>
    The most important example is temperature sweeping, using the
    <tt>temp</tt> option.  A temperature sweep would look like

    <blockquote>
      <tt>set value1=temp<br>
      sweep -50 50 25</tt> <i>analysis</i>
    </blockquote>

    <p>
    This will run the analysis at -50, -25, 0, 25, and 50 Celsius.

    <p>
    <li>If there are existing vectors named "<tt>checkN1</tt>" and (if
    two dimensions) "<tt>checkN2</tt>" that contain integer values,
    and the variable named "<tt>value</tt>" is set to the name of an
    existing vector (or a vector named "<tt>value</tt>" exists), then
    the vector components indexed by <tt>checkN1</tt> and
    <tt>checkN2</tt> will be iterated, if within the size of the
    vector.  For example:

    <blockquote>
      <tt>let vec[10] = 0<br>
      let checkN1 = 5 checkN2 = 6<br>
      set value = vec<br>
      sweep</tt> ...
    </blockquote>

    <p>
    The first line creates a vector named "<tt>vec</tt>" of size
    sufficient to contain the indices.  The iterated values will be
    placed in <tt>vec[5]</tt> and <tt>vec[6]</tt>.  The circuit should
    reference these values, either through shell substitution (e.g.,
    <tt>$&vec[5]</tt>) or directly as vectors.

    <p>
    Alternatively, a variable named "<tt>checkN1</tt>" can be set.  If
    the value of this variable is an integer, that integer will be
    used as the index.  If the variable is a name token, then the
    index will be supplied by a vector of the given name.  The same
    applies to <tt>checkN2</tt>.  The following example illustrates
    these alternatives:

    <blockquote>
      <tt>let vec[10] = 0<br>
      set checkN1 = 5<br>
      let foo = 6<br>
      set checkN2 = foo<br>
      sweep</tt> ...
    </blockquote>

    <p>
    <li>Given that it is possible to set a vector as if a variable,
    by using the <b>set</b> command with the syntax

    <blockquote>
      <tt>set &</tt><i>vector</i> <tt>=</tt> <i>value</i>
    </blockquote>

    <p>
    it is possible to iterate vectors with the <b>sweep</b> command. 
    The form above is equivalent to

    <blockquote>
      <tt>let</tt> <i>vector</i> <tt>=</tt> <i>value</i>
    </blockquote>

    <p>
    Note, however, that the '<tt>&</tt>' character has special
    significance to the <i>WRspice</i> shell, so when this form is
    given on the command line the ampersand should be quoted, e.g., by
    preceding it with a backslash.

    <p>
    Thus, suppose that the circuit depends on a vector named
    <tt>delta</tt>.  One can set up iteration using this vector as

    <blockquote>
      <tt>set value1 = '&delta'<br>
      sweep</tt> ...
    </blockquote>

    <p>
    <li>The construct above can be extended to "special" vectors,
    which enable device and model parameters to be set ahead of the
    next analysis.  These special vectors have the form

    <blockquote>
      <tt>@</tt><i>devname</i><tt>[</tt><i>param</i><tt>]</tt>
    </blockquote>

    where <i>devname</i> is the name of a device or model in the
    circuit, and <i>param</i> is one of the parameter keywords for the
    device or model.  These keywords can be listed with the <a
    href=show><b>show</b></a> command.

    <p>
    For example, if the circuit contains a MOS device <tt>m1</tt> one
    might have

    <blockquote>
      <tt>set value1 = '&@m1[w]'<br>
      sweep 1.0u 2.0u 0.25u</tt> <i>analysis</i>
    </blockquote>

    This will perform the analysis while varying the <tt>m1</tt>
    <tt>w</tt> (device width) parameter from 1.0 to 2.0 microns in
    0.25 micron increments.
    </ol>

    <h4>Explicit parameter specification</h4>

    If parameters specifications (<i>pstr1</i> and <i>pstr2</i>) are
    given, there is no variable or vector setting.  Instead, the indicated
    device parameters are altered directly, very similar to the
    <a href="alter"><b>alter</b></a> command.

    <p>
    The syntax for the <i>pstr</i> strings is very similar to the
    device/parameter lists accepted by the <b>show</b> command.

    <blockquote>
    <i>device_list</i><tt>,</tt><i>param_list</i>
    </blockquote>

    <p>
    The <i>device_list</i> is a list of one or more device names found
    in the circuit.  The names are separated by white space, and the
    list is terminated with a comma.  Following the comma is one or
    more parameter names.  A parameter name is a device or model
    keyword, which should be applicable to all of the names listed in
    the <i>device_list</i>.  The device keywords can be obtained from
    the <a href="show"><b>show</b></a> command.

    <p>
    The <i>device_list</i> can contain "globbing" (wild-card)
    characters with similar behavior to globbing (<a
    href="glob">global substitution</a>) in the <i>WRspice</i> <a
    href="spshell">shell</a>.  Briefly, '<tt>?</tt>' matches any
    character, '<tt>*</tt>' matches any set of characters or no
    characters, "<tt>[abc]</tt>" matches the characters '<tt>a</tt>',
    '<tt>b</tt>', and '<tt>c</tt>', and "<tt>a{bc,de}</tt>" matches
    "<tt>abc</tt>" and "<tt>ade</tt>".

    <p>
    If the string contains white space, it must be quoted.  Since the
    same range is applied to all the parameters, if would be unusual
    to list more than one parameter name.  However, wildcarding or
    multiple names in the device list allows setting the values of
    arbitrarily many devices for each trial.

    <p>
    If the <i>device_list</i> contains only a single name, and the
    name is a voltage or current source, resistor, capacitor, or
    inductor, then the comma and parameter name can be omitted.  It will
    be taken as the output of a source, or the resistance, capacitance,
    or inductance of the component.

!!SEEALSO
oprng
multidc
simcmds

!! commands.tex 011909
!!KEYWORD
tf
!!TITLE
tf command
!!HTML 
    command: <tt>tf</tt> <i>tf_args</i> [<tt>dc</tt> <i>dc_args</i>]
 
    <p>
    The <b>tf</b> command will initiate a transfer function analysis
    of the current circuit.  The arguments appear as they would in a
    <a href=".tf"><tt>.tf</tt></a> line in the input file.  If a <a
    href=".dc">dc sweep</a> specification follows, the transfer
    function analysis will be performed at each dc sweep point.
 
!!SEEALSO
multidc
simcmds

!! commands.tex 051219
!!KEYWORD
trace
!!TITLE
trace command
!!HTML 
    command: <tt>trace</tt> <i>expr</i> ...
 
    <p>
    The <b>trace</b> command will add a <a href="runop">runop</a>
    which prints the value of the expression(s) at each user analysis
    point.  At each time point, the expressions on the command line
    will be evaluated, and their values printed on the standard
    output.
 
    <p>
    If a trace command is given at the prompt in interactive mode, it
    is placed in a global list, and activity will persist until
    deleted (with the <a href="delete"><b>delete</b></a> command).  If
    the command is given in a file, the command will be added to a
    list for the current circuit, and will apply only to that circuit. 
    Thus, for example, a <i>WRspice</i> file can contain lines like
    <blockquote>
        <tt>*# trace v(1)</tt>
    </blockquote>
    and the trace will be performed as that circuit is run, but the
    "<tt>trace v(1)</tt>" directive will not apply to other
    circuits.

    <p>
    The traces in effect can be listed with the <a
    href="status"><b>status</b></a> command, deleted with the
    <b>delete</b> command, and otherwise manipulated from the panel
    brought up with the <b>Trace</b> button in the <b>Tools</b> menu. 

!!SEEALSO
step
stop
status
iplot
simcmds

!! commands.tex 011909
!!KEYWORD
tran
!!TITLE
tran command
!!HTML 
    command: <tt>tran</tt> <i>tran_args</i>

    <p>
    The <b>tran</b> command initiates transient analysis of the
    current circuit.  The arguments are the same as those of a <a
    href=".tran">.tran</a> line.  Output is retained at <i>tstart</i>,
    <i>tstop</i>, and multiples of <i>tstep</i> in between, unless the
    variable <a href="steptype"><tt>steptype</tt></a> is set to
    <tt>nousertp</tt>.  In this case, output is retained at each
    internally generated time point in the range.  If a <a
    href=".dc">dc sweep</a> specification follows, the transient
    analysis is performed at each sweep point.
 
!!SEEALSO
multidc
simcmds

!! commands.tex 012209
!!KEYWORD
where
!!TITLE
where command
!!HTML 
    command: <tt>where</tt>

    <p>
    The <b>where</b> command, which takes no arguments, prints
    information about the last nonconvergence, for debugging purposes.

!!SEEALSO
simcmds

!! ----------------------------------------------------------------------------
!! commands.tex 091714
!!KEYWORD
datacmds
!!TITLE
Data Manipulation Commands
!!HTML 
    The following commands perform various operations on <a
    href="plotvec">vectors</a>, which are the basic data structures of
    <i>WRspice</i>.  Vectors from the current plot can be referenced
    by name.  A listing of the vectors for the current plot is
    obtained by typing the <a href="let"><b>let</b></a> or <a
    href="display"><b>display</b></a> commands without arguments, or
    pressing the <b>Vectors</b> button in the <b>Tools</b> menu. 
    Vectors for other than the current plot are referenced by
    <i>plotname.vecname</i>, for example, <tt>tran2.v(1)</tt>.  The
    current plot can be changed with the <a
    href="setplot"><b>setplot</b></a> command, or from the panel
    brought up by the <b>Plots</b> button in the <b>Tools</b> menu.

    <p>
    Vectors can be created and manipulated in many ways.  For example, typing
    <blockquote>
    <tt>let diff = v(1) - v(2)</tt>
    </blockquote>
    creates a new vector <tt>diff</tt>.  All vectors can be printed,
    plotted, or used in expressions.  They can be deleted with the <a
    href="unlet"><b>unlet</b></a> command.

    <p>
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th colspan=2>Data Manipulation Commands</th></tr>
    <tr><td><a href="compose"><b>compose</b></a></td>
      <td>Create vector</td></tr>
    <tr><td><a href="cross"><b>cross</b></a></td>
      <td>Vector cross operation</td></tr>
    <tr><td><a href="define"><b>define</b></a></td>
      <td>Define a macro function</td></tr>
    <tr><td><a href="deftype"><b>deftype</b></a></td>
      <td>Define a data type</td></tr>
    <tr><td><a href="diff"><b>diff</b></a></td>
      <td>Compare plots and vectors</td></tr>
    <tr><td><a href="display"><b>display</b></a></td>
      <td>Print vector list</td></tr>
    <tr><td><a href="fourier"><b>fourier</b></a></td>
      <td>Perform spectral analysis</td></tr>
    <tr><td><a href="let"><b>let</b></a></td>
      <td>Create or assign vectors</td></tr>
    <tr><td><a href="linearize"><b>linearize</b></a></td>
      <td>Linearize vector data</td></tr>
    <tr><td><a href="pick"><b>pick</b></a></td>
      <td>Create vector from reduced data</td></tr>
    <tr><td><a href="seed"><b>seed</b></a></td>
      <td>Seed random number generator</td></tr>
    <tr><td><a href="setdim"><b>setdim</b></a></td>
      <td>Set current plot dimensions</td></tr>
    <tr><td><a href="setplot"><b>setplot</b></a></td>
      <td>Set current plot</td></tr>
    <tr><td><a href="setscale"><b>setscale</b></a></td>
      <td>Assign scale to vector</td></tr>
    <tr><td><a href="settype"><b>settype</b></a></td>
      <td>Assign type to vector</td></tr>
    <tr><td><a href="spec"><b>spec</b></a></td>
      <td>Perform spectral analysis</td></tr>
    <tr><td><a href="undefine"><b>undefine</b></a></td>
      <td>Undefine macro function</td></tr>
    <tr><td><a href="unlet"><b>unlet</b></a></td>
      <td>Undefine vector</td></tr>
    </table>

!!SEEALSO
commands

!! commands.tex 092611
!!KEYWORD
compose
!!TITLE
compose command
!!HTML 
    command:
    <blockquote>
       <tt>compose</tt> <i>vecname</i>
                  <i>param</i> = <i>value</i> [...]<br>
       <tt>compose</tt> <i>vecname</i> values <i>value</i> [...]
    </blockquote>

    <p>
    The <b>compose</b> command is used to create vectors.  Both forms
    of this command create a new vector called <i>vecname</i>.  In the
    first form, the values in the vector are determined by the
    parameters given, as described below.  In the second form,
    indicated by the keyword "<tt>values</tt>", the given values are
    used to form the vector.

    <p>
    In the first form, there are three groups of possible parameter
    sets.  The first set facilitates creation of uniform arrays.  This
    set contains the following parameters.

    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th align="left"><tt>start</tt></th>
      <td>The value at which the vector should start</td></tr>
    <tr><th align="left"><tt>stop</tt></th>
      <td>The value at which the vector should end</td></tr>
    <tr><th align="left"><tt>step</tt></th>
      <td>The difference between successive elements</td></tr>
    <tr><th align="left"><tt>lin</tt></th>
      <td>The number of points, linearly spaced</td></tr>
    <tr><th align="left"><tt>log</tt></th>
      <td>The number of points, logarithmically spaced</td></tr>
    <tr><th align="left"><tt>dec</tt></th>
      <td>The number of points per decade, logarithmically spaced</td></tr>
    </table><br>

    <p>
    The words "<tt>len</tt>" and "<tt>length</tt>" are synonyms for
    "<tt>lin</tt>".  A subset of these parameters that provides the
    information needed is sufficient.  If all four are given, the
    point count and step value must be consistent or the command will
    fail.  The parameter <tt>start</tt> defaults to zero, unless
    implicitly set by other parameters.  The <tt>stop</tt> and
    <tt>step</tt> have no defaults and must be supplied unless implied
    by other parameters.  If the <tt>lin</tt> parameter is not given,
    the other parameters determine the vector length.

    <p>
    The second parameter group generates Gaussian random values.

    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th align="left"><tt>gauss</tt></th>
      <td>The number of points in the gaussian distribution</td></tr>
    <tr><th align="left"><tt>mean</tt></th>
      <td>The mean value for the gaussian distribution</td></tr>
    <tr><th align="left"><tt>sd</tt></th>
      <td>The standard deviation for the gaussian distribution</td></tr>
    </table><br>

    <p>
    The <tt>gauss</tt> parameter is required, <tt>sd</tt> defaults to
    1.0, and <tt>mean</tt> defaults to 0.  The random number sequences
    can be reset by calling the <a href="seed"><b>seed</b></a>
    command.

    <p>
    The third parameter group generates uniform random values.

    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th align="left"><tt>random</tt></th>
      <td>The number of randomly selected points</td></tr>
    <tr><th align="left"><tt>center</tt></th>
      <td>Where to center the range of points</td></tr>
    <tr><th align="left"><tt>span</tt></th>
      <td>The size of the range of points</td></tr>
    </table><br>

    <p>
    The <tt>random</tt> parameter is required, <tt>span</tt> defaults
    to 2.0, and <tt>center</tt> defaults to 0.  The random number
    sequences can be reset by calling the <a
    href="seed"><b>seed</b></a> command.
 
!!SEEALSO
let
datacmds

!! commands.tex 012009
!!KEYWORD
cross
!!TITLE
cross command
!!HTML 
    command: <tt>cross</tt> <i>vecname number</i> <i>source</i> [...]

    <p>
    The <b>cross</b> command creates a new vector.  The vector is
    constructed, with name <i>vecname</i> and values consisting of the
    <i>number</i>'th element of each of the source vectors.  If the
    index is out of range for a vector, 0 is taken.
 
!!SEEALSO
datacmds
pick

!! commands.tex 092312
!!KEYWORD
define
!!TITLE
define command
!!HTML 
    command: <tt>define</tt> [<i>function</i>(<i>arg1</i>, <i>arg2</i>, ...)]
     [=] [<i>expression</i>]

    <p>
    The <b>define</b> command is used to specify user-defined vector
    functions.  This will define the user-definable function with the
    name <i>function</i> and arguments <i>arg1</i>, <i>arg2</i>, ... 
    to be <i>expression</i>, which will usually involve the arguments. 
    When the function is called, the arguments that are given are
    substituted for the formal arguments.

    <p>
    The <b>define</b> command and the <a
    href=".param"><tt>.param</tt></a> line in input files can be used
    to define user-defined functions (UDFs).  User-defined function
    definitions are modularized and prioritized.  At the base of the
    hierarchy (with lowest priority) are the "shell" UDFs which are
    defined with the <b>define</b> command.

    <p>
    Every circuit has its own set of UDFs, which are obtained from
    <tt>.param</tt> lines which are not part of a subcircuit.  When a
    circuit is the current circuit, its UDFs will be searched before
    the shell UDFs to resolve a function reference.  The current
    circuit's UDF database is pushed onto a stack, ahead of the shell
    UDFs.  Most of the time, this stack is two levels deep.

    <p>
    During initial circuit processing, when subcircuit expansion is
    being performed, when a subcircuit is bing expanded, any functions
    defined within the <a href=".subckt"><tt>.subckt</tt></a> text
    with <tt>.param</tt> lines are pushed on the top of the stack. 
    Since subcircuit definitions may be nested, functions will be
    pushed/popped according to the depth in the hierarchy currently
    being processed.

    <p>
    Thus, a function defined in a subcircuit will have priority over a
    function of the same name and argument count defined in the
    circuit body, and a function defined in the circuit body will have
    priority over a function with the same name and argument count
    defined from the shell with the <b>define</b> command.

    <p>
    When <b>define</b> is given without arguments, all currently
    defined functions are listed.  Those definitions from the current
    circuit will be shown with an asterisk '<tt>*</tt>' in the first
    column.  Other functions listed have been defined with the
    <b>define</b> command.  The functions defined in subcircuits are
    invisible, their use is only transient and they are part of the
    database only during subcircuit expansion.

    <p>
    If only a function name is given, any definitions for functions
    with the given name are printed.

    <p>
    It is possible to define a function that calls a non-existing
    function.  The resolution is done when the function is evaluated. 
    Thus, functions of functions can be defined in any order.

    <p>
    Note that one may have different functions defined with the same
    name but different argument counts.  Some useful definitions
    (which are part of the default environment) are:

    <blockquote><tt>
    define max(x,y) x > y ? x : y<br>
    define min(x,y) x &#60 y ? x : y
    </tt></blockquote>
 
!!SEEALSO
undefine
expressions
datacmds

!! commands.tex 012009
!!KEYWORD
deftype
!!TITLE
deftype command
!!HTML 
    command:
    <blockquote>
    <tt>deftype v</tt> <i>typename</i> [<i>abbrev</i>]<br>
    <tt>deftype p</tt> <i>plottype</i> [<i>pattern</i> ...]
    </blockquote>

    <p>
    The <b>deftype</b> command defines a new data type.  This is an
    obscure command that might be useful for exporting rawfile data to
    other programs.  If a vector's value indicates furlongs per
    fortnight, its type can be so defined.  However, user-defined
    types are not compatible with the internal <i>WRspice</i> type
    propagation logic.  Vectors with user-defined types, or results
    involving user-defined types, will be treated as untyped in
    <i>WRspice</i>.

    <p>
    The first form defines a new type for vectors.  The
    <i>typename</i> may then be used as a vector type specification in
    a rawfile.  If an <i>abbrev</i> is given, values of that type can
    be named <i>abbrev</i>(<i>something</i>) where <i>something</i> is
    the name given in the rawfile (and <i>something</i> doesn't
    contain parentheses).

    <p>
    The second form defines a plot type.  The (one word) name for a
    plot with any of the patterns present in its plot type name as
    given in the rawfile will be <i>plottype</i>N, where N is a
    positive integer incremented every time a rawfile is read or a new
    plot is defined. 

 
!!SEEALSO
datacmds

!! commands.tex 012009
!!KEYWORD
diff
!!TITLE
diff command
!!HTML 
    command: <tt>diff</tt> <i>plot1 plot2</i> [<i>vecname</i> ...]

    <p>
    The <b>diff</b> command compares vectors in different plots.  The
    command will compare all the vectors in the specified plots, or
    only the named vectors if any are given.  If there are different
    vectors in the two plots, or any values in the vectors differ
    significantly, the difference is reported.  The variables <a
    href="diff_abstol"><tt>diff_abstol</tt></a>, <a
    href="diff_reltol"><tt>diff_reltol</tt></a>, and <a
    href="diff_vntol"><tt>diff_vntol</tt></a> are used to determine if
    two values are "significantly" different. 
 
!!SEEALSO
datacmds
 
!! commands.tex 012009
!!KEYWORD
display
!!TITLE
display command
!!HTML 
    command: <tt>display</tt> [<i>vecname</i> ...]

    <p>
    The <b>display</b> command prints information about the named
    vectors, or about all vectors in the current plot if no names are
    given.  This command will list the names, types and lengths of the
    vectors, and whether the vector is real or complex.

    <p>
    Additional information is also given:  if there is a minimum or
    maximum value for the vector defined, this is listed (see <a
    href="rawfilefmt">rawfile format</a> for the manner in which this
    and the rest of the per-vector parameters are defined), if there
    is a default grid type or a default plot type, they are mentioned,
    and if there is a default color or a default scale for the vector
    it is noted.  Additionally, one vector in the plot will have the
    notation <tt>[default scale]</tt> appended - this vector will be
    used as the x-scale for the <b>plot</b> command if none is given
    or if the vectors named have no default scales of their own.  See
    the <a href="plot"><b>plot</b></a> command for more information on
    scales.

    <p>
    The vectors are sorted by name unless the variable <a
    href="nosort"><tt>nosort</tt></a> is set.  The <a
    href="let"><b>let</b></a> command without arguments is equivalent
    to the <b>display</b> command without arguments.

!!SEEALSO
datacmds
 
!! commands.tex 012009
!!KEYWORD
fourier
!!TITLE
fourier command
!!HTML 
    command: <tt>fourier</tt> <i>fundamental_frequency</i> [<i>value</i> ...]

    <p>
    The <b>fourier</b> command performs Fourier analysis.  This
    command initiates a Fourier analysis of each of the given values,
    using the first 10 multiples of the fundamental frequency (or the
    first <a href="nfreqs"><tt>nfreqs</tt></a>, if that variable is
    set).  The values may be any valid expression.  They are
    interpolated onto a fixed-spaced grid with the number of points
    given by the <a href="fourgridsize"><tt>fourgridsize</tt></a>
    variable, or 200 if it is not set.  The interpolation will be of
    degree <a href="polydegree"><tt>polydegree</tt></a> if that
    variable is set, or 1.  If polydegree is 0, then no interpolation
    will be done.  This is likely to give erroneous results if the
    time scale is not monotonic.  This command is executed when a <a
    href=".four"><tt>.four</tt></a> line is present in the input file
    and <i>WRspice</i> is being run in batch mode.

!!SEEALSO
datacmds
numdgt
spec
 
!! commands.tex 060314
!!KEYWORD
let
!!TITLE
let command
!!HTML 
    command: <tt>let</tt> [<i>vecname</i> [= <i>expr</i>]]
    [<i>vecname</i> = <i>expr</i> ...]

    <p>
    The <b>let</b> command is used to assign vectors.  With no
    arguments, the list of vectors from the current plot is printed,
    similar to the <a href="display"><b>display</b></a> command.  If
    one or more arguments appear without an assignment, information
    about the named vectors is printed, similar to the <b>display</b>
    command.  Otherwise, for each assignment, if <i>vecname</i> does
    not exist, a new vector is created with name <i>vecname</i> and
    value given by the expression <i>expr</i>.  An existing vector
    with the given name will be overwritten with new data.

    <p>
    In <i>WRspice</i> releases prior to 3.0.9, only a single
    assignment could appear in a <b>let</b> command.  In current
    releases, any number of assignemnts can be given in a single
    command line.  The assignments are performed left-to-right, so
    that expressions to the right of an assignment may make use of
    that assignment, i.e., forms like
    <blockquote>
    <tt>let a=1 b=a</tt>
    </blockquote>
    work properly.

    <p>
    None of the vector options such as default scale, color, etc. 
    that are read from the rawfile are preserved when a vector is
    created with the <b>let</b> command.

    <p>
    The <i>vecname</i> above can actually be in the
    <i>plotname</i>.<i>vecname</i> format, where the <i>plotname</i>
    is the name of a plot or one of the plot <a
    href="plotvec">aliases</a>.  In this case, only the indicated plot
    will be searched for a vector named <i>vecname</i>, and if not
    found, a new vector of that name will be created in the indicated
    plot.

    <p>
    If no plot is specified, a search for <i>vecname</i> will occur in
    the current plot, then the context plot if any, and finally the
    <tt>constants</tt> plot.  If a match is found, that vector will be
    reused, which may not be what is intended.  When a scrpt is run,
    the current plot at the time the script starts is saved as the
    "context plot".  Vectors created in the script before any change
    in the current plot are saved in the context plot.  If the script
    runs an analysis, the current plot will change, but the previously
    defined variables will still be available by name as the context
    plot will be searched as well as the current plot.

    If the intention is to use or create a vector in the current plot,
    the form
    <blockquote>
    <tt>let curplot.</tt><i>vecname</i> = <i>expr</i>
    </blockquote>
    should be used, if there is any chance of ambiguity.

    <p>
    The syntax
    <blockquote>
    <tt>let a[N] =</tt> <i>vec</i>
    </blockquote>
    with <tt>N</tt> a non-negative integer is valid.  If <i>vec</i> is
    a vector, then <tt>a[N] =</tt> <i>vec</i><tt>[0]</tt>, <tt>a[N+1]
    =</tt> <i>vec</i><tt>[1]</tt>, etc.  If <tt>a</tt> is undefined,
    <tt>a</tt> is defined, and new entries that are not explicitly set
    are zeroed.  The length of <tt>a</tt> is set or modified to
    accommodate <i>vec</i>.  The syntax <tt>a[0] =</tt> <i>vec</i> is
    also valid, and is equivalent to <tt>a =</tt> <i>vec</i>.  If
    <i>vec</i> is a vector, then <tt>a</tt> is a copy of <i>vec</i>. 
    If <i>vec</i> is a scalar (unit length vector), then <tt>a</tt> is
    also a scalar with the value of <i>vec</i>.

    <p>
    When assignment is from a scalar value, any SPICE <a
    href="spinput#number">number format</a> may be used.  That is, if
    alpha characters appear after a number, the initial characters are
    checked as a scale factor.  Recognized sequences are t, g, k, u,
    n, p, f, m, meg, mil.  Remaining characters are parsed as a units
    string.  This is all case insensitive.

    <p>
    The units suffix of a constant value is used to assign the units
    of any vector to which the constant is assigned.  This means, for
    example, in
    <blockquote>
        <tt>let a = v(1)/15o</tt>
    </blockquote>
    <tt>a</tt> has units of current (A).  Use the <a
    href="settype"><b>settype</b></a> command without arguments to see
    a list of recognized types.

    <p>
    The "let" is actually optional; the <b>let</b> command will be
    applied to a line with the second token being "=".  This is
    somewhat less efficient, however.

!!SEEALSO
expressions
compose
setandlet
datacmds

!! commands.tex 012009
!!KEYWORD
linearize
!!TITLE
linearize command
!!HTML 
    command: <tt>linearize</tt> [<i>vecname</i> ...]

    <p>
    The <b>linearize</b> command is used to create linearized vectors
    from vectors whose scales are not evenly spaced.  The command will
    force data from a transient analysis to conform to a linear scale,
    if the plot has been created using raw timepoints.  This is the
    case only when the <a href="steptype"><tt>steptype</tt></a>
    variable is set to "<tt>nousertp</tt>.

    <p>
    The <b>linearize</b> command will create a new plot with all of
    the vectors in the current plot, or only those mentioned if
    arguments are given.  The new vectors will be interpolated onto a
    linear time scale, which is determined by the values of
    <tt>tstep</tt>, <tt>tstart</tt>, and <tt>tstop</tt> in the
    currently active transient analysis.  The currently loaded deck
    must include a transient analysis, or a <a href="tran"><b>tran</b></a>
    command may be run interactively, and the current plot must be
    from this transient analysis.  The variable <a
    href="polydegree"><tt>polydegree</tt></a> determines the degree of
    interpolation.

!!SEEALSO
datacmds
 
!! commands.tex 012009
!!KEYWORD
pick
!!TITLE
pick command
!!HTML 
    command: <tt>pick</tt> <i>vecname offset period vector</i>
        [<i>vector</i> ...]

    <p>
    The <b>pick</b> command creates a new vector from elements of
    other vectors.
    The command creates a vector <i>vecname</i> and fills it with
    every <i>period</i>'th value starting with <i>offset</i> from the
    vectors.  The <i>offset</i> and <i>period</i> are integers.  For
    example, for
    <blockquote>
    <tt>pick xx 1 2 v1 v2</tt>
    </blockquote>
    we obtain
    <blockquote>
    <tt>xx[0] = v1[1]<br>
        xx[1] = v2[1]<br>
        xx[2] = v1[3]<br>
        xx[3] = v2[3]</tt>
    </blockquote>
    and so on.

!!SEEALSO
cross
datacmds

!! commands.tex 032715
!!KEYWORD
seed
!!TITLE
seed command
!!HTML
   command: <tt>seed</tt> [<i>seed_integer</i>]

   <p>
    The <b>seed</b> command will reset the internal random number
    generator.  The <i>seed_integer</i>, if given, will be used to
    seed the new random number sequence.  This affects the <a
    href="statfuncs">statistical functions</a> and other functions
    that generate random values.  Setting the seed explicitly enables
    the sequence of "random" values returned from these functions to
    be repeatable (the default seed is random).

!!SEEALSO
compose
datacmds

!! commands.tex 022015
!!KEYWORD
setdim
!!TITLE
setdim command
!!HTML
    command: <tt>setdim</tt> [<i>numdims</i> [<i>dim</i> ...]]

    <p>
    The <b>setdim</b> command allows the dimensions of the current
    plot to be changed.

    <p>
    If given without arguments, the length and dimensions of the scale
    vector of the current plot are printed.  Otherwise, all arguments
    are non-negative numbers.  There should be <i>numdims</i>-1
    "<i>dims</i>" given.  The <i>numdims</i> is the new dimensionality
    of the plot.  Values of 0-8 are allowed.  The sub-dimensions that
    follow are integers 2 or larger.

    <p>
    The dimension list must be compatible with the existing plot
    dimensions in that the total number of points must remain the
    same, and the size of the basic vector (scale period) remains the
    same.

    <p>
    There is a special case where the <i>numdims</i> is the same as
    the vector length.  The plot will become multidimensional, with
    each dimension having one point.  There is no limit to the number
    of dimensions in this case.  Such vectors plot as collections of
    multi-colored points.  This type of plot is generated normally by,
    for example, use of the <a href="loop"><b>loop</b></a> command to
    repeat <a href="op">op analysis</a>.  Additional argumens to the
    command are ignored.

    <p>
    Giving <i>numdims</i> a value of 0 or 1 will set to "no"
    dimensionality, the status of a regualar vector.

!!SEEALSO
datacmds

!! commands.tex 040410
!!KEYWORD
setplot
!!TITLE
setplot command
!!HTML 
    command: <tt>setplot</tt> [<i>plotname</i>]

    <p>
    The <b>setplot</b> command can be used to set the current plot, or
    to create a new, empty plot and make it the current plot.

    <p>
    Here, the word "plot" refers to a group of vectors that are the
    result of one <i>WRspice</i> simulation run.  Plots are created in
    memory during a simulation run, or by loading rawfile data.  When
    more than one file is loaded in, or more than one plot is present
    in one file, <i>WRspice</i> keeps them separate and only shows the
    vectors in the current plot.  One generally accesses a given plot
    by first making it the current plot.

    <p>
    The same functionality is available from the <b>Plots</b> button
    in the <b>Tools</b> menu.  The <b>setplot</b> command will set the
    current plot to the plot with the given <i>plotname</i>, or if no
    name is given, prompt the user with a menu.  The plots are named
    as they are loaded by reading in a rawfile, or created by running
    a simulation, with names like <tt>tran1</tt> or <tt>ac2</tt>. 
    These names are shown by the <b>setplot</b> and <a
    href="display"><b>display</b></a> commands and are used by other
    commands.

    <p>
    The <i>plotname</i> can also be a numerical index.  Plots are
    saved in the order created, and as listed by the <b>setplot</b>
    command without arguments, and in the <b>Plots</b> tool.  In
    addition to the plot name, the following constructs are
    recognized.  Below, <i>N</i> is an integer.

    <dl>
    <dt>-<i>N</i><dd>
    Use the <i>N</i>'th plot back from the current plot.  <i>N</i>
    must be 1 or larger.  For example, "<tt>setplot -1</tt>" will set
    the current plot to the previous plot.  The command will fail if
    there is no such plot.
    </dl>

    <dl>
    <dt>+<i>N</i><dd>
    This goes in the reverse direction, indicating a plot later in the
    list than the current plot.
    </dl>

    <dl>
    <dt><i>N</i><dd>
    An integer without <tt>+</tt> or <tt>-</tt> indicates an absolute
    index into the plot list, zero-based.  The value 0 will always
    indicate the "constants" plot, which is the first plot created (on
    program startup).
    </dl>

    <p>
    If the <i>plotname</i> ia "<tt>new</tt>", a new plot is created,
    which becomes the current plot.  This plot has no vectors.

    <p>
    The current plot can also be changed by resetting the <a
    href="curplot"><tt>curplot</tt></a> variable.  There are three
    read-only variables which are reset internally whenever the
    current plot changes.  Each contains a string describing a feature
    of the current plot.  These are <a
    href="curplotdate"><tt>curplotdate</tt></a>, <a
    href="curplotname"><tt>curplotname</tt></a>, and <a
    href="curplottitle"><tt>curplottitle</tt></a>.
 
!!SEEALSO
datacmds

!! commands.tex 012009
!!KEYWORD
setscale
!!TITLE
setscale command
!!HTML 
    command: <tt>setscale</tt> [<i>plot or vector</i>] [<i>vectors</i> ...]

    <p>
    The <b>setscale</b> command is used to set the vector used as a
    scale when plotting other vectors.  Each plot has a default scale,
    which can be set with this command.  Each vector has a scale
    variable, which if set will override the default scale of the
    plot.  These also can be set with this command.  This command
    takes as input the names of a plot and a new scale vector in that
    plot, or the names of vectors from the current plot.  The wildcard
    forms using "all" and the plot prefix form <i>plot.vector</i> are
    not allowd in this command.  If only one argument is given, i.e.,
    <blockquote>
    <tt>setscale</tt> <i>vector</i>
    </blockquote>
    then <i>vector</i> is assigned as the default scale of the current
    plot.  The vector must already exist in the current plot.

    <p>
    If two arguments are given, the first argument is initially
    interpreted as the name of a plot, and the second argument is the
    name of a vector in that plot to use as the default scale.  The
    plot has names like "tran1" or "ac2" and the vector must exist in
    that plot.

    <p>
    If the first argument is not a plot name, or there are more than
    two arguments, the arguments are expected to be vectors in the
    current plot, and the last vector will be assigned as the scale
    for the other listed vectors.

    <p>
    The scales assigned to vectors can be removed by assigning the
    vector that is the current default scale for the plot, or the
    scale vector name given can have the special names "<tt>none</tt>"
    or "<tt>default</tt>".  The scale for plots can't be removed,
    since a plot must always have a default scale (if any vectors are
    defined).

    <p>
    The <a href="let"><b>let</b></a> command without arguments lists
    the vectors and will show the scales, if any.

!!SEEALSO
expressions

!! commands.tex 012009
!!KEYWORD
settype
!!TITLE
settype command
!!HTML 
    command: <tt>settype</tt> [<i>type</i>] [<i>vector</i> ...]

    <p>
    The <b>settype</b> command is used to change the data types of the
    vectors in a plot.  The command will change the type of the named
    vectors to <i>type</i>.  With no arguments, the list of recognized
    types and abbreviations is printed.  The <i>type</i> field can
    consist of a single name, or a single token containing a list of
    abbreviations.  The token list can contain a digit power after an
    abbreviation, and a single '/' for denominator units.  Examples
    are "F/M2", "Wb2/Hz".  Units of vectors generated during analysis
    are set automatically.

    <p>
    The <i>WRspice</i> <a href="spinput#number">numerical input</a>
    format allows the type to be specified when a value is given to
    <i>WRspice</i>, either interactively or in an input file.

    <p>
    Type names can also be found in the description of the <a
    href="rawfilefmt">rawfile</a> format, or they may be defined with
    the <a href="deftype"><b>deftype</b></a> command.  However, only
    the primitive types listed below propagate through expressions and
    are recognized by the <i>WRspice</i> type-propagation system.

    The primitive built-in types and abbreviations are:
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th align="left>time</th><td>S</td></tr>
    <tr><th align="left>frequency</th><td>Hz</td></tr>
    <tr><th align="left>voltage</th><td>V</td></tr>
    <tr><th align="left>current</th><td>A</td></tr>
    <tr><th align="left>charge</th><td>Cl</td></tr>
    <tr><th align="left>flux</th><td>Wb</td></tr>
    <tr><th align="left>capacitance</th><td>F</td></tr>
    <tr><th align="left>inductance</th><td>H</td></tr>
    <tr><th align="left>resistance</th><td>O</td></tr>
    <tr><th align="left>conductance</th><td>Si</td></tr>
    <tr><th align="left>length</th><td>M</td></tr>
    <tr><th align="left>area</th><td>M2</td></tr>
    <tr><th align="left>temperature</th><td>C</td></tr>
    <tr><th align="left>power</th><td>W</td></tr>
    </table>
 
    <p>
    The codes from the rawfile are:
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th>Name         <th> Description          <th> SPICE2 Numeric Code</tr>
    <tr><td><tt>notype</tt>       <td> Dimensionless value  <td> 0</tr>
    <tr><td><tt>time</tt>         <td> Time                 <td> 1</tr>
    <tr><td><tt>frequency</tt>    <td> Frequency            <td> 2</tr>
    <tr><td><tt>voltage</tt>      <td> Voltage              <td> 3</tr>
    <tr><td><tt>current</tt>      <td> Current              <td> 4</tr>
    <tr><td><tt>output-noise</tt> <td> SPICE2 .noise result <td> 5</tr>
    <tr><td><tt>input-noise</tt>  <td> SPICE2 .noise result <td> 6</tr>
    <tr><td><tt>HD2</tt>          <td> SPICE2 .disto result <td> 7</tr>
    <tr><td><tt>HD3</tt>          <td> SPICE2 .disto result <td> 8</tr>
    <tr><td><tt>DIM2</tt>         <td> SPICE2 .disto result <td> 9</tr>
    <tr><td><tt>SIM2</tt>         <td> SPICE2 .disto result <td> 1</tr>
    <tr><td><tt>DIM3</tt>         <td> SPICE2 .disto result <td> 11</tr>
    <tr><td><tt>pole</tt>         <td> SPICE3 pz result     <td> 12</tr>
    <tr><td><tt>zero</tt>         <td> SPICE3 pz result     <td> 13</tr>
    </table>

!!SEEALSO
datacmds

!! commands.tex 012009
!!KEYWORD
spec
!!TITLE
spec command
!!HTML 
    command: <tt>spec</tt> <i>start_freq stop_freq step_freq vector</i> [...]

    <p>
    This is based on a SPICE3 <b>spec</b> command by Anthony Parker of
    Macquarie University in Sydney Australia, which is available as
    part of the patch set from <a
    href="http://www.elec.mq.edu.au/cnerf/spice/spice.html">
    http://www.elec.mq.edu.au/cnerf/spice/spice.html</a>.

    <p>
    The command will create a new plot consisting of the Fourier
    transforms of the vectors given on the command line.  Each vector
    given should be a transient analysis result, i.e., have time as a
    scale, and each should have the same time scale.  The Fourier
    transform will be computed using the frequency parameters given,
    and will use a window function as given with the
    <tt>specwindow</tt> variable.

    The following variables control operation of the <b>spec</b>
    command.  Each can be set with the <a href="set"><b>set</b></a>
    command, or equivalently from the <b>Fourier</b> tab of the <a
    href="cmdopts">Command Options</a> tool.

    <dl>
    <dt><a href="spectrace"><tt>spectrace</tt></a><dd>
    This enables messages to be printed during Fourier analysis with the
    <b>spec</b> command, for debugging purposes.
    </dl>

    <dl>
    <dt><a href="specwindow"><tt>specwindow</tt></a><dd>
    This variable is set to one of the following strings, which will
    determine the type of windowing used for the Fourier transform in
    the <b>spec</b> command.  If not set, the default is <tt>hanning</tt>.

    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><td><tt>bartlet</tt></td>    <td>Bartlet (triangle) window</td></tr>
    <tr><td><tt>blackman</tt></td>   <td>Blackman order 2 window</td></tr>
    <tr><td><tt>cosine</tt></td>     <td>Hanning (cosine) window</td></tr>
    <tr><td><tt>gaussian</tt></td>   <td>Gaussian window</td></tr>
    <tr><td><tt>hamming</tt></td>    <td>Hamming window</td></tr>
    <tr><td><tt>hanning</tt></td>    <td>Hanning (cosine) window</td></tr>
    <tr><td><tt>none</tt></td>       <td>No windowing</td></tr>
    <tr><td><tt>rectangular</tt></td> <td>Rectangular window</td></tr>
    <tr><td><tt>triangle</tt></td>   <td>Bartlet (triangle) window</td></tr>
    </table>
    </dl>

    <dl>
    <dt><a href="specwindoworder"><tt>specwindoworder</tt></a><dd>
    This can be set to an integer in the range 2-8.  This sets the
    order when the gaussian window is used in the <b>spec</b> command. 
    If not set, order 2 is used.
    </dl>

!!SEEALSO
fourier
datacmds
 
!! commands.tex 012009
!!KEYWORD
undefine
!!TITLE
undefine command
!!HTML 
    command: <tt>undefine</tt> <i>word</i> [...]

    <p>
    The <b>undefine</b> command is used to undefine user-defined
    functions that have previously been defined with the <a
    href="define"><b>define</b></a> command.  The command deletes the
    definitions of the user-defined functions passed as arguments.  If
    the argument is "*", then all macro functions are deleted.  Note
    that all functions with the given names are removed, so there is
    no way to delete a function with a particular argument count
    without deleting all functions with that name.
 
!!SEEALSO
expressions
datacmds

!! commands.tex 012009
!!KEYWORD
unlet
!!TITLE
unlet command
!!HTML 
    command: <tt>unlet</tt> <i>vecname</i> [...]

    <p>
    The <b>unlet</b> command will delete the vectors listed as
    arguments.  The current plot is assumed, though the
    <i>plot.vector</i> notation is accepted.  When the default scale
    vector is deleted, another random vector will become the default
    scale.  The names can be "all", indicating that all matching
    vectors should be removed.  If the vector name is "all", all
    vectors in the plot are removed, but the plot itself is not
    deleted.  Giving "all.all" will clear the vectors in all plots
    (not very useful).  To delete a plot, use the <a
    href="destroy"><b>destroy</b></a> or <a
    href="free"><b>free</b></a> commands.

!!SEEALSO
let
datacmds

!! ----------------------------------------------------------------------------
!! commands.tex 062515
!!KEYWORD
misccmds
!!TITLE
Miscellaneous Commands
!!HTML 
    These commands perform miscellaneous functions.

    <p>
    <table border=1 cellpadding=2 bgcolor="#ffffee">
    <tr><th colspan=2>Miscellaneous Commands</th></tr>
    <tr><td><a href="bug"><b>bug</b></a></td>
      <td>Submit bug report</td></tr>
    <tr><td><a href="help"><b>help</b></a></td>
      <td>Enter help system</td></tr>
    <tr><td><a href="helpreset"><b>helpreset</b></a></td>
      <td>Clear help system cache</td></tr>
    <tr><td><a href="qhelp"><b>qhelp</b></a></td>
      <td>Print command summaries</td></tr>
    <tr><td><a href="quit"><b>quit</b></a></td>
      <td>Exit program</td></tr>
    <tr><td><a href="rusage"><b>rusage</b></a></td>
      <td>Print resource usage statistics</td></tr>
    <tr><td><a href="stats"><b>stats</b></a></td>
      <td>Print resource usage statistics</td></tr>
    <tr><td><a href="version"><b>version</b></a></td>
      <td>Print program version</td></tr>
    </table>

!!SEEALSO
commands

!! commands.tex 012209
!!KEYWORD
bug
!!TITLE
bug command
!!HTML 
    command: <tt>bug</tt>
 
    <p>
    The <b>bug</b> command facilitates sending bug reports and other
    messages to the <i>WRspice</i> administrator.  Issuing the
    <b>bug</b> command will pop up a mail editing window if graphics
    is available, or will allow a message to be entered on the command
    line if not.  The <a href="environment">environment</a> variable
    <b>SPICE_BUGADDR</b> is used to set the internet address to which
    bug reports are sent (this can be changed in the pop-up mail
    editor window).  If not set, the report is sent to the Whiteley
    Research technical support staff.  This command takes no
    arguments.

    <p>
    The mail editor window can also be displayed by pressing the
    <b>WR</b> button in the <a href="toolbar"><b>Tool Control</b></a>
    window.
 
!!SEEALSO
misccmds

!! commands.tex 012209
!!KEYWORD
help
!!TITLE
help command
!!HTML
    command: <tt>help</tt> [-c <tt>|</tt> [<i>topic</i>]]

    <p>
    The <b>help</b> command brings up a help window describing the
    topic keyword passed as an argument to the command, or the
    top-level entry if no argument is given.  When graphics is not
    available, the help text is presented in a text-only format on the
    terminal.  The HTML to ASCII text converter only handles the most
    common HTML tags, so some descriptions may look a little strange. 
    The figures (and all images) are not shown, and links are not
    available, except for the "subtopics" and "references" lists.

    <p>
    The help data files are found in directories specified in the <a
    href="helppath"><tt>helppath</tt></a> variable, or from the
    <b>SPICE_HLP_PATH</b> <a href="environment">environment</a>
    variable.  If for some reason the help directory is not found, a
    very minimal internal text-mode help system will be provided.  The
    single character '?' is internally aliased to "<tt>help</tt>". 
 
    <p>
    If the single argument "<tt>-c</tt>" is given, the internal topic
    hash tables are cleared.  Since the topics are hashed as offsets
    into the files, if a topic text changes, the offsets will be
    incorrect.  After changes are made to a help file, or new help
    files are added, if in <i>WRspice</i> and the help database has
    already been cached by viewing any help topic, giving "<tt>help
    -c</tt>" will ensure that new topics are found and present topics
    display correctly.  This is the same effect as giving the
    <b>helpreset</b> command.
 
    <p>
    The <a href="helpinitxpos"><tt>helpinitxpos</tt></a> variable
    specifies the distance in pixels from the left edge of the screen
    to the left edge of the help window, when it first appears.  If
    not set, the value taken is 100 pixels.  The <a
    href="helpinitypos"><tt>helpinitypos</tt><a> variable specifies
    the distance in pixels from the top edge of the screen to the top
    edge of the help window, when it first appears.  If not set, the
    value taken is 100 pixels.

!!SEEALSO
helpreset
helpsys
misccmds

!! commands.tex 012209
!!KEYWORD
helpreset
!!TITLE
helpreset command
!!HTML
    command: <tt>helpreset</tt>

    <p>
    This will clear the internal topic cache used by the help system. 
    The cache saves topic references as offsets into the help
    (<tt>.hlp</tt>) files, so that if the text of a help file is
    modified, the offsets are probably no longer valid.  This function
    is useful when editing the text of a help file, while viewing the
    entry in <i>WRspiceic</i>.  Use this function when editing is
    complete, before reloading the topic into the viewer.  Although
    the offset to the present topic does not change when editing, so
    that simply reloading would look fine, other topics in the file
    that come after the present topic would not display correctly if
    the offsets change.

    <p>
    This is the same effect as giving the <b>help</b> command with the
    <tt>-c</tt> option.

!!SEEALSO
help
misccmds

!! commands.tex 012209
!!KEYWORD
qhelp
!!TITLE
qhelp command
!!HTML 
    command: <tt>qhelp</tt> [<i>command_list</i>]

    <p>
    The <b>qhelp</b> command prints a brief description of each
    command listed as an argument.  If no arguments are given, all
    commands are listed.  This is not part of the main help system. 
 
!!SEEALSO
misccmds

!! commands.tex 012209
!!KEYWORD
quit
!!TITLE
quit command
!!HTML 
    command: <tt>quit</tt>

    <p>
    The <b>quit</b> command terminates the <i>WRspice</i> session.  If
    there are circuits that are in the middle of a simulation, or
    plots that have not been saved in a file, the user is reminded of
    this and asked to confirm.  The variable <a
    href="noaskquit"><tt>noaskquit</tt></a> disables this. 
    <i>WRspice</i> can also be terminated from the <b>Quit</b> button
    in the <b>File</b> menu of the <a href="toolbar"><b>Tool
    Control</b></a> window.  The command takes no arguments.
 
!!SEEALSO
misccmds
 
!! commands.tex 011909
!!KEYWORD
version
!!TITLE
version command
!!HTML 
    command: <tt>version</tt> [<i>version_name</i>]

    <p>
    The <b>version</b> command is used to determine the version of
    <i>WRspice</i> running.  With no arguments, this command prints
    out the current version of <i>WRspice</i>.  If there are
    arguments, it compares the current version with the given version
    and prints a warning if they differ.  A version command is usually
    included in the <a href="rawfilefmt">rawfile</a>.
 
!!SEEALSO
misccmds

